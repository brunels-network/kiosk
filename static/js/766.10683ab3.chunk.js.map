{"version":3,"file":"static/js/766.10683ab3.chunk.js","mappings":"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","sources":["SocialApp.js","components/AboutOverlay.js","components/BigBox.js","components/BioOverlay.js","components/ForceGraph.js","components/HBox.js","components/HowDoIOverlay.js","components/LabelButton.js","components/MainMenu.js","components/Overlay.js","components/OverlayWrapper.js","components/Popover.js","components/SearchBar.js","components/ShipOverlay.js","components/ShipSelector.js","components/SlidingPanel.js","components/TextButton.js","components/Timeout.js","components/ToggleButton.js","components/VBox.js","components/WarningOverlay.js","components/WelcomePage.js","components/d3/ForceGraph.d3.js","components/d3/force_spiral.js","model/Affiliation.js","model/Affiliations.js","model/Affiliations.test.js","model/Biographies.js","model/Business.js","model/Businesses.js","model/Businesses.test.js","model/Connection.js","model/Connections.js","model/DateRange.js","model/DateRange.test.js","model/Errors.js","model/Note.js","model/Notes.js","model/People.js","model/People.test.js","model/Person.js","model/Position.js","model/Positions.js","model/Positions.test.js","model/Project.js","model/Projects.js","model/Projects.test.js","model/RoughDate.js","model/RoughDate.test.js","model/ScoringFunctions.js","model/SizingFunctions.js","model/Social.js","model/Source.js","model/Source.test.js","model/Sources.js","model/get_id.js","webpack://brunel/./src/SocialApp.module.css?42ce","webpack://brunel/./src/components/AboutOverlay.module.css?88b7","webpack://brunel/./src/components/BigBox.module.css?e9c6","webpack://brunel/./src/components/BioOverlay.module.css?42e9","webpack://brunel/./src/components/ForceGraph.module.css?a9f7","webpack://brunel/./src/components/HBox.module.css?841c","webpack://brunel/./src/components/HowDoIOverlay.module.css?a3b4","webpack://brunel/./src/components/LabelButton.module.css?1ea4","webpack://brunel/./src/components/MainMenu.module.css?096f","webpack://brunel/./src/components/Overlay.module.css?46a7","webpack://brunel/./src/components/Popover.module.css?30f3","webpack://brunel/./src/components/SearchBar.module.css?5525","webpack://brunel/./src/components/ShipOverlay.module.css?93ab","webpack://brunel/./src/components/ShipSelector.module.css?5bd5","webpack://brunel/./src/components/SlidingPanel.module.css?6243","webpack://brunel/./src/components/TextButton.module.css?cd27","webpack://brunel/./src/components/ToggleButton.module.css?093d","webpack://brunel/./src/components/VBox.module.css?a324","webpack://brunel/./src/components/WarningOverlay.module.css?f20a","webpack://brunel/./src/components/WelcomePage.module.css?de90","webpack://brunel/./src/components/transitions/SlideFromBottom.module.css?1e47","webpack://brunel/./src/components/transitions/SlideFromLeft.module.css?9563","webpack://brunel/./src/components/transitions/SlideFromRight.module.css?ca1f","webpack://brunel/./src/components/transitions/SlideFromTop.module.css?e237","../src|sync|/^/.//.*$"],"sourcesContent":["// package imports\nimport React from \"react\";\nimport Dry from \"json-dry\";\n\n// Brunel components\nimport ForceGraph from \"./components/ForceGraph\";\nimport ShipSelector from \"./components/ShipSelector\";\nimport TextButton from \"./components/TextButton\";\nimport LabelButton from \"./components/LabelButton\";\nimport HowDoIOverlay from \"./components/HowDoIOverlay\";\nimport Overlay from \"./components/Overlay\";\nimport SearchBar from \"./components/SearchBar\";\nimport BioOverlay from \"./components/BioOverlay\";\nimport ShipOverlay from \"./components/ShipOverlay\";\nimport SlidingPanel from \"./components/SlidingPanel\";\nimport MainMenu from \"./components/MainMenu\";\nimport WarningOverlay from \"./components/WarningOverlay\";\nimport Timeout from \"./components/Timeout\";\nimport WelcomePage from \"./components/WelcomePage\";\n\nimport HBox from \"./components/HBox\";\nimport VBox from \"./components/VBox\";\nimport BigBox from \"./components/BigBox\";\n\n// Brunel model\nimport Social from \"./model/Social\";\n\n// Data for import\nimport graphData from \"./socialNetwork.json\";\nimport positionGroups from \"./data/positionGroups.json\";\nimport imageData from \"./images.json\";\n\nimport gw_text from \"./gw_text.md\";\nimport gb_text from \"./gb_text.md\";\nimport ge_text from \"./ge_text.md\";\nimport help_text from \"./help_text.md\";\n\n// Styling for the app\nimport styles from \"./SocialApp.module.css\";\n\nimport { score_by_connections, score_by_influence } from \"./model/ScoringFunctions\";\n\nimport { size_by_connections, size_by_influence } from \"./model/SizingFunctions\";\nimport last from \"lodash/last\";\n\nclass SocialApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    // Load in the Dried graph data from JSON\n    let social = Dry.parse(graphData);\n\n    if (!(social instanceof Social)) {\n      console.error(\"Could not parse!\");\n      social = new Social();\n    }\n\n    this.updateSize = this.updateSize.bind(this);\n\n    this.state = {\n      social: social,\n      highlighted_item: null,\n      selected_item: null,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n      commercialFiltered: false,\n      engineersFiltered: false,\n      spiralOrder: \"Influence\",\n      nodeSize: \"Influence\",\n      commercialNodeFilter: [],\n      engineerNodeFilter: [],\n      connectedNodes: null,\n      selectedShip: null,\n      selectedShipID: null,\n      isOverlayOpen: false,\n      searchText: \"\",\n      searchIncludeBios: true,\n      searchHighlightLinks: false,\n      menuVisible: false,\n      height: 0,\n      width: 0,\n      warningVisible: true,\n      showWelcomePage: true\n    };\n\n    Object.keys(imageData).forEach((key) => {\n      social.setImage(key, imageData[key][0], imageData[key][1]);\n    });\n\n    const ssGW = social.getProjects().getByName(\"SS Great Western\");\n    this.state.selectedShip = ssGW.getName();\n    this.state.selectedShipID = ssGW.getID();\n\n    const ssGB = social.getProjects().getByName(\"SS Great Britain\");\n    const ssGE = social.getProjects().getByName(\"SS Great Eastern\");\n\n    fetch(gw_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGW, text)\n    });\n\n    fetch(gb_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGB, text)\n    });\n\n    fetch(ge_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setProjectText(ssGE, text)\n    });\n\n    fetch(help_text)\n      .then(r => r.text())\n      .then(text => {\n        social.setHelpText(text)\n    });\n\n    // make sure that we start showing only the Great Western\n    this.state.social.toggleFilter(ssGW);\n\n    this.spiralOrders = Object.freeze({\n      Connections: score_by_connections,\n      Influence: score_by_influence,\n    });\n\n    this.nodeSizes = Object.freeze({\n      Influence: size_by_influence,\n      Connections: size_by_connections,\n    });\n\n    this.state.social.setSizingFunction(size_by_influence);\n\n    // Find the investors and engineers for easy filtering\n    // This requires the\n    this.findInvestorsAndEngineers();\n\n    this.state.social.setScoringFunction(this.spiralOrders[this.state.spiralOrder]);\n\n    this.socialGraph = null;\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  updateSize() {\n    this.setState({\n      width: window.innerWidth,\n      height: window.innerHeight,\n    });\n\n    console.log(`WINDOW ${this.state.width}x${this.state.height}`);\n  }\n\n  slotShowWelcome(){\n    this.setState({showWelcomePage: true});\n  }\n\n  slotCloseWelcome(){\n    this.setState({showWelcomePage: false});\n  }\n\n  slotSetAnchor(item) {\n    let social = this.state.social;\n\n    if (social.setAnchor(item)) {\n      this.setState({ social: social });\n    }\n  }\n\n  slotReadMore(item) {\n    this.setOverlay(\n      <BioOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        person={item}\n      />\n    );\n  }\n\n  slotShowShip(item) {\n    this.setOverlay(\n      <ShipOverlay\n        close={() => {\n          this.closeOverlay();\n        }}\n        social={this.state.social}\n        ship={item}\n      />\n    );\n  }\n\n  slotSetShip(item) {\n    if (!item._isAProjectObject) {\n      console.error(\"Cannot set item that is not a project.\");\n      return;\n    }\n\n    let social = this.state.social;\n    social.setFilter(\"project\", item);\n\n    social.setDefaultImage(social.getImage(item));\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({ selectedShip: item.getName(), selectedShipID: item.getID() });\n    this.setState({ social: social });\n  }\n\n  slotClearFilters() {\n    let social = this.state.social;\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    social.filterUnconnectedNodes(true);\n    social.filterNonContributingEngineers(true);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: false,\n      commercialFiltered: false,\n      filterUnconnectedNodes: true,\n      filterNCEngineers: true,\n    });\n  }\n\n  toggleEngCommFilter() {\n    if (this.state.engineersFiltered) {\n      this.slotToggleFilterCommercial();\n    } else if (this.state.commercialFiltered) {\n      this.slotToggleFilterCommercial();\n    } else {\n      this.slotToggleFilterEngineer();\n    }\n  }\n\n  slotToggleNonContributingEngineers() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(!this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterNCEngineers: !this.state.filterNCEngineers,\n    });\n  }\n\n  slotToggleUnconnectedNodes() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    } else if (this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(!this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks,\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      filterUnconnectedNodes: !this.state.filterUnconnectedNodes,\n    });\n  }\n\n  slotToggleFilterEngineer() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.engineersFiltered) {\n      social.toggleFilter(this.state.engineerNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      engineersFiltered: !this.state.engineersFiltered,\n      commercialFiltered: false,componentDidMount() {\n        setInterval(\n          () => this.setState({ date: new Date() }),\n          1000\n        );\n      }\n    });\n  }\n\n  slotToggleFilterCommercial() {\n    let social = this.state.social;\n\n    social.resetAllFilters();\n    social.setFilter(\"project\", this.state.selectedShipID);\n\n    if (!this.state.commercialFiltered) {\n      social.toggleFilter(this.state.commercialNodeFilter);\n    }\n\n    social.filterUnconnectedNodes(this.state.filterUnconnectedNodes);\n    social.filterNonContributingEngineers(this.state.filterNCEngineers);\n\n    if (this.state.searchText && this.state.searchText.length > 0) {\n      if (this.state.searchWasItem) {\n        social.selectSearchMatching(this.state.searchText, false, true);\n      } else {\n        social.selectSearchMatching(\n          this.state.searchText,\n          this.state.searchIncludeBios,\n          this.state.searchHighlightLinks\n        );\n      }\n    }\n\n    this.setState({\n      social: social,\n      commercialFiltered: !this.state.commercialFiltered,\n      engineersFiltered: false,\n    });\n  }\n\n  slotClicked(id) {\n    let social = this.state.social;\n\n    if (!id) {\n      let last_search = this.state.cachedSearch;\n\n      if (last_search === \"\") {\n        social.clearSelections();\n        social.clearHighlights();\n        this.setState({\n          social: social,\n          searchText: \"\",\n          cachedSearch: \"\",\n          searchWasItem: false,\n        });\n      } else {\n        this.performSearch(this.state.cachedSearch, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n      }\n    } else {\n      let item = social.get(id);\n\n      social.setSelected(id, true, true);\n      this.setState({\n        social: social,\n        searchText: item.getName(),\n        searchWasItem: true,\n      });\n    }\n  }\n\n  slotWindowChanged(window) {\n    let social = this.state.social;\n\n    if (social.setWindow(window)) {\n      this.setState({ social: social });\n    }\n  }\n\n  hasConnections(entity) {\n    return this.state.social.getConnections().gotConnections(entity.id);\n  }\n\n  findInvestorsAndEngineers() {\n    // Add nodes to the commercial or engineering groups. This\n    // creates filters that filter positions that we've matched\n    // as benig \"engineer\" or \"commercial\"\n    let commercialNodeFilter = this.state.commercialNodeFilter;\n    let engineerNodeFilter = this.state.engineerNodeFilter;\n\n    const social = this.state.social;\n\n    let positions = social.getPositions(false).items();\n\n    Object.keys(positions).forEach((name) => {\n      // Trim any extra characters or whitespace from the position string\n      const namedPosition = name\n        .toLowerCase()\n        .replace(/\\s/g, \"\")\n        .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n\n      // Here we need to check if they've already been saved to stop double counting\n      if (positionGroups[\"commercial\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!commercialNodeFilter.includes(positionID)) {\n          commercialNodeFilter.push(positionID);\n        }\n      }\n\n      if (positionGroups[\"engineering\"][\"members\"].includes(namedPosition)) {\n        const positionID = positions[name];\n        if (!engineerNodeFilter.includes(positionID)) {\n          engineerNodeFilter.push(positionID);\n        }\n      }\n    });\n  }\n\n  toggleSpiralOrder() {\n    const order = this.state.spiralOrder;\n\n    if (order === \"Influence\") {\n      this.setSpiralOrder(\"Connections\");\n    } else if (order === \"Connections\") {\n      this.setSpiralOrder(\"Influence\");\n    }\n  }\n\n  setSpiralOrder(order) {\n    if (order in this.spiralOrders) {\n      if (this.state.spiralOrder !== order) {\n        let social = this.state.social;\n        social.setScoringFunction(this.spiralOrders[order]);\n        this.setState({\n          social: social,\n          spiralOrder: order,\n        });\n      }\n    } else {\n      console.error(\"Invalid spiral order, valid orders are \", Object.keys(this.spiralOrders));\n    }\n  }\n\n  toggleNodeSize() {\n    const size = this.state.nodeSize;\n\n    if (size === \"Influence\") {\n      this.setNodeSize(\"Connections\");\n    } else if (size === \"Connections\") {\n      this.setNodeSize(\"Influence\");\n    }\n  }\n\n  setNodeSize(size) {\n    if (size in this.nodeSizes) {\n      if (this.state.nodeSize !== size) {\n        let social = this.state.social;\n        social.setSizingFunction(this.nodeSizes[size]);\n        this.setState({\n          social: social,\n          nodeSize: size,\n        });\n      }\n    } else {\n      console.error(\"Invalid sizing function, valid functions are \", Object.keys(this.nodeSizes));\n    }\n  }\n\n  setOverlay(item) {\n    this.setState({\n      overlayItem: item,\n      isOverlayOpen: true,\n    });\n  }\n\n  closeOverlay() {\n    this.setState({\n      isOverlayOpen: false,\n      overlayItem: null,\n    });\n  }\n\n  performSearch(text, include_bios, highlight_links) {\n    let social = this.state.social;\n\n    social.selectSearchMatching(text, include_bios, highlight_links);\n\n    this.setState({\n      social: social,\n      searchIncludeBios: include_bios,\n      searchHighlightLinks: highlight_links,\n      searchText: text,\n      searchWasItem: false,\n      cachedSearch: text,\n    });\n  }\n\n  slotCloseWarning() {\n    this.setState({ warningVisible: false });\n  }\n\n  slotShowMenu() {\n    this.setState({ menuVisible: true });\n  }\n\n  slotCloseMenu() {\n    this.setState({ menuVisible: false });\n  }\n\n  slotUpdateSearch(text) {\n    this.performSearch(text, this.state.searchIncludeBios, this.state.searchHighlightLinks);\n  }\n\n  slotSearchBiosToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, toggled, this.state.searchHighlightLinks);\n    }\n  }\n\n  slotSearchHighlightToggled(toggled) {\n    if (this.state.searchWasItem) {\n    } else {\n      this.performSearch(this.state.searchText, this.state.searchIncludeBios, toggled);\n    }\n  }\n\n  toggleOverlay() {\n    this.setState({ isOverlayOpen: !this.state.isOverlayOpen });\n  }\n\n  resetAll() {\n    window.location.reload(true);\n  }\n\n  render() {\n\n    const timeout = 30;\n\n    if (this.state.showWelcomePage){\n      return <WelcomePage emitCloseWelcome={()=>{this.slotCloseWelcome()}}\n                          timeout={timeout}\n                          emitReload={()=>{this.resetAll()}}/>\n    }\n\n    let menu = (\n      <TextButton\n        onClick={() => {\n          this.slotShowMenu();\n        }}\n      >\n        Options\n      </TextButton>\n    );\n\n    let search = (\n      <SearchBar\n        emitUpdate={(text) => {\n          this.slotUpdateSearch(text);\n        }}\n        emitSearchHighlightToggled={(toggled) => {\n          this.slotSearchHighlightToggled(toggled);\n        }}\n        searchText={this.state.searchText}\n        searchHighlightToggled={this.state.searchHighlightLinks}\n        searchHighlightAvailable={!this.state.searchWasItem}\n      />\n    );\n\n    let help = (\n      <TextButton\n        onClick={() => {\n          this.setOverlay(\n            <HowDoIOverlay\n              social={this.state.social}\n              close={() => {\n                this.closeOverlay();\n              }}\n            />\n          );\n        }}\n      >\n        Info\n      </TextButton>\n    );\n\n    let graph = (\n      <ForceGraph\n        social={this.state.social}\n        selected={this.state.selected_item}\n        highlighted={this.state.highlighted_item}\n        signalClicked={(id) => this.slotClicked(id)}\n        emitSetCenter={(id) => {\n          this.slotSetAnchor(id);\n        }}\n        emitReadMore={(id) => {\n          this.slotReadMore(id);\n        }}\n      />\n    );\n\n    let spiral_button = (\n      <LabelButton\n        label=\"Spiral Order\"\n        button={this.state.spiralOrder}\n        onClick={() => {\n          this.toggleSpiralOrder();\n        }}\n      />\n    );\n\n    let ship_button = (\n      <ShipSelector\n        projects={this.state.social.getProjects()}\n        emitSetShip={(item) => this.slotSetShip(item)}\n        emitShowShip={(item) => this.slotShowShip(item)}\n      />\n    );\n\n    let size_button = (\n      <LabelButton\n        label=\"Node Size\"\n        button={this.state.nodeSize}\n        onClick={() => {\n          this.toggleNodeSize();\n        }}\n      />\n    );\n\n    let filter_text = \"None\";\n\n    if (this.state.commercialFiltered) {\n      filter_text = \"Commercial\";\n    } else if (this.state.engineersFiltered) {\n      filter_text = \"Engineers\";\n    }\n\n    let filter_button = (\n      <LabelButton\n        label=\"Filter\"\n        button={filter_text}\n        onClick={() => {\n          this.toggleEngCommFilter();\n        }}\n      />\n    );\n\n    let unconnected_button = (\n      <LabelButton\n        label=\"Unconnected\"\n        button={this.state.filterUnconnectedNodes ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleUnconnectedNodes();\n        }}\n      />\n    );\n\n    let noncontrib_button = (\n      <LabelButton\n        label=\"Non-contributers\"\n        button={this.state.filterNCEngineers ? \"Invisible\" : \"Visible\"}\n        onClick={() => {\n          this.slotToggleNonContributingEngineers();\n        }}\n      />\n    );\n\n    let search_text = this.state.searchIncludeBios ? \"Biographies\" : \"Names\";\n\n    let toggle_search = () => {\n      this.slotSearchBiosToggled(!this.state.searchIncludeBios);\n    };\n\n    let search_button = (\n      <LabelButton\n        label=\"Search\"\n        button={search_text}\n        onClick={toggle_search}\n      />\n    );\n\n    let overlay = null;\n    if (this.state.isOverlayOpen) {\n      overlay = (\n        <Overlay\n          toggleOverlay={() => {\n            this.toggleOverlay();\n          }}\n        >\n          {this.state.overlayItem}\n        </Overlay>\n      );\n    }\n\n    let left_side = null;\n    let right_side = null;\n\n    if (this.state.width > 900) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n          {search_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {unconnected_button}\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 700) {\n      left_side = (\n        <HBox>\n          {spiral_button}\n          {filter_button}\n        </HBox>\n      );\n\n      right_side = (\n        <HBox>\n          {noncontrib_button}\n          {size_button}\n        </HBox>\n      );\n    } else if (this.state.width > 550) {\n      left_side = spiral_button;\n      right_side = size_button;\n    }\n\n    let mainmenu = (\n      <SlidingPanel isOpen={this.state.menuVisible}\n        position=\"left\" height=\"100%\" width=\"25%\">\n        <MainMenu\n          close={() => {\n            this.slotCloseMenu();\n          }}\n          spiralOrder={this.state.spiralOrder}\n          filterText={filter_text}\n          sizeText={this.state.nodeSize}\n          searchText={search_text}\n\n          unconnectedNodesVisible={!this.state.filterUnconnectedNodes}\n          ncEngineersVisible={!this.state.filterNCEngineers}\n          engineersFiltered={this.state.engineersFiltered}\n          commercialFiltered={this.state.commercialFiltered}\n          searchHighlight={this.state.searchHighlightLinks}\n          searchBios={this.state.searchIncludeBios}\n          emitReload={() => {\n            this.resetAll();\n          }}\n          emitToggleSpiralOrder={() => this.toggleSpiralOrder()}\n          emitToggleFilter={() => this.toggleEngCommFilter()}\n          emitToggleNodeSize={() => this.toggleNodeSize()}\n          emitToggleSearch={toggle_search}\n\n          emitToggleFilterCommercial={() => this.slotToggleFilterCommercial()}\n          emitToggleFilterEngineering={() => this.slotToggleFilterEngineer()}\n          emitToggleUnconnectedNodesVisible={() => this.slotToggleUnconnectedNodes()}\n          emitToggleNCEngineersVisible={() => this.slotToggleNonContributingEngineers()}\n          emitSearchHighlightToggled={() => this.slotSearchHighlightToggled(!this.state.searchHighlightLinks)}\n          emitSearchBiosToggled={() => this.slotSearchBiosToggled(!this.state.searchIncludeBios)}\n        />\n      </SlidingPanel>\n    );\n\n    // make sure that we don't have too many nodes...\n    let nnodes = this.state.social.getGraph().nodes.length;\n\n    let warning_popover = null;\n\n    if (this.state.warningVisible && nnodes > 50) {\n      warning_popover = (\n        <Overlay useBackground={false} toggleOverlay={() => { this.slotCloseWarning() }}>\n        <WarningOverlay close={() => { this.slotCloseWarning() }}>\n            As you can see, this is a busy network. Using filters will allow you\n            to examine the network more closely.\n        </WarningOverlay>\n          </Overlay>\n      );\n    }\n\n    return (\n      <div>\n        {mainmenu}\n        <div className={styles.ui_main}>\n          <VBox>\n            <HBox>\n              {menu}\n              <BigBox>{search}</BigBox>\n              {help}\n            </HBox>\n\n            <BigBox>\n              <div className={styles.fullscreen}>{graph}</div>\n            </BigBox>\n\n            <HBox>\n              {left_side}\n              <BigBox>{ship_button}</BigBox>\n              {right_side}\n            </HBox>\n          </VBox>\n        </div>\n        {overlay}\n        {warning_popover}\n        <Timeout last_interaction_time={new Date()}\n                 timeout={timeout}\n                 emitReload={()=>{this.resetAll()}}/>\n      </div>\n    );\n  }\n}\n\nexport default SocialApp;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./AboutOverlay.module.css\";\n\nimport aboutText from \"../data/aboutText.json\";\n\nclass AboutOverlay extends React.Component {\n  render() {\n    return (\n      <div className={styles.container}>\n        <div className={styles.closeButton}>\n          <button onClick={this.props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2.4vh\" }}>\n            x\n          </button>\n        </div>\n        <div className={styles.textContainer}>\n          <div className={styles.header}>About</div>\n          <div className={styles.intro}>{aboutText[\"intro\"]}</div>\n          <div className={styles.introBody}>\n            <p>{aboutText[\"introParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"introParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"methodHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"methodParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"methodParaTwo\"]}</p>\n          </div>\n          <div className={styles.sectionHeader}>{aboutText[\"sourcesHeader\"]}</div>\n          <div className={styles.body}>\n            <p>{aboutText[\"sourcesParaOne\"]}</p>\n            <br></br>\n            <p>{aboutText[\"sourcesParaTwo\"]}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nAboutOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n};\n\nexport default AboutOverlay;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./BigBox.module.css\";\n\n\nclass BigBox extends React.Component {\n    render(){\n        return (\n            <div className={styles.bigbox}>\n                {this.props.children}\n            </div>);\n    }\n}\n\n\nBigBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default BigBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport \"react-tabs/style/react-tabs.css\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./BioOverlay.module.css\";\n\nfunction BioOverlay(props) {\n  let social = props.social;\n\n  const person = social.get(props.person);\n  const id = person.getID();\n  const name = person.getName();\n  const biographies = props.social.getBiographies();\n\n  // Get biography and strip name\n  let bio = biographies.getByID(id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  }\n\n  bio = bio.replace(name + \". \", \"\");\n\n  let sources = [];\n  let seen = {};\n\n  Object.keys(person.getSources()).forEach((key) => {\n    person.getSources()[key].forEach((item) => {\n      if (!seen[item]) {\n        let source = social.get(item);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[item] = 1;\n      }\n    });\n  });\n\n  let connections = social.getConnections().getConnectionsInvolving(person);\n\n  connections.forEach((connection) => {\n    Object.keys(connection.getAffiliationSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n\n    Object.keys(connection.getCorrespondanceSources()).forEach((key) => {\n      if (!seen[key]) {\n        let source = social.get(key);\n\n        if (source) {\n          sources.push(source);\n        }\n\n        seen[key] = 1;\n      }\n    });\n  })\n\n  let source_parts = [];\n\n  if (sources.length > 0) {\n    sources.forEach((source) => {\n      //console.log(source);\n      source_parts.push(\n        <li key={source.getID()}\n          className={styles.source_item}>\n          <span className={styles.source_name}>{source.getName(true)}</span>&nbsp;\n          {source.getDescription()}\n        </li>\n      );\n    })\n  } else {\n    source_parts.push(<li key=\"source\"\n                          className={styles.source_item}>No sources</li>);\n  }\n\n  let filename = social.getImage(person);\n  let credit = null;\n\n  if (filename) {\n    credit = social.getImageCredit(person);\n  } else {\n    filename = \"images/Great_Western_maiden_voyage.jpg\";\n  }\n\n  if (credit) {\n    credit = (\n      <div className={styles.image_credit}>{credit}</div>\n    );\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div>\n        <div>\n            <BigBox><div className={styles.name}>{person.getName()}</div></BigBox>\n        </div>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\" key={id}\n             src={require(`../${filename}`)} alt=\"A ship\" />\n        {credit}\n        <div>\n          <div className={styles.bio_heading}>Biography</div>\n          <div className={styles.bio}>{bio}</div>\n          <div className={styles.source_heading}>Sources</div>\n          <ul className={styles.source}>{source_parts}</ul>\n        </div>\n      </div>\n    </div>\n  );\n\n  //<div className={styles.caption}>(C) This will be the copyright info / link</div>\n}\n\nBioOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  person: PropTypes.string.isRequired,\n};\n\nexport default BioOverlay;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport Popover from \"./Popover\";\nimport ForceGraphD3 from \"./d3/ForceGraph.d3.js\";\n\nimport styles from \"./ForceGraph.module.css\";\n\n\nclass ForceGraph extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      popup: null,\n    };\n\n    this.updateSize = this.updateSize.bind(this);\n    this.emitPopup = this.emitPopup.bind(this);\n    this.clearPopup = this.clearPopup.bind(this);\n    this.componentDidUpdate = this.componentDidUpdate.bind(this);\n\n    this.containerRef = React.createRef();\n\n    this.graph = new ForceGraphD3(this, props);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"resize\", this.updateSize);\n    this.updateSize();\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"resize\", this.updateSize);\n  }\n\n  componentDidUpdate() {\n    this.graph.emitPopup = this.emitPopup;\n    this.graph.clearPopup = this.clearPopup;\n    this.graph.draw();\n  }\n\n  updateSize() {\n    const containerRect = this.containerRef.current.getBoundingClientRect();\n\n    if (this.containerRef && this.graph) {\n      let width = containerRect.width;\n      let height = containerRect.height;\n\n      this.graph.update({\n        width: width,\n        height: height\n      });\n      this.graph.drawFromScratch();\n    }\n  }\n\n  emitPopup(node) {\n    this.setState({ popup: node });\n  }\n\n  clearPopup() {\n    this.setState({ popup: null });\n  }\n\n  render() {\n    this.graph.update(this.props);\n\n    let popup = null;\n\n    if (this.state.popup) {\n      let node = this.state.popup;\n\n      popup = <Popover\n        node={node}\n        social={this.props.social}\n        clearPopup={this.clearPopup}\n        emitSetCenter={this.props.emitSetCenter}\n        emitReadMore={this.props.emitReadMore}\n      />;\n    }\n\n    return (\n      <div ref={this.containerRef} className={styles.container}>\n        <div className={this.graph.className()}>\n          {popup}\n        </div>\n      </div>\n    );\n  }\n}\n\nForceGraph.propTypes = {\n  social: PropTypes.object.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default ForceGraph;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./HBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\nclass HBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.hbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nHBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default HBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./HowDoIOverlay.module.css\";\n\nfunction HowDoIOverlay(props) {\n  let social = props.social;\n\n  let markdown = social.getHelpText();\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = \"images/ships/Great_Britain.jpg\";\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown>{markdown}</ReactMarkdown></div>\n      </div>\n    </div>\n  );\n}\n\nHowDoIOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n};\n\nexport default HowDoIOverlay;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport VBox from \"./VBox\";\n\nimport styles from \"./LabelButton.module.css\";\n\n\nfunction LabelButton(props) {\n\n    let onClick = null;\n\n    if (props.onClick) {\n      onClick = props.onClick;\n    } else {\n      onClick = () => { console.log(\"NULL\");};\n    }\n\n    return (\n        <VBox>\n            <button\n              className={styles.label}\n              onClick={onClick}\n            >\n              Current<br/>{props.label}\n            </button>\n            <button\n              className={styles.button}\n              onClick={onClick}\n            >\n              {props.button}\n            </button>\n        </VBox>\n    );\n}\n\n\nLabelButton.propTypes = {\n    button: PropTypes.any,\n    label: PropTypes.any,\n    onClick: PropTypes.func\n  };\n\nexport default LabelButton;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport VBox from \"./VBox\";\nimport moment from \"moment\";\n\nimport styles from \"./MainMenu.module.css\";\n\nfunction MenuLabel(props) {\n  return (\n    <div className={styles.menu_label}\n         onClick={props.onClick}>\n      {props.children}\n    </div>\n  )\n}\n\n\nfunction MenuButton(props) {\n  let onClick = null;\n\n  if (props.onClick) {\n    onClick = props.onClick;\n  } else {\n    onClick = () => null;\n  }\n\n  return (\n    <button className={styles.menu_button} onClick={onClick}>\n      {props.children}\n    </button>\n  );\n}\n\n\nclass MainMenu extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.wrapperRef = React.createRef();\n    this.setWrapperRef = this.setWrapperRef.bind(this);\n    this.handleClickOutside = this.handleClickOutside.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener(\"mousedown\", this.handleClickOutside);\n  }\n\n  setWrapperRef(node) {\n    this.wrapperRef = node;\n  }\n\n  handleClickOutside(event) {\n    if (this.wrapperRef && !this.wrapperRef.contains(event.target)) {\n      this.props.close();\n      event.stopPropagation();\n    }\n  }\n\n  render() {\n    let unconnectedNodesText = this.props.unconnectedNodesVisible ? \"Visible\" : \"Invisible\";\n    let ncEngineersText = this.props.ncEngineersVisible ? \"Visible\" : \"Invisible\";\n\n    return (\n      <div data-testid=\"AnalysisPanel\" ref={this.setWrapperRef} className={styles.panel}>\n        <VBox>\n          <MenuButton\n              onClick={() => {\n                this.props.close();\n              }}\n          >\n             Close \n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}>\n            Current<br/>Spiral Order\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSpiralOrder();\n            }}\n          >\n            {this.props.spiralOrder}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}>\n            Current<br/>Node Size\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNodeSize();\n            }}\n          >\n            {this.props.sizeText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            Current<br/>Filter\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleFilter();\n            }}\n          >\n            {this.props.filterText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            Current<br/>Unconnected\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleUnconnectedNodesVisible();\n            }}\n          >\n            {unconnectedNodesText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            Current<br/>Non-contributers\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleNCEngineersVisible();\n            }}\n          >\n            {ncEngineersText}\n          </MenuButton>\n\n          <MenuLabel\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            Current<br/>Search\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitToggleSearch();\n            }}\n          >\n            {this.props.searchText}\n          </MenuButton>\n\n          <MenuLabel>\n            Further Options\n          </MenuLabel>\n          <MenuButton\n            onClick={() => {\n              this.props.emitReload();\n            }}\n          >\n            Reload\n          </MenuButton>\n        </VBox>\n      </div>\n    );\n  }\n}\n\nMenuButton.propTypes = {\n  children: PropTypes.object.isRequired,\n  onClick: PropTypes.func.isRequired,\n}\n\nMenuLabel.propTypes = {\n  children: PropTypes.object.isRequired,\n}\n\nMainMenu.propTypes = {\n  close: PropTypes.func.isRequired,\n  unconnectedNodesVisible: PropTypes.bool.isRequired,\n  ncEngineersVisible: PropTypes.bool.isRequired,\n  engineersFiltered: PropTypes.bool.isRequired,\n  commercialFiltered: PropTypes.bool.isRequired,\n  searchBios: PropTypes.bool.isRequired,\n  searchHighlight: PropTypes.bool.isRequired,\n  emitToggleFilterCommercial: PropTypes.func.isRequired,\n  emitToggleFilterEngineering: PropTypes.func.isRequired,\n  emitToggleUnconnectedNodesVisible: PropTypes.func.isRequired,\n  emitToggleNCEngineersVisible: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  emitSearchBiosToggled: PropTypes.func.isRequired,\n};\n\nexport default MainMenu;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport styles from \"./Overlay.module.css\";\n\n// Based on https://stackoverflow.com/a/55003301\nfunction Overlay(props) {\n  const { useState } = React;\n  const [open, setOpen] = useState(true);\n  if (open) {\n    let style = styles.overlay;\n\n    if (!props.useBackground) {\n      style = styles.overlayNoBackground;\n    }\n\n    return (\n      <div\n        data-testid=\"overlay\"\n        className={style}\n        onClick={() => {\n          props.toggleOverlay();\n          setOpen(false);\n        }}\n      >\n        <div\n          onClick={(e) => {\n            e.stopPropagation();\n          }}\n        >\n          {props.children}\n        </div>\n      </div>\n    );\n  }\n  return null;\n}\n\nOverlay.defaultProps = {\n  useBackground: true,\n};\n\nexport default Overlay;\n\nOverlay.propTypes = {\n  toggleOverlay: PropTypes.func.isRequired,\n  children: PropTypes.element.isRequired,\n  useBackground: PropTypes.bool,\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BioOverlay from \"./BioOverlay\";\nimport Overlay from \"./Overlay\";\n\nclass OverlayWrapper extends React.Component {\n  render() {\n    const sourceButtonText = this.props.sourceButtonText;\n    const socialSources = this.props.social.getSources();\n\n    if (!this.props.sourceIDs) {\n      return null;\n    }\n\n    let overlay = null;\n    if (this.props.isOverlayOpen && this.props.isBioOverlayOpen) {\n      overlay = (\n        <Overlay toggleOverlay={this.props.toggleOverlay}>\n          <BioOverlay\n            sources={socialSources}\n            person={this.props.entity}\n            social={this.props.social}\n            toggleOverlay={this.props.toggleOverlay}\n            toggleSourceOverlay={this.props.toggleSourceOverlay}\n            sourceButtonText={sourceButtonText}\n          />\n        </Overlay>\n      );\n    }\n\n    return overlay;\n  }\n}\n\nOverlayWrapper.propTypes = {\n  entity: PropTypes.object.isRequired,\n  isBioOverlayOpen: PropTypes.bool.isRequired,\n  isOverlayOpen: PropTypes.bool.isRequired,\n  isSourceOverlayOpen: PropTypes.bool.isRequired,\n  social: PropTypes.object.isRequired,\n  sourceButtonText: PropTypes.string.isRequired,\n  sourceIDs: PropTypes.array.isRequired,\n  toggleBioOverlay: PropTypes.func.isRequired,\n  toggleOverlay: PropTypes.func.isRequired,\n  toggleSourceOverlay: PropTypes.func.isRequired,\n};\n\nexport default OverlayWrapper;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport TextButton from \"./TextButton\";\n\nimport VBox from \"./VBox\";\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./Popover.module.css\";\n\n\nfunction _truncate(str) {\n  const array = str.trim().split(\".\");\n  return array[0] + \"...\";\n}\n\n\nfunction Popover(props) {\n  const node = props.node;\n\n  const name = node.label;\n  const social = props.social;\n\n  let readMoreButton = null;\n\n  if (props.emitReadMore) {\n    readMoreButton = (\n      <TextButton\n        onClick={() => {\n          props.clearPopup();\n          props.emitReadMore(node.id);\n        }}\n      >\n        Read more\n      </TextButton>\n    );\n  }\n\n  let centerButton = null;\n\n  if (props.emitSetCenter) {\n    if (social.isAnchor(node.id)) {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(null);\n          }}\n        >\n          Clear center\n        </TextButton>\n      );\n    }\n    else {\n      centerButton = (\n        <TextButton\n          onClick={() => {\n            props.clearPopup();\n            props.emitSetCenter(node.id);\n          }}\n        >\n          Make center\n        </TextButton>\n      );\n    }\n  }\n\n  // Get biography for node\n  let bio = social.getBiographies().getByID(node.id);\n\n  if (!bio) {\n    bio = \"No biography found.\";\n  } else {\n    bio = bio.replace(name + \".  \", \"\");\n    bio = _truncate(bio);\n  }\n\n  // Get the location of the click within the viewport so we can open the popover\n  // in the correct location\n  const innerWidth = window.innerWidth; // px\n  const innerHeight = window.innerHeight; // px\n\n  const popoverHeight = 340;\n  const popoverWidth = 400;\n\n  let left;\n  if (node.x > innerWidth - popoverWidth) {\n    left = node.x - popoverWidth;\n  } else {\n    left = node.x;\n  }\n\n  if (left < 10) {\n    left = 10;\n  }\n\n  left = left + \"px\";\n\n  let top;\n  if (node.y > innerHeight - popoverHeight) {\n    top = node.y - popoverHeight + 50;\n\n    if (top < 50) { top = 50; }\n  } else {\n    top = node.y;\n  }\n\n  if (innerHeight < 350) {\n    top = 20;\n  }\n  else if (top > innerHeight - 50 - popoverHeight) {\n    top = innerHeight - 50 - popoverHeight;\n  }\n\n  top = top + \"px\";\n\n  return (\n    <div\n      className={styles.popOver}\n      style={{\n        top: top, left: left,\n        width: popoverWidth + \"px\"\n        }}\n    >\n      <VBox>\n        <HBox>\n          <BigBox><div className={styles.header}>{name}</div></BigBox>\n          <div className={styles.closeButton}>\n            <button onClick={props.clearPopup}\n                    style={{ background: \"none\", border: \"none\" }}>\n              x\n            </button>\n          </div>\n        </HBox>\n        <BigBox>\n          <div className={styles.bio}>{bio}</div>\n        </BigBox>\n        <HBox>\n          {readMoreButton}\n          <div>&nbsp;</div>\n          {centerButton}\n        </HBox>\n      </VBox>\n    </div>\n  );\n}\n\nPopover.propTypes = {\n  social: PropTypes.object.isRequired,\n  node: PropTypes.object.isRequired,\n  clearPopup: PropTypes.func.isRequired,\n  emitSetCenter: PropTypes.func.isRequired,\n  emitReadMore: PropTypes.func.isRequired,\n};\n\nexport default Popover;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\nimport BigBox from \"./BigBox\";\n\nimport Keyboard from \"react-simple-keyboard\";\n\nimport styles from \"./SearchBar.module.css\";\n\nimport 'react-simple-keyboard/build/css/index.css';\n\nclass SearchBar extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      layoutName: \"default\",\n      showKeyboard: false,\n    };\n  }\n\n  onChangeHandler(event) {\n    let text = event.target.value;\n\n    if (this.props.emitUpdate) {\n      this.props.emitUpdate(text);\n    }\n\n    this.keyboard.setInput(text);\n  }\n\n  onSubmitHandler(event) {\n    event.preventDefault();\n  }\n\n  onChange = (input) => {\n    let last_text = this.props.searchText;\n\n    if (input.endsWith(\"close\")) {\n      if (!last_text.endsWith(\"close\")){\n        this.keyboard.setInput(last_text);\n        return;\n      }\n    } else if (input.endsWith(\"clear\")){\n      if (!last_text.endsWith(\"clear\")){\n        this.keyboard.setInput(\"\");\n        return;\n      }\n    } else if (input.endsWith(\"enter\")){\n      if (!last_text.endsWith(\"enter\")){\n        this.keyboard.setInput(last_text);\n        return;\n      }\n    }\n\n    if (this.props.emitUpdate) {\n      this.props.emitUpdate(input);\n    }\n  }\n\n  onKeyPress = (button) => {\n    if (button === \"{shift}\") this.handleShift();\n\n    if (button === \"{lock}\") this.handleCaps();\n\n    if (button === \"clear\") this.handleClear();\n\n    if (button === \"close\") this.handleClose();\n\n    if (button === \"enter\") this.handleEnter();\n  }\n\n  handleClose = () => {\n    this.setState({showKeyboard: false});\n  }\n\n  handleEnter = () => {\n    this.setState({showKeyboard: false});\n  }\n\n  handleClear = () => {\n    this.keyboard.setInput(\"\");\n\n    if (this.props.emitUpdate){\n      this.props.emitUpdate(\"\");\n    }\n  }\n\n  handleShift = () => {\n    let layoutName = this.state.layoutName;\n\n    this.setState({\n      layoutName: layoutName === \"shift\" ? \"default\" : \"shift\"\n    });\n  };\n\n  handleCaps = () => {\n    let layoutName = this.state.layoutName;\n\n    this.setState({\n      layoutName: layoutName === \"caps\" ? \"default\" : \"caps\"\n    });\n  };\n\n  render() {\n    let search_text = \"\";\n\n    if (this.props.searchText) {\n      search_text = this.props.searchText;\n    }\n\n    let clear_button = null;\n    let link_button = null;\n\n    if (search_text) {\n      clear_button = (\n        <div className={styles.clearButton}\n             onClick={()=>{this.keyboard.setInput(\"\"); this.props.emitUpdate(\"\")}}\n        >\n          &nbsp;X&nbsp;\n        </div>);\n\n      if (this.props.searchHighlightAvailable) {\n        let highlight = this.props.searchHighlightToggled;\n\n        let link_style = styles.linkButton;\n\n        if (highlight) {\n          link_style = styles.linkButtonHighlighted;\n        }\n\n        link_button = (\n          <div className={link_style}\n            onClick={() => { this.props.emitSearchHighlightToggled(!highlight) }}\n          >\n            &nbsp;&nbsp;\n          </div>);\n      }\n    }\n\n    let keyboard = null;\n\n    if (this.state.showKeyboard){\n      const layout = {\n        'default': [\n          'clear 1 2 3 4 5 6 7 8 9 0 {bksp}',\n          'close q w e r t y u i o p close',\n          '{lock} a s d f g h j k l enter',\n          '{shift} z x c v b n m {shift}',\n          '{space}'\n        ],\n        'shift': [\n          'clear 1 2 3 4 5 6 7 8 9 0 {bksp}',\n          'close Q W E R T Y U I O P close',\n          '{lock} A S D F G H J K L enter',\n          '{shift} Z X C V B N M {shift}',\n          '{space}'\n        ],\n        'caps': [\n          'clear 1 2 3 4 5 6 7 8 9 0 {bksp}',\n          'close Q W E R T Y U I O P close',\n          '{lock} A S D F G H J K L enter',\n          '{shift} Z X C V B N M {shift}',\n          '{space}'\n        ]\n      };\n\n      keyboard = (\n        <div className={styles.keyboardHolder}>\n          <Keyboard\n            input={search_text}\n            keyboardRef={r => (this.keyboard = r)}\n            layoutName={this.state.layoutName}\n            className={styles.keyboard}\n            onChange={this.onChange}\n            onKeyPress={this.onKeyPress}\n            layout={layout}/>\n        </div>\n      );\n    }\n\n    return (\n      <form className={styles.form}\n        onSubmit={(e) => this.onSubmitHandler(e)} >\n        <HBox>\n          <BigBox>\n            <input key=\"input\" className={styles.input} type=\"search\"\n              onClick={()=>{\n                this.props.emitUpdate(\"\");\n                this.setState({showKeyboard: true});\n              }}\n              onChange={(e) => this.onChangeHandler(e)}\n              value={search_text}\n              placeholder=\"Search...\" />\n          </BigBox>\n          {link_button}\n          {clear_button}\n        </HBox>\n        {keyboard}\n      </form>\n    );\n  }\n}\n\nSearchBar.propTypes = {\n  searchHighlightToggled: PropTypes.bool.isRequired,\n  emitUpdate: PropTypes.func.isRequired,\n  emitSearchHighlightToggled: PropTypes.func.isRequired,\n  searchText: PropTypes.string,\n  searchHighlightAvailable: PropTypes.bool,\n};\n\n\n\nexport default SearchBar;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport ReactMarkdown from 'react-markdown'\n\nimport styles from \"./ShipOverlay.module.css\";\n\nfunction ShipOverlay(props) {\n  let social = props.social;\n\n  const ship = social.get(props.ship);\n\n  let markdown = social.getProjectText(ship);\n\n  if (!markdown) {\n    markdown = \"Not available\";\n  }\n\n  let filename = social.getImage(ship);\n\n  if (!filename) {\n    filename = \"images/Great_Western_maiden_voyage.jpg\";\n  }\n\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.closeButton}>\n        <button onClick={props.close} style={{ background: \"none\", border: \"none\", fontSize: \"2vh\" }}>\n          x\n        </button>\n      </div>\n      <div className={styles.content}>\n        <img className={styles.image} data-testid=\"bioImage\"\n               src={require(`../${filename}`)} alt=\"A ship\" />\n        <div className={styles.markdown}><ReactMarkdown>{markdown}</ReactMarkdown></div>\n      </div>\n    </div>\n  );\n}\n\nShipOverlay.propTypes = {\n  social: PropTypes.object.isRequired,\n  close: PropTypes.func.isRequired,\n  ship: PropTypes.string.isRequired,\n};\n\nexport default ShipOverlay;\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport HBox from \"./HBox\";\n\nimport styles from \"./ShipSelector.module.css\";\nimport { startsWith } from \"lodash\";\n\nfunction ShipButton(props) {\n  let name = props.ship.getName();\n\n  name = name.replace(\"SS \", \"\");\n\n  let style = styles.ship_button;\n  let func = props.emitSetShip;\n\n  if (props.selected) {\n    style = styles.ship_button_selected;\n    func = props.emitShowShip;\n  }\n\n  return (\n    <button\n      className={style}\n      href=\"#\"\n      onClick={()=>{func(props.ship)}}\n    >\n      {name}\n    </button>);\n}\n\nclass ShipSelector extends React.Component {\n  constructor(props) {\n    super(props);\n\n    const projects = this.props.projects;\n\n    /// There are three ships, get their IDs and put in chronological order\n    const ssGW = projects.getByName(\"SS Great Western\");\n    const ssGB = projects.getByName(\"SS Great Britain\");\n    const ssGE = projects.getByName(\"SS Great Eastern\");\n\n    this.state = {\n      ships: [ssGW, ssGB, ssGE ],\n      current: ssGW,\n    }\n\n    // We want the graph to start with the GW selected\n    this.props.emitSetShip(ssGW);\n  }\n\n  slotSetShip(ship) {\n    this.setState({ current: ship });\n    this.props.emitSetShip(ship);\n  }\n\n  render() {\n\n    let buttons = [];\n\n    this.state.ships.forEach((ship) => {\n      buttons.push(\n        <ShipButton\n          key={ship}\n          ship={ship}\n          emitSetShip={(s) => { this.slotSetShip(s) }}\n          emitShowShip={this.props.emitShowShip}\n          selected={ship === this.state.current}\n        />);\n    });\n\n\n    return (\n      <div className={styles.container}>\n        <div className={styles.content}>\n          <HBox>\n            {buttons}\n          </HBox>\n        </div>\n      </div>\n    );\n  }\n}\n\nShipButton.propTypes = {\n  ship: PropTypes.object.isRequired,\n  selected: PropTypes.bool.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nShipSelector.propTypes = {\n  projects: PropTypes.object.isRequired,\n  emitSetShip: PropTypes.func.isRequired,\n  emitShowShip: PropTypes.func.isRequired,\n};\n\nexport default ShipSelector;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { CSSTransition } from \"react-transition-group\";\n\nimport styles from \"./SlidingPanel.module.css\";\nimport SlideFromLeft from \"./transitions/SlideFromLeft.module.css\";\nimport SlideFromRight from \"./transitions/SlideFromRight.module.css\";\nimport SlideFromBottom from \"./transitions/SlideFromBottom.module.css\";\nimport SlideFromTop from \"./transitions/SlideFromTop.module.css\";\n\nclass SlidingPanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isOpen: false,\n      position: \"right\",\n      defaultSize: \"40%\",\n      minSize: \"300px\",\n      maxSize: null,\n    };\n  }\n\n  render() {\n    let container = styles.rightContainer;\n    let transition = SlideFromRight;\n\n    let width = this.props.width;\n    let height = this.props.height;\n\n    if (height && !width) {\n      width = \"100%\";\n    }\n\n    if (width && !height) {\n      height = \"100%\";\n    }\n\n    let horiz_size = { width: width };\n    let vert_size = { height: height };\n\n    let style = { width: width, height: height, minSize: this.state.minSize };\n\n    if (this.props.maxSize) {\n      horiz_size.maxWidth = this.props.maxSize;\n      vert_size.maxHeight = this.props.maxSize;\n    }\n\n    // let style = horiz_size;\n    // Get the passed in position\n    let position = this.props.position;\n    if (!position) {\n      position = this.state.position;\n    }\n\n    if (position === \"right\") {\n      container = styles.rightContainer;\n      transition = SlideFromRight;\n    } else if (position === \"rightBottom\") {\n      container = styles.rightContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"bottom\") {\n      container = styles.bottomContainer;\n      transition = SlideFromBottom;\n    } else if (position === \"top\") {\n      container = styles.topContainer;\n      transition = SlideFromTop;\n    } else if (position === \"left\") {\n      container = styles.leftContainer;\n      transition = SlideFromLeft;\n    }\n\n    container = `${container} ${styles.container}`;\n\n    return (\n      <CSSTransition in={this.props.isOpen} timeout={200} classNames={transition} unmountOnExit>\n        <div className={container} style={style}>\n          {this.props.children}\n        </div>\n      </CSSTransition>\n    );\n  }\n}\n\nSlidingPanel.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.array, PropTypes.object]).isRequired,\n  isOpen: PropTypes.bool,\n  maxSize: PropTypes.string,\n  minSize: PropTypes.string,\n  position: PropTypes.string,\n  width: PropTypes.string,\n  height: PropTypes.string,\n};\n\nexport default SlidingPanel;\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./TextButton.module.css\";\n\n\nclass TextButton extends React.Component {\n\n  render() {\n\n    let onClick = null;\n\n    if (this.props.onClick) {\n      onClick = this.props.onClick;\n    } else {\n      onClick = () => null;\n    }\n\n    return (\n      <button className={styles.button} onClick={onClick}>\n        {this.props.children}\n      </button>\n    );\n  }\n}\n\nTextButton.propTypes = {\n  children: PropTypes.any,\n  onClick: PropTypes.func,\n};\n\nexport default TextButton;\n","\nimport React from \"react\";\n\nclass Timeout extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      now_time: new Date(),\n      timeout: props.timeout * 1000\n    };\n  }\n\n  componentDidMount() {\n    this.intervalID = setInterval(\n      () => this.setState({ now_time: new Date() }),\n      1000\n    );\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.intervalID);\n  }\n\n  render(){\n    const now = this.state.now_time;\n    const last_time = this.props.last_interaction_time;\n\n    if (now - last_time > this.state.timeout){\n      console.log(\"Ran out of time!\");\n      this.props.emitReload();\n    }\n\n    return <div></div>;\n  }\n};\n\nexport default Timeout;\n","\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./ToggleButton.module.css\";\n\n\nclass ToggleButton extends React.Component {\n\n  render() {\n\n    let emitToggled = null;\n\n    if (this.props.emitToggled) {\n      emitToggled = this.props.emitToggled;\n    } else {\n      emitToggled = () => null;\n    }\n\n    let toggled = this.props.toggled;\n\n    if (toggled) {\n      return (\n        <div className={styles.toggled}\n          onClick={() => { emitToggled(false) }} >\n          {this.props.children}\n        </div>);\n    }\n    else {\n      return (\n        <div className={styles.untoggled}\n          onClick={() => { emitToggled(true) }} >\n          {this.props.children}\n        </div>);\n    }\n  }\n}\n\nToggleButton.propTypes = {\n  children: PropTypes.any.isRequired,\n  emitToggled: PropTypes.func.isRequired,\n  toggled: PropTypes.bool.isRequired,\n};\n\nexport default ToggleButton;\n","\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport BigBox from \"./BigBox\";\n\nimport styles from \"./VBox.module.css\";\n\n\nfunction _wrap(child, i) {\n    if (!child) {\n        return null;\n    }\n    else if (child.type === BigBox) {\n        return child;\n    }\n    else {\n        return (\n            <div key={i} className={styles.child}>\n                {child}\n            </div>);\n    }\n}\n\n\nclass VBox extends React.Component {\n    render(){\n        let parts = [];\n\n        for (let i = 0; i < this.props.children.length; ++i) {\n            if (this.props.children[i] !== null) {\n                parts.push(_wrap(this.props.children[i], i));\n            }\n        }\n\n        return (\n            <div className={styles.vbox}>\n                {parts}\n            </div>);\n    }\n}\n\n\nVBox.propTypes = {\n    children: PropTypes.any,\n}\n\nexport default VBox;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nimport styles from \"./WarningOverlay.module.css\";\n\nfunction WarningOverlay(props) {\n  return (\n    <div className={styles.container} onClick={props.close}>\n      <div className={styles.content}>\n        {props.children}\n      </div>\n    </div>\n  );\n}\n\nWarningOverlay.propTypes = {\n  close: PropTypes.func.isRequired,\n  children: PropTypes.any.isRequired,\n};\n\nexport default WarningOverlay;\n","\nimport React from \"react\";\n\nimport Timeout from \"./Timeout\";\n\nimport styles from \"./WelcomePage.module.css\";\n\nfunction WelcomePage(props){\n\n  const { useState } = React;\n  const [showSecond, setShowSecond] = useState(false);\n\n  if (showSecond){\n    let filename = \"images/welcome/welcome2.png\";\n\n    return (\n      <div className={styles.ui_main}\n           onClick={props.emitCloseWelcome}>\n        <img className={styles.image} data-testid=\"bioImage\"\n             src={require(`../${filename}`)} alt=\"Welcome 2 page\" />\n        <Timeout last_interaction_time={new Date()}\n                 timeout={props.timeout}\n                 emitReload={props.emitReload}/>\n      </div>\n    );\n  } else {\n    let filename = \"images/welcome/welcome1.png\";\n\n    return (\n      <div className={styles.ui_main}\n           onClick={()=>{setShowSecond(true)}}>\n      <img className={styles.image} data-testid=\"bioImage\"\n           src={require(`../${filename}`)} alt=\"Welcome 1 page\" />\n      </div>\n    );\n  }\n}\n\nexport default WelcomePage;\n","\nimport * as d3 from \"d3\";\n\nimport React from \"react\";\n\nimport lodash from \"lodash\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\n\nimport force_spiral from \"./force_spiral.js\";\n\nimport styles from \"../ForceGraph.module.css\";\n\nfunction _null_function() {}\n\nfunction constrain(x, w, r = 20) {\n  if (isNaN(x)) {\n    return 0.5 * w;\n  }\n  else {\n    if (x < r) { return r; }\n    else if (x > w - r) { return w - r }\n    else { return x; }\n  }\n}\n\nfunction getTextSize(d) {\n  let canvas = getTextSize._canvas || (getTextSize._canvas = document.createElement(\"canvas\"));\n  let context = canvas.getContext(\"2d\");\n\n  let height = 12;\n\n  if (d.selected) {\n    context.font = \"12pt Domine\";\n  } else {\n    context.font = \"8pt Domine\";\n    height = 8;\n  }\n\n  let text = d.label;\n\n  if (d.use_initials) {\n    text = d.initials;\n  }\n\n  let metrics = context.measureText(text);\n\n  return [metrics.width, height];\n}\n\n/* eslint-disable react/no-direct-mutation-state */\nclass ForceGraphD3 extends React.Component {\n  constructor(parent, props) {\n    super(props);\n    this.updateLink = this.updateLink.bind(this);\n    this.updateNodeText = this.updateNodeText.bind(this);\n    this.updateNode = this.updateNode.bind(this);\n    this.draw = this.draw.bind(this);\n    this.drawFromScratch = this.drawFromScratch.bind(this);\n    this.update = this.update.bind(this);\n    this.updateGraph = this.updateGraph.bind(this);\n\n    this.drag = this.drag.bind(this);\n    this.parent = parent;\n\n    // Generate a UID for this graph so that we don't clash\n    // with any other graphs on the same page\n    let uid = uuidv4();\n\n    this.state = {\n      width: null,\n      height: null,\n      social: null,\n      signalClicked: _null_function,\n      indirectConnectionsVisible: false,\n      hideUnconnectedNodes: false,\n      uid: uid.slice(uid.length - 8),\n    };\n\n    this._size_changed = true;\n    this._graph_changed = true;\n    this._is_running = false;\n    this._is_drawn = false;\n\n    this.update(props);\n  }\n\n  getNodeBio(id) {\n    return this.state.social.getBiographies().getByID(id);\n  }\n\n  getNodeConnections(id) {\n    return this.state.social.getConnections().find(id);\n  }\n\n  gotConnections(id) {\n    return this.state.social.getConnections().gotConnections(id);\n  }\n\n  updateGraph(social) {\n    let w = this.state.width;\n    let h = this.state.height;\n\n    this.state.social = social;\n\n    if (!w || !h) {\n      return;\n    }\n\n    let new_graph = null;\n\n    if (social) {\n      new_graph = social.getGraph();\n    }\n\n    // The social object will cache the 'getGraph' result, meaning\n    // that any change in this object signals that the graph needs\n    // to be redrawn\n    if (new_graph !== this.state.graph) {\n      //save the cached graph\n      this.state.graph = new_graph;\n\n      // This view needs to clone its own copy of the graph, as\n      // D3 will update the graph object. We need to clone in case\n      // two ForceGraph.d3 views are viewing the same Social graph\n      new_graph = lodash.cloneDeep(this.state.graph);\n\n      // need to update IDs so that the edges refer to the index\n      // of the node in the nodes array - this could be optimised!\n      for (let l in new_graph.edges) {\n        let edge = new_graph.edges[l];\n\n        let found_source = false;\n        let found_target = false;\n\n        for (let n in new_graph.nodes) {\n          let node = new_graph.nodes[n];\n          if (edge.source === node.id) {\n            edge.source = node;\n            edge.source_id = node.id;\n            found_source = true;\n          } else if (edge.target === node.id) {\n            edge.target = node;\n            edge.target_id = node.id;\n            found_target = true;\n          }\n\n          if (found_source && found_target) { break; }\n        }\n      }\n\n      // does this node already have coordinates? If not then they\n      // will need to be random\n      let old_graph = this._graph;\n\n      if (!old_graph) {\n        old_graph = { nodes: [] };\n      }\n\n      for (let n in new_graph.nodes) {\n        let new_node = new_graph.nodes[n];\n        let found = false;\n\n        for (let m in old_graph.nodes) {\n          let old_node = old_graph.nodes[m];\n          if (old_node.id === new_node.id) {\n            new_node.x = old_node.x;\n            new_node.y = old_node.y;\n            new_node.vx = old_node.vx;\n            new_node.vy = old_node.vy;\n            found = true;\n            break;\n          }\n        }\n\n        if (!found) {\n          new_node.x = w * Math.random();\n          new_node.y = h * Math.random();\n          new_node.vx = 0.0;\n          new_node.vy = 0.0;\n        }\n      }\n\n      this._graph = new_graph;\n      this._graph_changed = true;\n    }\n  }\n\n  update(props) {\n    let size_changed = false;\n\n    if (props.indirectConnectionsVisible !== this.state.indirectConnectionsVisible) {\n      this.state.indirectConnectionsVisible = props.indirectConnectionsVisible;\n      this._graph_changed = true;\n    }\n\n    let hasWidth = Object.prototype.hasOwnProperty.call(props, \"width\");\n\n    if (hasWidth) {\n      if (this.state.width !== props.width) {\n        this.state.width = props.width;\n        // this.setState({ width: props.width });\n        size_changed = true;\n      }\n    }\n\n    let hasHeight = Object.prototype.hasOwnProperty.call(props, \"height\");\n\n    if (hasHeight) {\n      if (this.state.height !== props.height) {\n        this.state.height = props.height;\n        // this.setState({ height: props.height });\n        size_changed = true;\n      }\n    }\n\n    if (size_changed) {\n      this._size_changed = true;\n    }\n\n    let hasSignalClicked = Object.prototype.hasOwnProperty.call(props, \"signalClicked\");\n\n    if (hasSignalClicked) {\n      if (this.state.signalClicked) {\n        this.state.signalClicked = props.signalClicked;\n      } else {\n        this.state.signalClicked = _null_function;\n      }\n    }\n\n    let hasSocial = Object.prototype.hasOwnProperty.call(props, \"social\");\n\n    if (hasSocial) {\n      this.updateGraph(props.social);\n    }\n  }\n\n  className() {\n    return `ForceGraphD3-${this.state.uid}`;\n  }\n\n  drag() {\n    let simulation = this._simulation;\n\n    return d3\n      .drag()\n      .on(\"start\", (d) => {\n        d.fx = d.x;\n        d.fy = d.y;\n      })\n      .on(\"drag\", (event, d) => {\n        if (!this._is_running) simulation.restart();\n\n        let w = this.state.width;\n        let h = this.state.height;\n\n        d.fx = constrain(event.x, w, d.r);\n        d.fy = constrain(event.y, h, d.r);\n      })\n      .on(\"end\", (d) => {\n        if (!d.fixed) {\n          d.fx = null;\n          d.fy = null;\n        }\n      });\n  }\n\n  updateNode(data) {\n    let node = this._mainGroup.select(\".node-group\").selectAll(\".node\");\n\n    node = node\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"circle\")\n      )\n      .attr(\"cx\", (d) => {\n        return d.x;\n      })\n      .attr(\"cy\", (d) => {\n        return d.y;\n      })\n      // Here size is the weight given to that entity\n      .attr(\"r\", (d) => {\n        d.radius = 2.0 * Math.min(15, 5 + (0.5 * (d.size * d.size)));\n\n        if (d.size < 1.5) {\n          //d.radius = 3;\n        }\n        else if (d.size < 2.0) {\n          //d.radius = 6 + d.size;\n        } else {\n          //d.radius = 12 + 2 * d.size;\n        }\n        return d.radius;\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node ${styles.node_selected} selected`;\n        }\n        else if (d.type === \"business\") {\n          if (d.highlighted) {\n            return `node ${styles.node_business_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_business}`;\n          }\n        }\n        else if (d.is_nc_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_nc_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_nc_engineer}`;\n          }\n        }\n        else if (d.is_engineer) {\n          if (d.highlighted) {\n            return `node ${styles.node_engineer_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node_engineer}`;\n          }\n        }\n        else {\n          if (d.highlighted) {\n            return `node ${styles.node_highlighted} highlighted`;\n          } else {\n            return `node ${styles.node}`;\n          }\n        }\n      })\n      .attr(\"id\", (d) => { return d.id; })\n      .on(\"mousedown\", (event) => event.stopPropagation())\n      .on(\"click\", (event, d) => {\n        event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      });\n    //.call(this.drag());\n\n    return node;\n  }\n\n  updateNodeText(data) {\n    let text = this._mainGroup.select(\".node_text-group\").selectAll(\".node_text\");\n\n    // Big weights make the size of circles too large\n    const sizeScale = 0.5;\n\n    let use_initials = true;\n\n    //console.log(`${this.state.width} : ${data.length}`);\n\n    if (data.length < 10) {\n      use_initials = false;\n    }\n    else if (data.length < 25 && this.state.width > 500) {\n      use_initials = false;\n    }\n    else if (data.length < 40 && this.state.width > 768) {\n      use_initials = false;\n    }\n    else if (data.length < 45 && this.state.width > 1000) {\n      use_initials = false;\n    }\n    else if (data.length < 50 && this.state.width > 1200) {\n      use_initials = false;\n    }\n\n    text = text\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"text\"),\n      )\n      .text((d) => {\n        d.use_initials = false;\n\n        if (d.highlighted || d.selected) {\n          return d.label;\n        }\n        else {\n          if (use_initials) {\n            d.use_initials = true;\n            return d.initials;\n          }\n          else {\n            return d.label;\n          }\n        }\n      })\n      .attr(\"class\", (d) => {\n        if (d.selected) {\n          return `node_text ${styles.node_text_select} selected`;\n        }\n        else if (d.highlighted) {\n          return `node_text ${styles.node_text_highlight} highlighted`;\n        }\n        else {\n          return `node_text ${styles.node_text}`;\n        }\n      })\n      .attr(\"x\", (d) => {\n        if (!d.textSize) {\n          d.textSize = getTextSize(d);\n        }\n\n        let width = d.textSize[0];\n        let delta = 0.5 * width;\n\n        if (d.x + delta > window.innerWidth) {\n          return window.innerWidth - width - 20;\n        }\n        else if (d.x - delta < 5) {\n          return 5;\n        }\n        else {\n          return d.x - d.radius - delta;\n        }\n      })\n      .attr(\"y\", (d) => {\n        if (!d.textSize) {\n          d.textSize = getTextSize(d);\n        }\n\n        let height = d.textSize[1];\n\n        return d.y + (0.55 * (height + d.radius));\n      })\n      .attr(\"dx\", (d) => {\n        return d.radius + \"px\";\n      })\n      .attr(\"dy\", (d) => {\n        return -1 * (3 + sizeScale * d.radius) + \"px\";\n      })\n      .attr(\"textSize\", (d) => {\n        return getTextSize(d);\n      })\n      .on(\"mousedown\", (event) => event.stopPropagation())\n      .on(\"click\", (event, d) => {\n        event.stopPropagation()\n\n        if (d.selected) {\n          this.emitPopup(d);\n        }\n        else {\n          this.clearPopup();\n          this.state.signalClicked(d.id);\n        }\n      })\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"id\", (d) => { return d.id; });\n    //.call(this.drag());\n\n    return text;\n  }\n\n  updateLink(data) {\n    let link = this._mainGroup.select(\".link-group\").selectAll(\".link\");\n\n    let any_highlighted = false;\n\n    data.forEach((item) => {\n      if (item.highlighted) {\n        any_highlighted = true;\n      }\n    });\n\n    link = link\n      .data(data, (d) => d.id)\n      .join(\n        (enter) => enter.append(\"path\"),\n      )\n      .attr(\"class\", (d) => {\n        if (d.highlighted) {\n          return `link ${styles.link_highlight} highlighted`;\n        }\n        else {\n          if (any_highlighted) {\n            return `link ${styles.linkInvisible}`;\n          }\n          else {\n            return `link ${styles.link}`;\n          }\n        }\n      })\n      .attr(\"d\", (d) => {\n        if (d.target.x === undefined || d.source.x === undefined) {\n          return null;\n        }\n\n        // The smaller the curve factor the greater the curve\n        const curveFactor = 2;\n        const dx = d.target.x - d.source.x;\n        const dy = d.target.y - d.source.x;\n        const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n        return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n      })\n      .attr(\"id\", (d) => {\n        return d.id;\n      })\n      .attr(\"source_id\", (d) => {\n        return d.source_id;\n      })\n      .attr(\"target_id\", (d) => {\n        return d.target_id;\n      });\n\n    return link;\n  }\n\n  spiralSimulation() {\n    if (this._simulation) {\n      this._simulation.stop();\n      this._simulation = null;\n      this._is_running = false;\n    }\n\n    let w = this.state.width;\n    let h = this.state.height;\n\n    let graph = this._graph;\n\n    let last_update = new Date();\n\n    let simulation = d3\n      .forceSimulation(graph.nodes)\n      .alpha(0.1)\n      .alphaTarget(0)\n      .alphaDecay(0.0075)\n      .force(\"spiral\",\n        force_spiral(w, h)\n          .strength(0.3)\n          .index((d) => {\n            return d.sort_index;\n          })\n      )\n      /*.force(\n        \"collide\",\n        d3\n        .forceCollide()\n        .strength(5.0)\n        .radius((d) => d.radius)\n        .iterations(20)\n      )*/\n      // This function with help from https://stackoverflow.com/a/13456081\n      .on(\"tick\", () => {\n\n        let now = new Date();\n\n        let delta = now - last_update;\n\n        if (delta < 50){\n          return;\n        }\n\n        last_update = now;\n\n        this._link.attr(\"d\", (d) => {\n          if (d.target.x === undefined || d.source.x === undefined) {\n            return null;\n          }\n\n          // The smaller the curve factor the greater the curve\n          const curveFactor = 2;\n          const dx = d.target.x - d.source.x;\n          const dy = d.target.y - d.source.x;\n          const dr = curveFactor * Math.sqrt(dx * dx + dy * dy);\n\n          return `M${d.source.x},${d.source.y}A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;\n        });\n\n        this._node\n          .attr(\"cx\", (d) => {\n            return (d.x = constrain(d.x, w, d.r));\n          })\n          .attr(\"cy\", (d) => {\n            return (d.y = constrain(d.y, h, d.r));\n          });\n\n        this._label\n          .attr(\"x\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let width = d.textSize[0];\n            let delta = 0.5 * width;\n\n            if (d.x + delta > window.innerWidth) {\n              return window.innerWidth - width - 20;\n            }\n            else if (d.x - delta < 5) {\n              return 5;\n            }\n            else {\n              return d.x - d.radius - delta;\n            }\n          })\n          .attr(\"y\", (d) => {\n            if (!d.textSize) {\n              d.textSize = getTextSize(d);\n            }\n\n            let height = d.textSize[1];\n\n            return d.y + (0.55 * (height + d.radius));\n          });\n\n      })\n      .on(\"end\", () => {\n      });\n\n    this._is_running = true;\n\n    // Save the simulation so that we can update it later...\n    this._simulation = simulation;\n  }\n\n  restartSimulation() {\n    if (this._simulation) {\n      this._simulation.restart();\n      this._is_running = true;\n    }\n  }\n\n  stopSimulation() {\n    this._simulation.stop();\n    this._is_running = false;\n  }\n\n  isRunning() {\n    return this._is_running;\n  }\n\n  updateLinks(indirectConnectionsVisible) {\n    if (this._graph.edges) {\n      this.setState({\n        indirectConnectionsVisible: indirectConnectionsVisible,\n      });\n      this.updateLink(this._graph.edges);\n    }\n  }\n\n  drawFromScratch() {\n    let graph = this._graph;\n\n    if (!graph) {\n      if (this.state.social) {\n        this.updateGraph(this.state.social);\n      }\n\n      graph = this._graph;\n      if (!graph) {\n        console.log(\"Nothing to draw...\");\n        return;\n      }\n    }\n\n    d3.select(`.${this.className()} > *`).remove();\n\n    let container = d3.select(`.${this.className()}`);\n\n    if (!container) {\n      console.log(`Cannot find container element class ${this.className()}`);\n      return;\n    }\n\n    const width = this.state.width;\n    const height = this.state.height;\n\n    if (!width || !height) {\n      console.log(`Invalid width or height? ${width} x ${height}`);\n      return;\n    }\n\n    let svg = container\n      .append(\"svg\")\n      .attr(\"height\", height)\n      .attr(\"width\", width)\n      .attr(\"id\", \"svg-viz\")\n      .attr(\"align\", \"center\")\n      .attr(\"class\", styles.svg_view)\n      .on(\"click\", () => {\n        this.clearPopup();\n        this.state.signalClicked(null);\n      });\n\n    let mainGroup = svg;\n    this._mainGroup = mainGroup;\n\n    this.spiralSimulation();\n\n    mainGroup.append(\"g\").attr(\"class\", \"link-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node-group\");\n    mainGroup.append(\"g\").attr(\"class\", \"node_text-group\");\n\n    this._link = this.updateLink(graph.edges);\n    this._node = this.updateNode(graph.nodes);\n    this._label = this.updateNodeText(graph.nodes);\n\n    this._is_drawn = true;\n  }\n\n  draw() {\n    if (!this._is_drawn) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n      return;\n    }\n\n    if (this._size_changed) {\n      let container = d3.select(`.${this.className()}`);\n      container.selectAll(\"svg\").attr(\"width\", this.state.width).attr(\"height\", this.state.height);\n      this._size_changed = false;\n      this._label = this.updateNodeText(this._graph.nodes);\n    }\n\n    if (this._graph_changed) {\n      this.drawFromScratch();\n      this._size_changed = false;\n      this._graph_changed = false;\n    }\n  }\n}\n\nForceGraphD3.propTypes = {\n}\n\nexport default ForceGraphD3;\n","/** Internal function used to return a function that\n *  returns a constant value\n **/\nfunction _constant(x) {\n  return function () {\n    return x;\n  };\n}\n\n/** Internal function used to return a function that counts up from\n *  0 every time it is called\n */\nfunction _return_index() {\n  let i = 0;\n  return function () {\n    let j = i;\n    i += 1;\n    return j;\n  }\n}\n\n/** Force function that pulls nodes towards a spiral design that\n *  is centered in a canvas of specified width and height. You can\n *  specify the strength of this force, and also the index that\n *  maps a node to a point in the spiral. The center point of the\n *  spiral is index 0, with subsequent points counting up uniformly\n *  from there. The spiral is resized automatically to ensure that\n *  all points are contained on the canvas.\n */\nexport default function force_spiral(width, height) {\n  let nodes = null;\n  let index = _return_index();\n  let strength = _constant(0.1);\n  let strengths = null;\n  let indexes = null;\n  let points_x = null;\n  let points_y = null;\n\n  if (height == null) height = 600;\n  if (width == null) width = 600;\n\n  /** Calculate the force on the nodes and update the velocities.\n   *  This uses the spiral points pre-calculated in 'initialise'.\n   *  Each node looks up its spiral point based on the index\n   *  assigned to each node\n   */\n  function force(alpha) {\n    if (!nodes) return;\n\n    for (let i = 0, n = nodes.length; i < n; ++i) {\n      let node = nodes[i];\n      let index = indexes[i];\n      node.vx += (points_x[index] - node.x) * strengths[i] * alpha;\n      node.vy += (points_y[index] - node.y) * strengths[i] * alpha;\n    }\n  }\n\n  /** Initialise the spiral. This pre-fectches all of the strengths\n   *  for the nodes and places them into an array.\n   *\n   *  This then pre-fetches all of the node indexes, and, using the\n   *  maximum index, works out and pre-calculates the points of a\n   *  spiral with enough points to satisfy all indexes, and that\n   *  ensures that they all fit onto the screen.\n   *\n   *  These points are placed into the points_x and points_y arrays.\n   */\n  function initialize() {\n    if (!nodes) return;\n\n    let n = nodes.length;\n\n    // collect the strengths and indexes\n    strengths = new Array(n);\n    indexes = new Array(n);\n\n    for (let i = 0; i < n; ++i) {\n      strengths[i] = +strength(nodes[i], i, nodes);\n      indexes[i] = Math.floor(index(nodes[i], i, nodes));\n\n      if (indexes[i] < 0) {\n        indexes[i] = 0;\n      } else if (indexes[i] >= 1024 * 1024) {\n        // limit to 1 MB\n        indexes[i] = 1024 * 1024;\n      }\n    }\n\n    // what is the maximum index - will need to know this to generate\n    // all of the points\n    let max_index = 0;\n\n    if (n > 0) {\n      max_index = Math.max(...indexes);\n    }\n\n    // now calculate all of the points\n    points_x = new Array(max_index + 1);\n    points_y = new Array(max_index + 1);\n\n    let angle = 0.0;\n    let radius = 0.0;\n\n    let min_x = 0.0;\n    let max_x = 0.0;\n    let min_y = 0.0;\n    let max_y = 0.0;\n\n    for (let i = 1; i <= max_index; ++i) {\n      radius = Math.sqrt(i);\n      angle += Math.asin(1 / radius);\n      points_x[i] = Math.cos(angle) * radius;\n      points_y[i] = Math.sin(angle) * radius;\n\n      min_x = Math.min(min_x, points_x[i]);\n      max_x = Math.max(max_x, points_x[i]);\n\n      min_y = Math.min(min_y, points_y[i]);\n      max_y = Math.max(max_y, points_y[i]);\n    }\n\n    // we now need to scale such that 'radius' can fit comfortably\n    // on a width * height page\n    let center_x = width / 2;\n    let center_y = height / 2;\n\n    let scale_x = 0.80 * width / (max_x - min_x);\n    let scale_y = 0.80 * height / (max_y - min_y);\n\n    // offset the center slightly as the spiral biases slightly\n    center_x -= 0.4 * scale_x * (max_x + min_x);\n    center_y -= 0.4 * scale_y * (max_y + min_y);\n\n    points_x[0] = center_x;\n    points_y[0] = center_y;\n\n    for (let i = 1; i <= max_index; ++i) {\n      points_x[i] = center_x + (points_x[i] * scale_x);\n      points_y[i] = center_y + (points_y[i] * scale_y);\n    }\n  }\n\n  /** Add the initialise function to the force object that will be returned */\n  force.initialize = function (_) {\n    nodes = _;\n    initialize();\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the strength for each node\n   */\n  force.strength = function (_) {\n    return arguments.length ? ((strength = typeof _ === \"function\" ?\n      _ : _constant(+_)), initialize(), force) : strength;\n  };\n\n  /** Allow the user to supply their own value or function that\n   *  sets the index on the spiral for each node\n   */\n  force.index = function (_) {\n    return arguments.length ? ((index = typeof _ === \"function\" ?\n      _ : _return_index()), initialize(), force) : index;\n  };\n\n  return force;\n}","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Affiliation {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAAffiliationObject = true;\n  }\n\n  static clone(item) {\n    let c = new Affiliation();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Affiliation.makeCanonical(this.state.name);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Affiliation without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Affiliation(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliation.unDry = function (value) {\n  return new Affiliation(value);\n};\n\nDry.registerClass(\"Affiliation\", Affiliation);\n\nexport default Affiliation;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Affiliation from \"./Affiliation\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_affiliation_uid() {\n  let uid = uuidv4();\n  return \"A\" + uid.substring(uid.length - 7);\n}\n\nclass Affiliations {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAAffiliationsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Affiliations();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Affiliation || item._isAAffiliationObject;\n  }\n\n  add(affiliation) {\n    if (!this.canAdd(affiliation)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(affiliation.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(affiliation);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    affiliation = Affiliation.clone(affiliation);\n\n    let id = affiliation.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Affiliation ID ${affiliation}`);\n      }\n\n      affiliation._updateHooks(this._getHook);\n      this.state.registry[id] = affiliation;\n    } else {\n      let uid = _generate_affiliation_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_affiliation_uid();\n      }\n\n      affiliation.state.id = uid;\n    }\n\n    affiliation._updateHooks(this._getHook);\n    this._names[affiliation.getName()] = affiliation.getID();\n    this.state.registry[affiliation.getID()] = affiliation;\n\n    return affiliation;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No affiliation with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Affiliation || name._isAAffiliationObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No affiliation matches '${name}. Available Affiliations are '${keys}'`);\n  }\n\n  get(id) {\n    let affiliation = this.state.registry[id];\n\n    if (!affiliation) {\n      throw new MissingError(`No Affiliation with ID ${id}`);\n    }\n\n    return affiliation;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nAffiliations.unDry = function (value) {\n  let affiliations = new Affiliations();\n  affiliations.state = value;\n  affiliations._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    affiliations._names[v.getName()] = key;\n  });\n\n  return affiliations;\n};\n\nDry.registerClass(\"Affiliations\", Affiliations);\n\nexport default Affiliations;\n","import Dry from \"json-dry\";\n\nimport Affiliations from \"./Affiliations\";\nimport Affiliation from \"./Affiliation\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is an affiliation\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Affiliation({ name: name1, url: url1 });\n\n  let name2 = \"This is another affiliation\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Affiliation({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Affiliations();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nclass Biographies {\n  constructor() {\n    this.state = {\n      bios: {},\n    };\n\n    this._getHook = null;\n    this._isABiographiesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  static clone(item) {\n    let c = new Biographies();\n    c.state = lodash.cloneDeep(item.state);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  get(node) {\n    if (!node) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    return this.state.bios[node];\n  }\n\n  getByID(id) {\n    if (!id) return null;\n\n    return this.state.bios[id];\n  }\n\n  getNode(id) {\n    if (this._getHook) {\n      return this._getHook(id);\n    } else {\n      return id;\n    }\n  }\n\n  search(text) {\n    if (!text) {\n      return null;\n    }\n\n    text = text.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.bios).forEach((key) => {\n      if (this.state.bios[key].toLowerCase().indexOf(text) !== -1) {\n        results.push(this.getNode(key));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  add(node, biography) {\n    if (!node || !biography) {\n      return null;\n    } else if (node.getID) {\n      node = node.getID();\n    }\n\n    let bio = this.state.bios[node];\n\n    if (bio) {\n      console.log(`There is already a bio for ${this.getNode(node)}`);\n      biography = `${bio}\\n${biography}`;\n    }\n\n    this.state.bios[node] = biography;\n  }\n}\n\nBiographies.unDry = function (value) {\n  let bios = new Biographies();\n  bios.state = value;\n  return bios;\n};\n\nDry.registerClass(\"Biographies\", Biographies);\n\nexport default Biographies;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Business {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      projects: {},\n      sources: {},\n      positions: {},\n      scores: {},\n      affiliations: {},\n      notes: [],\n      weight: {},\n      is_highlighted: false,\n      is_selected: false,\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isABusinessObject = true;\n  }\n\n  static clone(item) {\n    let c = new Business();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    return Object.keys(seen).length === Object.keys(group).length;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let weight = _filterProject(this.state.weight, project);\n    let sources = _filterProject(this.state.sources, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n        weight !== this.state.weight || sources !== this.state.sources) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business.state.sources = sources;\n      business.state.weight = weight;\n      business.state.projects = new_projects;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterProject(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let business = new Business();\n      business.state = { ...this.state };\n      business.state.affiliations = affiliations;\n      business.state.positions = positions;\n      business._getHook = this._getHook;\n      return business;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.projects = setState(state.projects, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.positions = setState(state.positions, {});\n      this.state.scores = setState(state.scores, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Business without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // use the first project's weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n    return this.state.weight[project_id];\n  }\n\n  toString() {\n    return `Business(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.name.split(\" \").forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getPositions() {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"square\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      weight: this.getWeight(),\n      type: \"business\",\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusiness.unDry = function (value) {\n  return new Business(value);\n};\n\nDry.registerClass(\"Business\", Business);\n\nexport default Business;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Business from \"./Business\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_business_uid() {\n  let uid = uuidv4();\n  return \"B\" + uid.substring(uid.length - 7);\n}\n\nclass Businesses {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isABusinessesObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Businesses();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Business || item._isABusinessObject;\n  }\n\n  add(business) {\n    if (!this.canAdd(business)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(business.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(business);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    business = Business.clone(business);\n\n    let id = business.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Business ID ${business}`);\n      }\n\n      business._updateHooks(this._getHook);\n      this.state.registry[id] = business;\n    } else {\n      let uid = _generate_business_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_business_uid();\n      }\n\n      business.state.id = uid;\n    }\n\n    business._updateHooks(this._getHook);\n    this._names[business.getName()] = business.getID();\n    this.state.registry[business.getID()] = business;\n\n    return business;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Business with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Business || name._isABusinessObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Business matches '${name}. Available Businesses are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (!business.isNonContributingEngineer()){\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let business = this.state.registry[key];\n        registry[key] = business;\n        names[business.getName()] = key;\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        for (let i = 0; i < funcs.length; ++i) {\n          business = funcs[i](business);\n          if (!business) {\n            break;\n          }\n        }\n\n        if (business) {\n          registry[key] = business;\n          names[business.getName()] = key;\n        }\n      }\n    });\n\n    let businesses = new Businesses();\n    businesses.state.registry = registry;\n    businesses._names = names;\n    businesses._updateHooks(this._getHook);\n\n    return businesses;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n      if (business) {\n        let timeline = business.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let business = this.state.registry[key];\n\n      if (business) {\n        let node = null;\n        if (key === anchor) {\n          node = business.getNode({ is_anchor: true });\n        } else {\n          node = business.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  get(id) {\n    let business = this.state.registry[id];\n\n    if (!business) {\n      throw new MissingError(`No Business with ID ${id}`);\n    }\n\n    return business;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let business = Business.load(element);\n        this.add(business);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nBusinesses.unDry = function (value) {\n  let businesses = new Businesses();\n  businesses.state = value;\n  businesses._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    businesses._names[v.getName()] = key;\n  });\n\n  return businesses;\n};\n\nDry.registerClass(\"Businesses\", Businesses);\n\nexport default Businesses;\n","import Dry from \"json-dry\";\n\nimport Businesses from \"./Businesses\";\nimport Business from \"./Business\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a business\";\n\n  let p1 = new Business({ name: name1 });\n\n  let name2 = \"This is another business\";\n\n  let p2 = new Business({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Businesses();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport get_id from \"./get_id\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _mergeSources(state, other, key) {\n  state = state[key];\n  other = other[key];\n\n  Object.keys(other).forEach((key) => {\n    if (!(key in state)) {\n      state[key] = other[key];\n    } else {\n      for (let item in other[key]) {\n        if (!(item in state[key])) {\n          state[key].push(item);\n        }\n      }\n    }\n  });\n}\n\nclass Connection {\n  constructor(props) {\n    this.state = {\n      id: null,\n      n0: null,\n      n1: null,\n      shared: null,\n      type: null,\n      duration: null,\n      affiliations: null,\n      correspondances: null,\n      projects: null,\n      notes: null,\n      is_highlighted: false,\n    };\n\n    this.setState(props);\n    this._getHook = null;\n    this._isAConnectionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Connection();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getName() {\n    let n0 = this.state.n0;\n    let n1 = this.state.n1;\n\n    if (n0 <= n1) {\n      return `${n0}<=>${n1}`;\n    } else {\n      return `${n1}<=>${n0}`;\n    }\n  }\n\n  getNode0() {\n    if (this._getHook) {\n      return this._getHook(this.state.n0);\n    } else {\n      return this.state.n0;\n    }\n  }\n\n  getNode1() {\n    if (this._getHook) {\n      return this._getHook(this.state.n1);\n    } else {\n      return this.state.n1;\n    }\n  }\n\n  getNode0ID() {\n    return this.state.n0;\n  }\n\n  getNode1ID() {\n    return this.state.n1;\n  }\n\n  areNodesVisible(n) {\n    return n[this.state.n0] && n[this.state.n1];\n  }\n\n  getNode0Name() {\n    let node0 = this.getNode0();\n\n    try {\n      return node0.getName();\n    } catch (error) {\n      return node0;\n    }\n  }\n\n  getNode1Name() {\n    let node1 = this.getNode1();\n\n    try {\n      return node1.getName();\n    } catch (error) {\n      return node1;\n    }\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getAffiliationSources() {\n    //console.log(this.state.affiliations);\n    return this.state.affiliations;\n  }\n\n  getCorrespondanceSources() {\n    //console.log(this.state.correspondances);\n    return this.state.correspondances;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(source).forEach((key) => {\n      if (this.state.affiliations[key] || this.state.correspondances[key]) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    // Filter this connection by project ID\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nProjects = Object.keys(project).length;\n\n    let seen = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n      }\n    });\n\n    if (Object.keys(seen).length !== nProjects) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (!window) {\n      return this;\n    }\n\n    let duration = this.getDuration();\n\n    if (!duration) {\n      return this;\n    }\n\n    let intersect = window.intersect(duration);\n\n    if (!intersect) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.id = setState(state.id);\n      this.state.n0 = setState(state.n0);\n      this.state.n1 = setState(state.n1);\n      this.state.shared = setState(state.shared, []);\n      this.state.type = setState(state.type);\n      this.state.duration = setState(state.duration);\n      this.state.affiliations = setState(state.affiliations, {});\n      // note that correspondences is a typo from the python!\n      this.state.correspondances = setState(state.correspondences, {});\n      this.state.notes = setState(state.notes, []);\n      this.state.weights = setState(state.weights, {});\n      this.state.projects = setState(state.projects, {});\n\n      if (!this.state.n0 || !this.state.n1) {\n        throw new ValueError(`Invalid connection ${this}`);\n      }\n    }\n  }\n\n  merge(other) {\n    if (!this._getHook) {\n      if (other._getHook) {\n        return other.merge(this);\n      }\n    }\n\n    let state = lodash.cloneDeep(this.state);\n\n    Object.keys(other.state.shared).forEach((key) => {\n      if (!(key in state.shared)) {\n        state.shared[key] = other.state.shared[key];\n      }\n    });\n\n    Object.keys(other.state.notes).forEach((key) => {\n      if (!(key in state.notes)) {\n        state.notes[key] = other.state.notes[key];\n      }\n    });\n\n    _mergeSources(state, other.state, \"affiliations\");\n    _mergeSources(state, other.state, \"correspondances\");\n\n    state.duration = state.duration.merge(other.state.duration);\n\n    let c = new Connection();\n    c.state = state;\n    c._getHook = this._getHook;\n\n    return c;\n  }\n\n  toString() {\n    return `Connection(${this.getNode0Name()}<=>${this.getNode1Name()})`;\n  }\n\n  getColorFromType() {\n    switch (this.state.type) {\n      case \"direct\":\n        return \"rgb(180,150,150)\";\n      case \"indirect\":\n        return \"rgb(180,180,180)\";\n      default:\n        return \"orange\";\n    }\n  }\n\n  getType() {\n    return this.state.type;\n  }\n\n  getWeights() {\n    return this.state.weights;\n  }\n\n  getWeight() {\n    let weight = 1.0;\n\n    Object.keys(this.state.weights).forEach((key) => {\n      weight += this.state.weights[key];\n    });\n\n    return weight;\n  }\n\n  getWeightFromType() {\n    let weight = this.getWeight();\n\n    switch (this.state.type) {\n      case \"direct\":\n        return 1.0 * weight;\n      case \"indirect\":\n        return 0.5 * weight;\n      default:\n        console.log(`Unknown type? ${this.state.type}`);\n        return 0.5 * weight;\n    }\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n  toEdge() {\n    let color = this.getColorFromType();\n    // let weight = this.getWeightFromType();\n    let weight = this.getWeight();\n\n    let edge = {\n      id: this.getID(),\n      source: get_id(this.state.n0),\n      target: get_id(this.state.n1),\n      value: weight,\n      type: this.state.type,\n      color: color,\n      highlighted: this.getHighlighted(),\n    };\n\n    return edge;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nConnection.unDry = function (value) {\n  return new Connection(value);\n};\n\nConnection.load = function (data) {\n  return new Connection({ name: data.name });\n};\n\nDry.registerClass(\"Connection\", Connection);\n\nexport default Connection;\n","import Dry from \"json-dry\";\nimport {\n  v4 as uuidv4\n} from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Connection from \"./Connection\";\nimport get_id from \"./get_id\";\n\nimport {\n  KeyError,\n  MissingError\n} from \"./Errors\";\n\nfunction _generate_connection_uid() {\n  let uid = uuidv4();\n  return \"C\" + uid.substring(uid.length - 7);\n}\n\nclass Connections {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._connections = {};\n    this._isAConnectionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Connections();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Connection || item._isAConnectionObject;\n  }\n\n  add(connection) {\n    if (!this.canAdd(connection)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(connection.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(connection);\n      this.state.registry[get_id(existing)] = existing;\n      return existing;\n    }\n\n    connection = Connection.clone(connection);\n\n    let id = get_id(connection);\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Connection ID ${connection}`);\n      }\n    } else {\n      let uid = _generate_connection_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_connection_uid();\n      }\n\n      connection.state.id = uid;\n    }\n\n    connection._updateHooks(this._getHook);\n    let connection_id = get_id(connection);\n    this._names[connection.getName()] = connection_id;\n    this.state.registry[connection_id] = connection;\n\n    let id0 = connection.getNode0ID();\n    let id1 = connection.getNode1ID();\n\n    if (!(id0 in this._connections)) {\n      this._connections[id0] = {};\n    }\n\n    if (!(id1 in this._connections)) {\n      this._connections[id1] = {};\n    }\n\n    this._connections[id0][id1] = 1;\n    this._connections[id1][id0] = 1;\n\n    return connection;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No connection with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Connection || name._isAConnectionObject) {\n      return this.get(get_id(name));\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new TypeError(`No connection matches '${name}. Available Connections are '${keys}'`);\n  }\n\n  gotConnections(id) {\n    return this.nConnections(id) > 0;\n  }\n\n  nConnections(id) {\n    let c = this._connections[id];\n\n    if (!c) {\n      return 0;\n    }\n    else {\n      return Object.keys(c).length;\n    }\n  }\n\n  get(id) {\n    let connection = this.state.registry[id];\n\n    if (!connection) {\n      throw new MissingError(`No Connection with ID ${id}`);\n    }\n\n    return connection;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n    let conns = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let connection = this.state.registry[key];\n\n      if (connection) {\n        for (let i = 0; i < funcs.length; ++i) {\n          connection = funcs[i](connection);\n          if (!connection) {\n            break;\n          }\n        }\n\n        if (connection) {\n          registry[key] = connection;\n          names[connection.getName()] = key;\n\n          let id0 = connection.getNode0ID();\n          let id1 = connection.getNode1ID();\n\n          if (!(id0 in conns)) {\n            conns[id0] = {};\n          }\n\n          if (!(id1 in conns)) {\n            conns[id1] = {};\n          }\n\n          conns[id0][id1] = 1;\n          conns[id1][id0] = 1;\n        }\n      }\n    });\n\n    let connections = new Connections();\n\n    connections.state.registry = registry;\n    connections._names = names;\n    connections._connections = conns;\n    connections._updateHooks(this._getHook);\n\n    return connections;\n  }\n\n  highlightConnections(item, social) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode1ID(), false).setHighlighted(true);\n      } else if (connection.getNode1ID() === item) {\n        connection.setHighlighted(true);\n        social.get(connection.getNode0ID(), false).setHighlighted(true);\n      }\n    }\n  }\n\n  getConnectionsInvolving(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let connections = [];\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        connections.push(connection);\n      } else if (connection.getNode1ID() in item) {\n        connections.push(connection);\n      }\n    }\n\n    return connections;\n  }\n\n  getConnectionsTo(item) {\n    if (item.getID) {\n      let id = item.getID();\n      item = {};\n      item[id] = 1;\n    }\n\n    let nnodes = Object.keys(item).length;\n\n    let seen = {};\n\n    function _add(id) {\n      if (!(id in seen)) {\n        seen[id] = 1;\n      } else {\n        seen[id] += 1;\n      }\n    }\n\n    for (let key in this.state.registry) {\n      let connection = this.state.registry[key];\n\n      if (connection.getNode0ID() in item) {\n        _add(connection.getNode1ID());\n      } else if (connection.getNode1ID() in item) {\n        _add(connection.getNode0ID());\n      }\n    }\n\n    let connections = [];\n\n    if (this._getHook) {\n      Object.keys(seen).forEach((key) => {\n        try {\n          if (seen[key] === nnodes) {\n            connections.push(this._getHook(key));\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      });\n    } else {\n      connections = Object.keys(seen);\n    }\n\n    return connections;\n  }\n\n  areConnected(item0, item1) {\n    item0 = get_id(item0);\n    item1 = get_id(item1);\n\n    if (item0 in this._connections) {\n      return item1 in this._connections[item0];\n    } else {\n      return false;\n    }\n  }\n\n  getEdges(ids = null) {\n    let edges = [];\n\n    if (ids) {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        if (connection.areNodesVisible(ids)) {\n          edges.push(connection.toEdge());\n        }\n      });\n    } else {\n      Object.keys(this.state.registry).forEach((key) => {\n        let connection = this.state.registry[key];\n        edges.push(connection.toEdge());\n      });\n    }\n\n    return edges;\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nConnections.unDry = function (value) {\n  let connections = new Connections();\n  connections.state = value;\n  connections._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    connections._names[v.getName()] = key;\n\n    let id0 = v.getNode0ID();\n    let id1 = v.getNode1ID();\n\n    if (!(id0 in connections._connections)) {\n      connections._connections[id0] = {};\n    }\n\n    if (!(id1 in connections._connections)) {\n      connections._connections[id1] = {};\n    }\n\n    connections._connections[id0][id1] = 1;\n    connections._connections[id1][id0] = 1;\n  });\n\n  return connections;\n};\n\nDry.registerClass(\"Connections\", Connections);\n\nexport default Connections;","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\nimport { ValueError } from \"./Errors\";\n\nfunction _clean(val) {\n  if (!val || val._isADateRangeObject) {\n    return val;\n  } else if (val._isARoughDateObject) {\n    return val.toDateRange();\n  } else if (\n    Object.prototype.hasOwnProperty.call(val, \"start\") ||\n    Object.prototype.hasOwnProperty.call(val, \"end\") ||\n    Object.prototype.hasOwnProperty.call(val, \"both\") ||\n    Object.prototype.hasOwnProperty.call(val, \"value\")\n  ) {\n    return new DateRange(val);\n  } else {\n    return new DateRange({ both: new RoughDate(val) });\n  }\n}\n\nclass DateRange {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n    };\n\n    this.setState(state);\n    this._isADateRangeObject = true;\n  }\n\n  toString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return `DateRange(${this.getStartString()})`;\n      } else {\n        return `DateRange(${this.getStartString()} to ${this.getEndString()})`;\n      }\n    } else {\n      return \"DateRange::unbounded\";\n    }\n  }\n\n  toSimpleString() {\n    if (this.hasBounds()) {\n      if (this.isInstant()) {\n        return this.getStart().toSimpleString();\n      } else {\n        return this.getEarliestStart().merge(this.getLatestEnd()).toSimpleString();\n      }\n    } else if (this.hasStart()) {\n      return `${this.getStart().toSimpleString()}<=>future`;\n    } else if (this.hasEnd()) {\n      return `past<=>${this.getEnd().toSimpleString()}`;\n    } else {\n      return \"past<=>future\";\n    }\n  }\n\n  static clone(item) {\n    let d = new DateRange();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static eq(item, other) {\n    if (item === other) {\n      return true;\n    }\n\n    if (item.hasStart() && other.hasStart()) {\n      if (!RoughDate.eq(item.getStart(), other.getStart())) {\n        return false;\n      }\n    } else if (item.hasStart() || other.hasStart()) {\n      return false;\n    }\n\n    if (item.hasEnd() && other.hasEnd()) {\n      if (!RoughDate.eq(item.getEnd(), other.getEnd())) {\n        return false;\n      }\n    } else if (item.hasEnd() || other.hasEnd()) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static mergeAll(dates) {\n    if (!dates) {\n      return null;\n    } else if (dates._isARoughDateObject || dates._isARoughDateObject) {\n      return dates;\n    }\n\n    if (!dates.length || dates.length === 0) {\n      return null;\n    }\n\n    let date = dates[0];\n\n    if (dates.length > 1) {\n      for (let i = 1; i < dates.length; ++i) {\n        if (!dates[i].isNull()) {\n          if (date.isNull()) {\n            date = dates[i];\n          } else {\n            date = date.merge(dates[i]);\n          }\n        }\n      }\n    }\n\n    if (date.isNull()) {\n      return null;\n    } else {\n      return date;\n    }\n  }\n\n  merge(other) {\n    if (!other) {\n      return this;\n    } else if (other._isARoughDateObject) {\n      other = other.toDateRange();\n    }\n\n    return new DateRange({\n      start: RoughDate.min(this.getEarliestStart(), other.getEarliestStart()),\n      end: RoughDate.max(this.getLatestEnd(), other.getLatestEnd()),\n    });\n  }\n\n  hasBounds() {\n    return this.hasStart() && this.hasEnd();\n  }\n\n  hasEnd() {\n    if (this.state.end) {\n      return !this.state.end.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  hasStart() {\n    if (this.state.start) {\n      return !this.state.start.isNull();\n    } else {\n      return false;\n    }\n  }\n\n  isInstant() {\n    return this.hasStart() && this.state.start === this.state.end;\n  }\n\n  // Returns a DateRange object\n  toDate() {\n    if (this.hasStart()) {\n      if (this.hasEnd()) {\n        return this.getStart().merge(this.getEnd());\n      } else {\n        return this.getStart();\n      }\n    } else {\n      return this.getEnd();\n    }\n  }\n\n  contains(date) {\n    date = _clean(date);\n\n    if (!date) {\n      return true;\n    } else if (date._isADateRangeObject) {\n      const my_start = this.getEarliestStart();\n      const other_start = date.getEarliestStart();\n\n      if (my_start && other_start) {\n        if (RoughDate.gt(my_start, other_start)) {\n          return false;\n        }\n      } else if (other_start) {\n        return false;\n      }\n\n      const my_end = this.getLatestEnd();\n      const other_end = date.getLatestEnd();\n\n      if (my_end && other_end) {\n        if (RoughDate.lt(my_end, other_end)) {\n          return false;\n        }\n      } else if (my_end) {\n        return false;\n      }\n\n      return true;\n    } else {\n      throw new ValueError(`Invalid Date ${date}`);\n    }\n  }\n\n  intersect(other) {\n    other = _clean(other);\n\n    if (!other) {\n      return this;\n    }\n\n    if (!other.hasBounds()) {\n      return this;\n    } else if (!this.hasBounds()) {\n      return other;\n    }\n\n    const start = RoughDate.max(this.getStart(), other.getStart());\n\n    if (!this.contains(start)) {\n      return null;\n    }\n\n    const end = RoughDate.min(this.getEnd(), other.getEnd());\n\n    if (!this.contains(end)) {\n      return null;\n    }\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  union(other) {\n    other = _clean(other);\n    if (!other) {\n      return this;\n    } else if (!other._isADateRangeObject) {\n      other = new DateRange({ value: other });\n    }\n\n    const start = RoughDate.min(this.getStart(), other.getStart());\n    const end = RoughDate.max(this.getEnd(), other.getEnd());\n\n    if (RoughDate.eq(start, end)) {\n      return new DateRange({ both: start });\n    } else {\n      return new DateRange({ start: start, end: end });\n    }\n  }\n\n  getDelta() {\n    if (this.hasStart() && this.hasEnd()) {\n      try {\n        return this.getLatestEnd().toDate() - this.getEarliestStart().toDate();\n      } catch (error) {\n        console.log(error);\n        console.log(this.hasStart(), this.hasEnd());\n        console.log(this.getStart(), this.getEnd());\n        console.log(this.getLatestEnd(), this.getEarliestStart());\n        throw error;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  zoomIn(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() / (2.0 + scale);\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(-delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  zoomOut(scale = 1) {\n    let state = lodash.cloneDeep(this.state);\n\n    let delta = null;\n\n    if (state.start !== null && state.end !== null) {\n      delta = this.getDelta() * scale;\n    } else {\n      delta = 3600000;\n    }\n\n    if (state.start) {\n      state.start.add(-delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftEarlier(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = -this.getDelta(); //milliseconds\n      } else {\n        delta = -3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  shiftLater(delta = null) {\n    let state = lodash.cloneDeep(this.state);\n\n    if (delta === null) {\n      if (state.start !== null && state.end !== null) {\n        delta = this.getDelta(); //milliseconds\n      } else {\n        delta = 3600000; //milliseconds\n      }\n    }\n\n    if (state.start) {\n      state.start.add(delta, \"ms\");\n    }\n\n    if (state.end) {\n      state.end.add(delta, \"ms\");\n    }\n\n    return new DateRange(state);\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    return this.state.end;\n  }\n\n  getEarliestStart() {\n    if (this.hasStart()) {\n      return this.getStart().getEarliest();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestEnd() {\n    if (this.hasEnd()) {\n      return this.getEnd().getLatest();\n    } else {\n      return null;\n    }\n  }\n\n  getStartDate() {\n    let e = this.getEarliestStart();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEndDate() {\n    let e = this.getLatestEnd();\n    if (e) {\n      return e.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getStartString() {\n    if (this.state.start) {\n      return this.state.start.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  getEndString() {\n    if (this.state.end) {\n      return this.state.end.toString();\n    } else {\n      return \"unbounded\";\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      if (state === \"null\" || state === null) {\n        this.state = { start: null, end: null };\n        return;\n      } else if (state._isADateRangeObject) {\n        this.state = { ...state.state };\n      } else if (state._isARoughDateObject) {\n        this.state = { start: state, end: state };\n      } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n        this.setState(state.value);\n        return;\n      } else if (Object.prototype.hasOwnProperty.call(state, \"both\")) {\n        this.state.start = new RoughDate(state.both);\n        this.state.end = this.state.start;\n      } else if (typeof state === \"string\") {\n        this.state.start = new RoughDate(state);\n        this.state.end = this.state.start;\n      } else {\n        let start = null;\n\n        if (state.start) {\n          start = new RoughDate(state.start);\n\n          if (start.isNull()) {\n            start = null;\n          }\n        }\n\n        let end = null;\n\n        if (state.end) {\n          end = new RoughDate(state.end);\n\n          if (end.isNull()) {\n            end = null;\n          }\n        }\n\n        if (start && end) {\n          if (RoughDate.gt(start, end)) {\n            let tmp = start;\n            start = end;\n            end = tmp;\n          }\n\n          if (RoughDate.gt(start, end)) {\n            let tmp = RoughDate.min(start, end);\n            end = RoughDate.max(start, end);\n            start = tmp;\n          }\n        }\n\n        this.state.start = start;\n        this.state.end = end;\n      }\n    } else {\n      this.state.start = null;\n      this.state.end = null;\n    }\n  }\n\n  toDry() {\n    return this.state;\n  }\n}\n\nDateRange.unDry = function (value) {\n  return new DateRange(value);\n};\n\nDry.registerClass(\"DateRange\", DateRange);\n\nexport default DateRange;\n","import DateRange from \"./DateRange\";\nimport RoughDate from \"./RoughDate\";\n\ntest(\"simple\", () => {\n  let a = new DateRange();\n  expect(a.hasBounds()).toStrictEqual(false);\n  expect(a.hasStart()).toStrictEqual(false);\n  expect(a.hasEnd()).toStrictEqual(false);\n\n  a = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(a.getStartDate() < a.getEndDate()).toStrictEqual(true);\n  expect(a.hasBounds()).toStrictEqual(true);\n  expect(a.hasStart()).toStrictEqual(true);\n  expect(a.hasEnd()).toStrictEqual(true);\n  expect(a.getEndDate() - a.getStartDate()).toStrictEqual(24 * 60 * 60 * 1000);\n  expect(RoughDate.delta(a.getEnd(), a.getStart())).toStrictEqual(24 * 60 * 60 * 1000);\n\n  let b = new DateRange({ start: \"1850-12-02\", end: \"1852-01-01\" });\n\n  expect(DateRange.eq(a, a)).toStrictEqual(true);\n  expect(DateRange.eq(b, b)).toStrictEqual(true);\n  expect(DateRange.eq(a, b)).toStrictEqual(false);\n\n  let c = new DateRange({ start: \"1850-12-02\", end: \"1850-12-01\" });\n\n  expect(DateRange.eq(a, c)).toStrictEqual(true);\n  expect(DateRange.eq(c, a)).toStrictEqual(true);\n\n  let d = DateRange.clone(b);\n\n  expect(DateRange.eq(b, d)).toStrictEqual(true);\n  expect(DateRange.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new DateRange({ start: \"1850-01-31\", end: \"1850-12-31\" });\n  let b = new DateRange({ start: \"1849-01-31\", end: \"1850-07-31\" });\n  let intersect = new DateRange({ start: \"1850-01-31\", end: \"1850-07-31\" }).toString();\n\n  expect(a.intersect(b).toString()).toStrictEqual(intersect);\n  expect(b.intersect(a).toString()).toStrictEqual(intersect);\n\n  let union = new DateRange({ start: \"1849-01-31\", end: \"1850-12-31\" }).toString();\n  expect(a.union(b).toString()).toStrictEqual(union);\n  expect(b.union(a).toString()).toStrictEqual(union);\n\n  let c = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let d = new DateRange({ start: \"1839-12-08\", end: \"1841-01-17\" });\n\n  intersect = new DateRange({ start: \"1841-01-01\", end: \"1841-01-17\" }).toString();\n  console.log(intersect);\n  expect(d.intersect(c).toString()).toStrictEqual(intersect);\n});\n","class KeyError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, KeyError);\n  }\n}\n\nclass ValueError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, ValueError);\n  }\n}\n\nclass DuplicateError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, DuplicateError);\n  }\n}\n\nclass MissingError extends Error {\n  constructor(...args) {\n    super(...args);\n    Error(this, MissingError);\n  }\n}\n\nexport { KeyError, ValueError, DuplicateError, MissingError };\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Note {\n  constructor(props) {\n    this.state = {\n      text: null,\n      id: null,\n      sources: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isANoteObject = true;\n  }\n\n  static clone(item) {\n    let c = new Note();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.text = setState(state.text);\n      this.state.id = setState(state.id);\n      this.state.sources = setState(state.sources, []);\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  toString() {\n    return `Note(${this.getText()})`;\n  }\n\n  getText() {\n    return this.state.text;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNote.unDry = function (value) {\n  return new Note(value);\n};\n\nDry.registerClass(\"Note\", Note);\n\nexport default Note;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Note from \"./Note\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_note_uid() {\n  let uid = uuidv4();\n  return \"N\" + uid.substring(uid.length - 7);\n}\n\nclass Notes {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isANotesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Notes();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  canAdd(item) {\n    return item instanceof Note || item._isANoteObject;\n  }\n\n  add(note) {\n    if (!this.canAdd(note)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(note.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(note);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    note = note.clone(Note);\n\n    let id = note.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Note ID ${note}`);\n      }\n\n      note._updateHooks(this._getHook);\n      this.state.registry[id] = Note;\n    } else {\n      let uid = _generate_note_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_note_uid();\n      }\n\n      note.state.id = uid;\n    }\n\n    note._updateHooks(this._getHook);\n    this._names[note.getName()] = note.getID();\n    this.state.registry[note.getID()] = note;\n\n    return note;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Note with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Note || name._isANoteObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No Note matches '${name}. Available Notes are '${keys}'`);\n  }\n\n  get(id) {\n    let Note = this.state.registry[id];\n\n    if (!Note) {\n      throw new MissingError(`No Note with ID ${id}`);\n    }\n\n    return Note;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nNotes.unDry = function (value) {\n  let notes = new Notes();\n  notes.state = value;\n  notes._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    notes._names[v.getName()] = key;\n  });\n\n  return notes;\n};\n\nDry.registerClass(\"Notes\", Notes);\n\nexport default Notes;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Person from \"./Person\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_person_uid() {\n  let uid = uuidv4();\n  return \"P\" + uid.substring(uid.length - 7);\n}\n\nclass People {\n  constructor(props) {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPeopleObject = true;\n    this.load(props);\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new People();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  clearSelections() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setSelected(false);\n    });\n  }\n\n  clearHighlights() {\n    Object.keys(this._names).forEach((key) => {\n      this.get(this._names[key]).setHighlighted(false);\n    });\n  }\n\n  canAdd(item) {\n    return item instanceof Person || item._isAPersonObject;\n  }\n\n  add(person) {\n    if (!this.canAdd(person)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(person.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(person);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    person = Person.clone(person);\n\n    let id = person.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Person ID ${person}`);\n      }\n\n      person._updateHooks(this._getHook);\n      this.state.registry[id] = person;\n    } else {\n      let uid = _generate_person_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_person_uid();\n      }\n\n      person.state.id = uid;\n    }\n\n    person._updateHooks(this._getHook);\n    this._names[person.getName()] = person.getID();\n    this.state.registry[person.getID()] = person;\n\n    return person;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No Person with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Person || name._isAPersonObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    // let keys = Object.keys(this._names).join(\"', '\");\n\n    // throw new MissingError(`No Person matches '${name}. Available People are '${keys}'`);\n  }\n\n  filterNonContributingEngineers() {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (!person.isNonContributingEngineer()){\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filterUnconnected(connections) {\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      if (connections.nConnections(key) > 0) {\n        let person = this.state.registry[key];\n        registry[key] = person;\n        names[person.getName()] = key;\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  filter(funcs = []) {\n    if (funcs.length === 0) {\n      return this;\n    }\n\n    let registry = {};\n    let names = {};\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        for (let i = 0; i < funcs.length; ++i) {\n          person = funcs[i](person);\n          if (!person) {\n            break;\n          }\n        }\n\n        if (person) {\n          registry[key] = person;\n          names[person.getName()] = key;\n        }\n      }\n    });\n\n    let people = new People();\n    people.state.registry = registry;\n    people._names = names;\n    people._updateHooks(this._getHook);\n\n    return people;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n      if (person) {\n        let timeline = person.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  getNodes({ anchor = null } = {}) {\n    let nodes = [];\n\n    if (anchor && anchor.getID) {\n      anchor = anchor.getID();\n    }\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let person = this.state.registry[key];\n\n      if (person) {\n        let node = null;\n        if (key === anchor) {\n          node = person.getNode({ is_anchor: true });\n        } else {\n          node = person.getNode();\n        }\n\n        if (node) {\n          nodes.push(node);\n        }\n      }\n    });\n\n    return nodes;\n  }\n\n  getRegistry() {\n    // Returns the registry of people\n    // key: value - uid: person\n    return this.state.registry;\n  }\n\n  get(id) {\n    let person = this.state.registry[id];\n\n    if (!person) {\n      throw new MissingError(`No Person with ID ${id}`);\n    }\n\n    return person;\n  }\n\n  load(data) {\n    if (data) {\n      if (data.array) {\n        data = data.array;\n      }\n      data.forEach((element) => {\n        let person = Person.load(element);\n        this.add(person);\n      });\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPeople.unDry = function (value) {\n  let people = new People();\n  people.state = value;\n  people._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    people._names[v.getName()] = key;\n  });\n\n  return people;\n};\n\nDry.registerClass(\"People\", People);\n\nexport default People;\n","import Dry from \"json-dry\";\n\nimport People from \"./People\";\nimport Person from \"./Person\";\n\ntest(\"simple\", () => {\n  let state1 = { orig_name: \"John Smith\", firstnames: [\"John\"], surnames: [\"Smith\"] };\n\n  let name1 = \"John Smith\";\n\n  let p1 = new Person(state1);\n\n  let state2 = { orig_name: \"Brunel, Isambard\", firstnames: [\"Isambard\"], surnames: [\"Brunel\"] };\n  let name2 = \"Isambard Brunel\";\n\n  let p2 = new Person(state2);\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new People();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"Brunel\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"m\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"Brunel\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"m\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport positionGroups from \"../data/positionGroups.json\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nfunction _filterWindow(values, window) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    let dates = values[key];\n\n    let intersect = window.intersect(dates);\n\n    if (!intersect) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nfunction _filterProject(values, project) {\n  if (!values) {\n    return values;\n  }\n\n  let ret = null;\n\n  Object.keys(values).forEach((key) => {\n    if (!(key in project)) {\n      if (!ret) {\n        ret = { ...values };\n      }\n      delete ret[key];\n    }\n  });\n\n  if (ret) {\n    return ret;\n  } else {\n    return values;\n  }\n}\n\nclass Person {\n  constructor(props) {\n    this.state = {\n      name: null,\n      titles: [],\n      firstnames: [],\n      surnames: [],\n      suffixes: [],\n      id: null,\n      positions: {},\n      affiliations: {},\n      projects: {},\n      sources: {},\n      highlighted: {},\n      alive: null,\n      gender: null,\n      notes: [],\n      orig_name: null,\n      weight: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPersonObject = true;\n  }\n\n  static clone(item) {\n    let c = new Person();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  isNode() {\n    return true;\n  }\n\n  inGroup(group, match_and=true) {\n    if (group.getID) {\n      let ids = {};\n      ids[group.getID()] = 1;\n      group = ids;\n    }\n\n    let seen = {};\n\n    Object.keys(this.state.affiliations).forEach((key) => {\n      for (let index in this.state.affiliations[key]) {\n        if (this.state.affiliations[key][index] in group) {\n          seen[this.state.affiliations[key][index]] = 1;\n        }\n      }\n    });\n\n    Object.keys(this.state.positions).forEach((key) => {\n      for (let index in this.state.positions[key]) {\n        if (this.state.positions[key][index] in group) {\n          seen[this.state.positions[key][index]] = 1;\n        }\n      }\n    });\n\n    if (match_and) {\n      return Object.keys(seen).length === Object.keys(group).length;\n    }\n    else {\n      return Object.keys(seen).length > 0;\n    }\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  filterSource(source) {\n    if (source.getID) {\n      let id = source.getID();\n      source = {};\n      source[id] = 1;\n    }\n\n    let nsources = Object.keys(source).length;\n\n    let seen = {};\n\n    Object.keys(this.state.sources).forEach((key) => {\n      let s = this.state.sources[key];\n\n      Object.keys(source).forEach((source_id) => {\n        if (s.includes(source_id)) {\n          seen[source_id] = 1;\n        }\n      });\n    });\n\n    if (Object.keys(seen).length !== nsources) {\n      return null;\n    } else {\n      return this;\n    }\n  }\n\n  filterProject(project) {\n    if (project.getID) {\n      let id = project.getID();\n      project = {};\n      project[id] = 1;\n    }\n\n    let nprojects = Object.keys(project).length;\n\n    let seen = {};\n    let new_projects = {};\n\n    Object.keys(this.state.projects).forEach((key) => {\n      if (key in project) {\n        seen[key] = 1;\n        new_projects[key] = this.state.projects[key];\n      }\n    });\n\n    if (Object.keys(seen).length !== nprojects) {\n      return null;\n    }\n\n    let affiliations = _filterProject(this.state.affiliations, project);\n    let positions = _filterProject(this.state.positions, project);\n    let sources = _filterProject(this.state.sources, project);\n    let weight = _filterProject(this.state.weight, project);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions ||\n      weight !== this.state.weight || sources !== this.state.sources) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person.state.sources = sources;\n      person.state.weight = weight;\n      person.state.projects = new_projects;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  filterWindow(window) {\n    if (!window) {\n      return this;\n    } else if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    window = window.intersect(this.getAlive());\n\n    if (!window) {\n      return null;\n    }\n\n    let affiliations = _filterWindow(this.state.affiliations, window);\n    let positions = _filterWindow(this.state.positions, window);\n\n    if (affiliations !== this.state.affiliations || positions !== this.state.positions) {\n      let person = new Person();\n      person.state = { ...this.state };\n      person.state.affiliations = affiliations;\n      person.state.positions = positions;\n      person._getHook = this._getHook;\n      return person;\n    } else {\n      return this;\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.titles = setState(state.titles, []);\n      this.state.firstnames = setState(state.firstnames, []);\n      this.state.surnames = setState(state.surnames, []);\n      this.state.suffixes = setState(state.suffixes, []);\n      this.state.id = setState(state.id);\n      this.state.positions = setState(state.positions, {});\n      this.state.affiliations = setState(state.affiliations, {});\n      this.state.projects = setState(state.projects, {});\n      this.state.sources = setState(state.sources, {});\n      this.state.alive = setState(state.alive);\n      this.state.gender = setState(state.gender);\n      this.state.orig_name = setState(state.orig_name);\n      this.state.notes = setState(state.notes, []);\n      this.state.weight = setState(state.weight);\n      this.state.is_highlighted = false;\n      this.state.is_selected = false;\n\n      if (!this.state.orig_name || this.state.orig_name === \"None\") {\n        throw new ValueError(`No name for ${this}`);\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Person(${this.getName()})`;\n  }\n\n  getAlive() {\n    return this.state.alive;\n  }\n\n  getFirstName() {\n    if (this.state.firstnames) {\n      return this.state.firstnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getTitle() {\n    if (this.state.titles) {\n      return this.state.titles.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSurname() {\n    if (this.state.surnames) {\n      return this.state.surnames.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getSuffix() {\n    if (this.state.suffixes) {\n      return this.state.suffixes.join(\" \");\n    } else {\n      return null;\n    }\n  }\n\n  getName() {\n    var parts = [];\n\n    let part = this.getTitle();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getFirstName();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSurname();\n    if (part) {\n      parts.push(part);\n    }\n\n    part = this.getSuffix();\n    if (part) {\n      parts.push(part);\n    }\n\n    if (parts.length > 0) {\n      return parts.join(\" \");\n    } else {\n      return \"null\";\n    }\n  }\n\n  getInitials() {\n    var parts = [];\n\n    this.state.firstnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    this.state.surnames.forEach((n) => {\n      parts.push(n[0]);\n    });\n\n    if (parts.length > 0) {\n      return parts.join(\"\");\n    } else {\n      return \"??\";\n    }\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getPositions() {\n    // Returns the positions object for each project\n    return this.state.positions;\n  }\n\n  getPosition(projectID) {\n    // Return the position for the associated projectID\n    // Returns an array of position IDs\n    return this.state.positions[projectID];\n  }\n\n  getScores() {\n    return this.state.scores;\n  }\n\n  getBorn() {\n    if (this.state.alive) {\n      return this.state.alive.getStart();\n    } else {\n      return null;\n    }\n  }\n\n  getDied() {\n    if (this.state.alive) {\n      return this.state.alive.getEnd();\n    } else {\n      return null;\n    }\n  }\n\n  getTimeLine() {\n    const alive = this.getAlive();\n\n    if (!alive) {\n      return null;\n    } else {\n      return {\n        start: alive.getStart(),\n        end: alive.getEnd(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    }\n  }\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  getProjectID() {\n    // return the first matching project ID\n    return Object.keys(this.state.projects)[0];\n  }\n\n  getProjectWeight(projectKey) {\n    const weight = this.state.weight[projectKey];\n\n    if (!weight) {\n      console.error(\"No weight for \" + this.getName() + this.getID() + \" for project with key \" + projectKey);\n      return 1;\n    }\n\n    return weight;\n  }\n\n  setSelected(val) {\n    if (val) {\n      this.state.is_selected = true;\n    }\n    else {\n      this.state.is_selected = false;\n    }\n  }\n\n  getSelected() {\n    return this.state.is_selected;\n  }\n\n  setHighlighted(val) {\n    if (val) {\n      this.state.is_highlighted = true;\n    }\n    else {\n      this.state.is_highlighted = false;\n    }\n  }\n\n  getHighlighted() {\n    return this.state.is_highlighted;\n  }\n\n\n  getWeight(project_id = null) {\n    if (project_id === null) {\n      // return the first project weight\n      project_id = Object.keys(this.state.weight)[0];\n    }\n\n    return this.state.weight[project_id];\n  }\n\n  isEngineer(project_id = null) {\n    if (project_id === null) {\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical().toLowerCase()\n                           .replace(/\\s/g, \"\")\n                           .replace(/[.,/#!$%^&*;:{}=\\-_`~()]/g, \"\");\n      if (positionGroups[\"engineering\"][\"members\"].includes(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  isNonContributingEngineer(project_id = null) {\n    if (project_id === null) {\n      // return this status with the first project\n      project_id = Object.keys(this.state.positions)[0];\n    }\n\n    const positions = this.state.positions[project_id];\n\n    for (let i = 0; i < positions.length; ++i){\n      const position = this._getHook(positions[i]);\n      const name = position.getCanonical();\n      if (name.includes(\"non-cont\")) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  getNode() {\n    let node = {\n      id: this.getID(),\n      label: this.getName(),\n      title: this.getName(),\n      initials: this.getInitials(),\n      shape: \"circle\",\n      weight: this.getWeight(),\n      type: \"person\",\n      highlighted: this.getHighlighted(),\n      selected: this.getSelected(),\n      project: this.getProjectID(),\n      is_nc_engineer: this.isNonContributingEngineer(),\n      is_engineer: this.isEngineer(),\n    };\n\n    return node;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPerson.unDry = function (value) {\n  return new Person(value);\n};\n\nDry.registerClass(\"Person\", Person);\n\nexport default Person;\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Position {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      sources: [],\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAPositionObject = true;\n  }\n\n  static clone(item) {\n    let c = new Position();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  static makeCanonical(name) {\n    if (!name) {\n      return null;\n    } else {\n      return name.trim().toLowerCase();\n    }\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n\n      this.state.canonical = Position.makeCanonical(this.state.name);\n\n      if (!this.state.name){\n        throw new ValueError(\"You cannot have an Position without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Position(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getCanonical() {\n    return this.state.canonical;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPosition.unDry = function (value) {\n  return new Position(value);\n};\n\nDry.registerClass(\"Position\", Position);\n\nexport default Position;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Position from \"./Position\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_position_uid() {\n  let uid = uuidv4();\n  return \"Q\" + uid.substring(uid.length - 7);\n}\n\nclass Positions {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAPositionsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Positions();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  items() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Position || item._isAPositionObject;\n  }\n\n  add(position) {\n    if (!this.canAdd(position)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(position.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(position);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    position = Position.clone(position);\n\n    let id = position.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Position ID ${position}`);\n      }\n\n      position._updateHooks(this._getHook);\n      this.state.registry[id] = position;\n    } else {\n      let uid = _generate_position_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_position_uid();\n      }\n\n      position.state.id = uid;\n    }\n\n    position._updateHooks(this._getHook);\n    this._names[position.getName()] = position.getID();\n    this.state.registry[position.getID()] = position;\n\n    return position;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No position with name ${name}`);\n    }\n  }\n\n  getNameByID(id) {\n    return this.get(id).getName();\n  }\n\n  find(name) {\n    if (name instanceof Position || name._isApositionObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n  }\n\n  get(id) {\n    let position = this.state.registry[id];\n\n    if (!position) {\n      throw new MissingError(`No Position with ID ${id}`);\n    }\n\n    return position;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nPositions.unDry = function (value) {\n  let positions = new Positions();\n  positions.state = value;\n  positions._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    positions._names[v.getName()] = key;\n  });\n\n  return positions;\n};\n\nDry.registerClass(\"Positions\", Positions);\n\nexport default Positions;\n","import Dry from \"json-dry\";\n\nimport Positions from \"./Positions\";\nimport Position from \"./Position\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a position\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Position({ name: name1, url: url1 });\n\n  let name2 = \"This is another position\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Position({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Positions();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Project {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      url: null,\n      duration: new DateRange(),\n      description: null,\n      notes: {},\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isAProjectObject = true;\n  }\n\n  static clone(item) {\n    let c = new Project();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.notes = setState(state.notes, {});\n      this.state.url = setState(state.url, null);\n      this.state.duration = new DateRange({ value: state.duration });\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have a Project without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Project(${this.getName()})`;\n  }\n\n  getName() {\n    return this.state.name;\n  }\n\n  getURL() {\n    return this.state.url;\n  }\n\n  getDuration() {\n    return this.state.duration;\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  getTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start: duration.getEarliestStart().toDate(),\n        end: duration.getLatestEnd().toDate(),\n        id: this.getID(),\n        content: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  getNewTimeLine() {\n    const duration = this.getDuration();\n\n    if (duration && duration.hasBounds()) {\n      return {\n        start_time: duration.getEarliestStart().toMoment(),\n        end_time: duration.getLatestEnd().toMoment(),\n        project_id: this.getID(),\n        title: this.getName(),\n      };\n    } else {\n      return null;\n    }\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProject.unDry = function (value) {\n  return new Project(value);\n};\n\nDry.registerClass(\"Project\", Project);\n\nexport default Project;\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Project from \"./Project\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_project_uid() {\n  let uid = uuidv4();\n  return \"J\" + uid.substring(uid.length - 7);\n}\n\nclass Projects {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isAProjectsObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Projects();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  getNames() {\n    return Object.keys(this._names);\n  }\n\n  getIDs() {\n    return Object.values(this._names);\n  }\n\n  projects() {\n    return this._names;\n  }\n\n  getDetails() {\n    return this._names;\n  }\n\n  canAdd(item) {\n    return item instanceof Project || item._isAProjectObject;\n  }\n\n  add(project) {\n    if (!this.canAdd(project)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(project.getName());\n    } catch (error) {\n      console.error(\"Cannot get project\", error);\n    }\n\n    if (existing) {\n      existing = existing.merge(project);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    project = Project.clone(project);\n\n    let id = project.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Project ID ${project}`);\n      }\n\n      project._updateHooks(this._getHook);\n      this.state.registry[id] = project;\n    } else {\n      let uid = _generate_project_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_project_uid();\n      }\n\n      project.state.id = uid;\n    }\n\n    project._updateHooks(this._getHook);\n    this._names[project.getName()] = project.getID();\n    this.state.registry[project.getID()] = project;\n\n    return project;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      throw new MissingError(`No project with name ${name}`);\n    }\n  }\n\n  find(name) {\n    if (name instanceof Project || name._isAProjectObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No project matches '${name}. Available projects are '${keys}'`);\n  }\n\n  get(id) {\n    let project = this.state.registry[id];\n\n    if (!project) {\n      throw new MissingError(`No Project with ID ${id}`);\n    }\n\n    return project;\n  }\n\n  getTimeLine() {\n    let items = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let project = this.state.registry[key];\n      if (project) {\n        let timeline = project.getTimeLine();\n        if (timeline) {\n          items.push(timeline);\n        }\n      }\n    });\n\n    return items;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nProjects.unDry = function (value) {\n  let projects = new Projects();\n  projects.state = value;\n  projects._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    projects._names[v.getName()] = key;\n  });\n\n  return projects;\n};\n\nDry.registerClass(\"Projects\", Projects);\n\nexport default Projects;\n","import Dry from \"json-dry\";\n\nimport Projects from \"./Projects\";\nimport Project from \"./Project\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a project\";\n  let url1 = \"https://localhost/something\";\n\n  let p1 = new Project({ name: name1, url: url1 });\n\n  let name2 = \"This is another project\";\n  let url2 = \"https://localhost/other\";\n\n  let p2 = new Project({ name: name2, url: url2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getURL()).toStrictEqual(url1);\n  expect(p2.getURL()).toStrictEqual(url2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Projects();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport moment from \"moment\";\nimport lodash from \"lodash\";\n\nimport DateRange from \"./DateRange\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction _toDate(val, def = null) {\n  if (val) {\n    if (val._isAMomentObject) {\n      return val;\n    }\n\n    /*if (val.toISOString){\n      val = val.toISOString();\n    }*/\n\n    let date = moment(val);\n\n    if (!date.isValid()) {\n      console.log(`Invalid Date ${val}`);\n      throw new ValueError(`Invalid Date ${val}`);\n    }\n\n    return date;\n  } else {\n    if (!def) {\n      return null;\n    } else {\n      return _toDate(def);\n    }\n  }\n}\n\n// NOTE FOR FUTURE - moment(x) < moment(y) === true\n//            even though moment(x).toDate() < moment(y).toDate() === false\n//   MOMENT COMPARISONS ARE BROKEN!\n\nfunction _get_min(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() < d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _get_max(d1, d2) {\n  if (d1) {\n    if (d2) {\n      if (d1.toDate() > d2.toDate()) {\n        return d1;\n      } else {\n        return d2;\n      }\n    } else {\n      return d1;\n    }\n  } else {\n    return d2;\n  }\n}\n\nfunction _merge_raw(s1, s2) {\n  if (!s1) {\n    return s2;\n  } else if (!s2) {\n    return s1;\n  }\n\n  return `${s1} + ${s2}`;\n}\n\nclass RoughDate {\n  constructor(state) {\n    this.state = {\n      start: null,\n      end: null,\n      raw: null,\n    };\n\n    this.setState(state);\n\n    this._isARoughDateObject = true;\n  }\n\n  setState(state) {\n    if (!state || state === \"null\" || state === null) {\n      this.state = { start: null };\n      return;\n    } else if (state._isARoughDateObject) {\n      this.state = { ...state.state };\n      return;\n    } else if (state._isADateRangeObject) {\n      this.state = state.toDate();\n      return;\n    } else if (state._isAMomentObject) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (state.toISOString) {\n      this.state = { start: _toDate(state) };\n      return;\n    } else if (Object.prototype.hasOwnProperty.call(state, \"value\")) {\n      this.state = { start: state.value };\n      return;\n    } else if (typeof state === \"string\") {\n      this.state = { start: _toDate(state), raw: state };\n      return;\n    }\n\n    let start = _toDate(state.start);\n    let end = _toDate(state.end);\n\n    if (!start) {\n      this.state = { start: null };\n      return;\n    }\n\n    this.state.start = start;\n    this.state.end = end;\n    this.state.raw = state.raw;\n\n    if (this.isNull()) {\n      console.log(\"NULL RoughDate?\");\n      console.log(state);\n    }\n  }\n\n  static clone(item) {\n    let d = new RoughDate();\n    d.state = lodash.cloneDeep(item.state);\n    return d;\n  }\n\n  static max(d1, d2) {\n    return new RoughDate(_get_max(d1.getLatest(), d2.getLatest()));\n  }\n\n  static min(d1, d2) {\n    return new RoughDate(_get_min(d1.getEarliest(), d2.getEarliest()));\n  }\n\n  static delta(d1, d2) {\n    return d1.getLatestDate() - d2.getEarliestDate();\n  }\n\n  static getDelta(d1, d2) {\n    return RoughDate.delta(d1, d2);\n  }\n\n  static eq(item, other) {\n    if (item._isARoughDateObject && other._isARoughDateObject) {\n      return (\n        item.getEarliestString() === other.getEarliestString() && item.getLatestString() === other.getLatestString()\n      );\n    } else {\n      return false;\n    }\n  }\n\n  static lt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() < d2.getEarliestDate();\n    }\n  }\n\n  static gt(d1, d2) {\n    if (d1.isNull() || d2.isNull()) {\n      return false;\n    } else {\n      return d1.getEarliestDate() > d2.getEarliestDate();\n    }\n  }\n\n  static le(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.lt(d1, d2);\n  }\n\n  static ge(d1, d2) {\n    return RoughDate.eq(d1, d2) || RoughDate.gt(d1, d2);\n  }\n\n  static ne(d1, d2) {\n    return !RoughDate.eq(d1, d2);\n  }\n\n  add(delta) {\n    if (this.state.start) {\n      this.state.start.add(delta);\n    }\n\n    if (this.state.end) {\n      this.state.end.add(delta);\n    }\n\n    this.state.raw = null;\n  }\n\n  sub(delta) {\n    this.add(-delta);\n  }\n\n  isNull() {\n    if (this.state.start) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  isFuzzy() {\n    if (this.state.end) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isExact() {\n    return !(this.isNull() || this.isFuzzy());\n  }\n\n  toString() {\n    if (this.isNull()) {\n      return \"Date:unknown\";\n    } else if (this.isFuzzy()) {\n      return `~${this.state.start.format(\"LL\")}-${this.state.end.format(\"LL\")}`;\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  toSimpleString() {\n    if (this.isNull()) {\n      return \"unknown\";\n    } else if (this.isFuzzy()) {\n      let s = this.state.start.toDate();\n      let e = this.state.end.toDate();\n\n      if (s.getMonth() === 0 && e.getMonth() === 11 && s.getDate() === 1 && e.getDate() === 31) {\n        //the dates span full years\n        if (s.getFullYear() === e.getFullYear()) {\n          return s.getFullYear();\n        } else {\n          return `${s.getFullYear()}-${e.getFullYear()}`;\n        }\n      } else {\n        return `${s.getDate()}/${s.getMonth() + 1}/${s.getFullYear()}-${e.getDate()}/${\n          e.getMonth() + 1\n        }/${e.getFullYear()}`;\n      }\n    } else {\n      return this.state.start.format(\"LL\");\n    }\n  }\n\n  getEarliest() {\n    let state = { start: this.state.start };\n    let r = new RoughDate();\n    r.state = state;\n    return r;\n  }\n\n  getLatest() {\n    if (this.state.end) {\n      let state = { start: this.state.end };\n      let r = new RoughDate();\n      r.state = state;\n      return r;\n    } else {\n      return this.getEarliest();\n    }\n  }\n\n  getEarliestDate() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestDate() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate();\n    } else {\n      return null;\n    }\n  }\n\n  getEarliestString() {\n    let d = this.getEarliest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  getLatestString() {\n    let d = this.getLatest();\n\n    if (d) {\n      return d.toDate().toISOString();\n    } else {\n      return null;\n    }\n  }\n\n  toRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isExact()) {\n      return new DateRange({ both: this.state.start });\n    } else {\n      return new DateRange({ start: this.state.start, end: this.state.end });\n    }\n  }\n\n  toDateRange() {\n    if (this.isNull()) {\n      return new DateRange();\n    } else if (this.isFuzzy()) {\n      return new DateRange({ start: this.getEarliest(), end: this.getLatest() });\n    } else {\n      return new DateRange({ both: this.getEarliest() });\n    }\n  }\n\n  toDate() {\n    let m = this.toMoment();\n\n    if (m) {\n      try {\n        return m.toDate();\n      } catch (error) {\n        console.log(`STRANGE ERROR ${error}`);\n        console.log(`m = ${m}`);\n        console.log(m);\n        return null;\n      }\n    } else {\n      return null;\n    }\n  }\n\n  //   toUnixTimestamp() {\n  //     return parseInt((this.toDate().getTime() / 1000).toFixed(0));\n  //   }\n\n  toMoment() {\n    if (this.isNull()) {\n      return null;\n    } else if (this.isExact()) {\n      return this.state.start;\n    } else {\n      throw new ValueError(`Cannot extract a single date from an inexact date ${this}`);\n    }\n  }\n\n  getRaw() {\n    return this.state.raw;\n  }\n\n  getStart() {\n    return this.state.start;\n  }\n\n  getEnd() {\n    if (this.state.end) {\n      return this.state.end;\n    } else {\n      return this.state.start;\n    }\n  }\n\n  merge(other) {\n    let state = {\n      start: _get_min(this.getStart(), other.getStart()),\n      end: _get_max(this.getEnd(), other.getEnd()),\n      raw: _merge_raw(this.getRaw(), other.getRaw()),\n    };\n\n    let date = new RoughDate();\n    date.state = state;\n\n    return date;\n  }\n}\n\nRoughDate.unDry = function (value) {\n  return new RoughDate(value);\n};\n\nDry.registerClass(\"Date\", RoughDate);\n\nexport default RoughDate;\n","import RoughDate from \"./RoughDate\";\nimport DateRange from \"./DateRange\";\n\ntest(\"simple\", () => {\n  let a = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n  let b = new RoughDate({ start: \"1851-01-01\", end: \"1851-12-31\" });\n\n  expect(a.getEarliest().toString()).toStrictEqual(RoughDate.min(a, b).toString());\n  expect(b.getLatest().toString()).toStrictEqual(RoughDate.max(a, b).toString());\n\n  expect(RoughDate.eq(a, a)).toStrictEqual(true);\n  expect(RoughDate.eq(b, b)).toStrictEqual(true);\n  expect(RoughDate.eq(a, b)).toStrictEqual(false);\n\n  let c = new RoughDate({ start: \"1850-01-01\", end: \"1850-12-31\" });\n\n  expect(RoughDate.eq(a, c)).toStrictEqual(true);\n  expect(RoughDate.eq(c, a)).toStrictEqual(true);\n\n  let d = RoughDate.clone(b);\n\n  expect(RoughDate.eq(b, d)).toStrictEqual(true);\n  expect(RoughDate.eq(c, d)).toStrictEqual(false);\n});\n\ntest(\"intersect\", () => {\n  let a = new RoughDate({ start: \"1823-01-01\", end: \"1833-12-31\" });\n  let b = new DateRange({ start: \"1830-01-01\", end: \"1860-01-01\" });\n\n  let intersect = new DateRange({ start: \"1830-01-01\", end: \"1833-12-31\" });\n\n  expect(b.intersect(a).toString()).toStrictEqual(intersect.toString());\n\n  let m1 = a.toDateRange().getStart();\n  let m2 = b.getStart();\n\n  expect(RoughDate.max(m1, m2).toString()).toStrictEqual(m2.toString());\n});\n\ntest(\"minmax\", () => {\n  let a = new RoughDate({ start: \"1841-01-01\", end: \"1841-12-31\" });\n  let b = new RoughDate(\"1839-12-08\");\n\n  expect(RoughDate.min(a, b).toString()).toStrictEqual(b.toString());\n  expect(RoughDate.max(a, b).toString()).toStrictEqual(a.getLatest().toString());\n});\n","import get_id from \"./get_id\";\n\n/** Score by the influence of each node */\nfunction score_by_influence(nodes, edges, social) {\n  let scores = [];\n\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.weight + node.edge_count / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\n/** Score by the number of connections only */\nfunction score_by_connections(nodes, edges, social) {\n  let anchor = social.getAnchor();\n  let anchor_id = null;\n  let connections = null;\n\n  if (anchor) {\n    anchor_id = get_id(anchor);\n    connections = social.getConnections();\n  }\n\n  let scores = [];\n\n  for (let i in nodes) {\n    let node = nodes[i];\n    let score = node.edge_count + node.weight / 1000000.0\n\n    if (anchor_id) {\n      if (node.id === anchor_id) {\n        score += 100000.0;\n      }\n      else if (connections.areConnected(node.id, anchor_id)) {\n        score += 50000.0;\n      }\n    }\n\n    scores.push([score, i]);\n  }\n\n  // sort the scores such that the most connected nodes are first\n  scores.sort((x, y) => {\n    return y[0] - x[0];\n  });\n\n  for (let i in scores) {\n    nodes[scores[i][1]].sort_index = i;\n  }\n}\n\nexport {\n  score_by_connections as default,\n  score_by_connections,\n  score_by_influence\n};\n","\n/** Size each node by the influence of each node. Calculates the\n *  weight for a node and returns it\n */\nfunction size_by_influence(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.weight;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\n/** Size each node by the number of connections only */\nfunction size_by_connections(nodes, edges, social) {\n  let min_size = null;\n  let max_size = null;\n\n  nodes.forEach((node) => {\n    let size = node.edge_count;\n\n    if (min_size === null) {\n      min_size = size;\n      max_size = size;\n    }\n    else if (size > max_size) {\n      max_size = size;\n    }\n    else if (size < min_size) {\n      min_size = size;\n    }\n\n    node.size = size;\n  });\n\n  if (max_size === min_size) {\n    nodes.forEach((node) => {\n      nodes.size = 10.0;\n    });\n  }\n  else {\n    //scale between 1 and 10\n    nodes.forEach((node) => {\n      let size = 1.0 + (9.0 * (node.size - min_size) / (max_size - min_size));\n      node.size = size;\n    });\n  }\n}\n\nexport {\n  size_by_connections as default,\n  size_by_connections,\n  size_by_influence\n};\n","import Dry from \"json-dry\";\nimport lodash, { isString } from \"lodash\";\n\nimport People from \"./People\";\nimport Businesses from \"./Businesses\";\nimport Connections from \"./Connections\";\nimport Positions from \"./Positions\";\nimport Affiliations from \"./Affiliations\";\nimport Sources from \"./Sources\";\nimport Notes from \"./Notes\";\nimport Projects from \"./Projects\";\nimport Biographies from \"./Biographies\";\nimport DateRange from \"./DateRange\";\nimport get_id from \"./get_id\";\n\nimport score_by_connections from \"./ScoringFunctions\";\nimport size_by_influence from \"./SizingFunctions\";\n\nimport {\n  ValueError\n} from \"./Errors\";\n\nfunction _push(values, list) {\n  if (!list || !values) {\n    return;\n  }\n\n  if (values.length) {\n    for (let i = 0; i < values.length; ++i) {\n      list.push(values[i]);\n    }\n  } else {\n    list.push(values);\n  }\n}\n\nclass Social {\n  constructor(props) {\n    if (props) {\n      this.state = props;\n    } else {\n      this.state = {};\n    }\n\n    this.state.anchor = null;\n    this.state.filter = {};\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this.state.window = new DateRange();\n    this.state.max_window = new DateRange();\n    this.state.scoring_function = score_by_connections;\n    this.state.sizing_function = size_by_influence;\n    this.state.filter_unconnected = true;\n    this.state.filter_nc_engineers = true;\n    this.state.images = {};\n    this.state.default_image = null;\n    this.state.project_text = {};\n    this.state.help_text = null;\n    this._rebuilding = 0;\n\n    this._isASocialObject = true;\n  }\n\n  static clone(item) {\n    let c = new Social();\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  _updateHooks() {\n    let getHook = (id) => {\n      return this.get(id);\n    };\n\n    let state = {\n      ...this.state\n    };\n\n    if (!(this.state.people instanceof People)) {\n      state.people = new People();\n    } else {\n      state.people = this.state.people;\n    }\n\n    if (!(this.state.businesses instanceof Businesses)) {\n      state.businesses = new Businesses();\n    } else {\n      state.businesses = this.state.businesses;\n    }\n\n    if (!(this.state.connections instanceof Connections)) {\n      state.connections = new Connections();\n    } else {\n      state.connections = this.state.connections;\n    }\n\n    if (!(this.state.positions instanceof Positions)) {\n      state.positions = new Positions();\n    } else {\n      state.positions = this.state.positions;\n    }\n\n    if (!(this.state.affiliations instanceof Affiliations)) {\n      state.affiliations = new Affiliations();\n    } else {\n      state.affiliations = this.state.affiliations;\n    }\n\n    if (!(this.state.sources instanceof Sources)) {\n      state.sources = new Sources();\n    } else {\n      state.sources = this.state.sources;\n    }\n\n    if (!(this.state.notes instanceof Notes)) {\n      state.notes = new Notes();\n    } else {\n      state.notes = this.state.notes;\n    }\n\n    if (!(this.state.projects instanceof Projects)) {\n      state.projects = new Projects();\n    } else {\n      state.projects = this.state.projects;\n    }\n\n    if (!(this.state.biographies instanceof Biographies)) {\n      state.biographies = new Biographies();\n    } else {\n      state.biographies = this.state.biographies;\n    }\n\n    this.state = state;\n\n    for (let key in this.state) {\n      try {\n        this.state[key]._updateHooks(getHook);\n      } catch (error) {\n        // console.error(\"For key : \", key, \"\\nError: \", error);\n      }\n    }\n  }\n\n  setImage(id, filename, credit) {\n    id = get_id(id);\n    this.state.images[id] = [filename, credit];\n  }\n\n  setDefaultImage(filename) {\n    this.state.default_image = filename;\n  }\n\n  getImage(id) {\n    id = get_id(id);\n    let image = this.state.images[id];\n\n    if (image) {\n      return image[0];\n    } else {\n      return this.state.default_image;\n    }\n  }\n\n  getImageCredit(id) {\n    id = get_id(id);\n    let credit = this.state.images[id];\n\n    if (credit) {\n      return credit[1];\n    } else {\n      return null;\n    }\n  }\n\n  setHelpText(text) {\n    this.state.help_text = text;\n  }\n\n  getHelpText() {\n    return this.state.help_text;\n  }\n\n  setProjectText(id, text) {\n    id = get_id(id);\n    this.state.project_text[id] = text;\n  }\n\n  getProjectText(id) {\n    id = get_id(id);\n    return this.state.project_text[id];\n  }\n\n  filterNonContributingEngineers(filter = true) {\n    if (this.state.filter_nc_engineers === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_nc_engineers = true;\n    }\n    else {\n      this.state.filter_nc_engineers = false;\n    }\n\n    this.clearCache();\n  }\n\n  filterUnconnectedNodes(filter = true) {\n    if (this.state.filter_unconnected === filter) {\n      return;\n    }\n\n    if (filter) {\n      this.state.filter_unconnected = true;\n    }\n    else {\n      this.state.filter_unconnected = false;\n    }\n\n    this.clearCache();\n  }\n\n  clearCache() {\n    this.state.cache = {\n      graph: null,\n      projectTimeLine: null,\n      itemTimeLine: null,\n      node_filters: null,\n      edge_filters: null,\n      people: null,\n      businesses: null,\n      connections: null,\n    };\n    this._rebuilding = 0;\n  }\n\n  getNodeFilters() {\n    if (this.state.cache.node_filters) {\n      return this.state.cache.node_filters;\n    }\n\n    this._rebuilding += 1;\n    this.state.cache.node_filters = [];\n\n    // Must do time first, as this can affect all of the other filters!\n    let window = this.getWindow();\n\n    if (window.hasStart() || window.hasEnd()) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          return item.filterWindow(window);\n        } catch (error) {\n          console.log(`ERROR ${error}: ${item}`);\n          return item;\n        }\n      });\n    }\n\n    const project_filter = this.state.filter.project;\n\n    if (project_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterProject(project_filter);\n      });\n    }\n\n    const source_filter = this.state.filter.source;\n\n    if (source_filter) {\n      this.state.cache.node_filters.push((item) => {\n        return item.filterSource(source_filter);\n      });\n    }\n\n    const node_filter = this.state.filter.node;\n\n    if (node_filter) {\n      let connections = this.getConnectionsTo(node_filter);\n      let filter = {\n        ...node_filter\n      };\n\n      // this filter is returning matching people and the nodes\n      // that are connected to these people\n\n      for (let connection in connections) {\n        let node = connections[connection];\n        filter[get_id(node)] = 1;\n      }\n\n      this.state.cache.node_filters.push((item) => {\n        if (get_id(item) in filter) {\n          return item;\n        } else {\n          return null;\n        }\n      });\n    }\n\n    const group_filter = this.state.filter.group;\n\n    if (group_filter) {\n      this.state.cache.node_filters.push((item) => {\n        try {\n          // use an \"OR\" match at the moment as this is more\n          // appropriate for the current use of the gui\n          if (item.inGroup(group_filter, false)) {\n            return item;\n          } else {\n            return null;\n          }\n        } catch (error) {\n          console.log(`Filter error: ${error}`);\n          return item;\n        }\n      });\n    }\n\n    this._rebuilding -= 1;\n    return this.state.cache.node_filters;\n  }\n\n  getEdgeFilters() {\n    if (!this.state.cache.edge_filters) {\n      this.state.cache.edge_filters = [];\n\n      // must do time first, as this can affect all of the other filters!\n      let window = this.getWindow();\n\n      if (window.hasStart() || window.hasEnd()) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterWindow(window);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const project_filter = this.state.filter.project;\n\n      if (project_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterProject(project_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n\n      const source_filter = this.state.filter.source;\n\n      if (source_filter) {\n        this.state.cache.edge_filters.push((item) => {\n          try {\n            return item.filterSource(source_filter);\n          } catch (error) {\n            console.log(`ERROR ${error}: ${item}`);\n            return item;\n          }\n        });\n      }\n    }\n\n    return this.state.cache.edge_filters;\n  }\n\n  getWindow() {\n    return this.state.window;\n  }\n\n  getMaxWindow() {\n    return this.state.max_window;\n  }\n\n  _fitWindow(window) {\n    let new_window = this.state.max_window.intersect(window);\n\n    let delta = window.getDelta();\n\n    if (new_window && new_window.getDelta() === delta) {\n      return window;\n    }\n\n    if (delta > this.state.max_window.getDelta()) {\n      return DateRange.clone(this.state.max_window);\n    }\n\n    if (window.getStartDate() < this.state.max_window.getStartDate()) {\n      return new DateRange({\n        start: this.state.max_window.getStartDate(),\n        end: this.state.max_window.getStartDate() + delta,\n      });\n    } else {\n      return new DateRange({\n        start: this.state.max_window.getEndDate() - delta,\n        end: this.state.max_window.getEndDate(),\n      });\n    }\n  }\n\n  setMaxWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (window === this.state.max_window) {\n      return;\n    }\n\n    this.state.max_window = window;\n\n    if (this.state.window && this.state.window.hasBounds()) {\n      let fitted = this._fitWindow(this.state.window);\n\n      if (fitted !== this.state.window) {\n        this.setWindow(fitted);\n      }\n    } else {\n      this.state.window = this.state.max_window;\n    }\n  }\n\n  setWindow(window) {\n    if (!window._isADateRangeObject) {\n      window = new DateRange(window);\n    }\n\n    if (DateRange.eq(window, this.state.window)) {\n      return false;\n    }\n\n    let fitted = this._fitWindow(window);\n\n    if (DateRange.eq(fitted, this.state.window)) {\n      return false;\n    }\n\n    this.state.window = fitted;\n    this.clearCache();\n    return true;\n  }\n\n  getPeople(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.people) {\n        // console.log(\"REBUILD PEOPLE\");\n        this._rebuilding += 1;\n        this.state.cache.people = this.state.people.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_nc_engineers) {\n        this.state.cache.people =\n          this.state.cache.people.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.people =\n          this.state.cache.people.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.people;\n    } else {\n      return this.state.people;\n    }\n  }\n\n  getBusinesses(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.businesses) {\n        // console.log(\"REBUILD BUSINESSES\");\n        this._rebuilding += 1;\n        this.state.cache.businesses = this.state.businesses.filter(this.getNodeFilters());\n        this._rebuilding -= 1;\n      }\n\n      if (this.state.filter_nc_engineers) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterNonContributingEngineers();\n      }\n\n      if (this.state.filter_unconnected) {\n        this.state.cache.businesses =\n          this.state.cache.businesses.filterUnconnected(this.getConnections(true));\n      }\n\n      return this.state.cache.businesses;\n    } else {\n      return this.state.businesses;\n    }\n  }\n\n  getConnections(filtered = true) {\n    if (this._rebuilding) {\n      filtered = false;\n    }\n\n    if (filtered) {\n      if (!this.state.cache.connections) {\n        // console.log(\"REBUILD CONNECTIONS\");\n        this._rebuilding += 1;\n        this.state.cache.connections = this.state.connections.filter(this.getEdgeFilters());\n        this._rebuilding -= 1;\n      }\n\n      return this.state.cache.connections;\n    } else {\n      return this.state.connections;\n    }\n  }\n\n  getBiographies() {\n    return this.state.biographies;\n  }\n\n  getAffiliations() {\n    return this.state.affiliations;\n  }\n\n  getPositions() {\n    return this.state.positions;\n  }\n\n  getSources() {\n    return this.state.sources;\n  }\n\n  getNotes() {\n    return this.state.notes;\n  }\n\n  getProjects() {\n    return this.state.projects;\n  }\n\n  getConnectionsTo(item) {\n    return this.getConnections().getConnectionsTo(item);\n  }\n\n  getAnchor() {\n    return this.state.anchor;\n  }\n\n  getFilter() {\n    return {\n      ...this.state.filter\n    };\n  }\n\n  getFilterText() {\n    const filter = [];\n\n    let f = this.state.filter.node;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`connected to ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`connected to (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.source;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`with source ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`with sources (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.group;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in group ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in groups (${parts.join(\" and \")})`);\n      }\n    }\n\n    f = this.state.filter.project;\n\n    if (f) {\n      let parts = [];\n\n      Object.keys(f).forEach((key) => {\n        parts.push(this.get(key, false).getName());\n      });\n\n      parts.sort();\n\n      if (parts.length === 1) {\n        filter.push(`in project ${parts[0]}`);\n      } else if (parts.length > 1) {\n        filter.push(`in projects (${parts.join(\" and \")})`);\n      }\n    }\n\n    if (filter.length === 1) {\n      return filter[0];\n    } else if (filter.length > 1) {\n      return `[${filter.join(\"] and [\")}]`;\n    } else {\n      return null;\n    }\n  }\n\n  _getType(item) {\n    item = get_id(item);\n\n    if (item[0] === \"P\" || item[0] === \"B\") {\n      return \"node\";\n    } else if (item[0] === \"J\") {\n      return \"project\";\n    } else if (item[0] === \"S\") {\n      return \"source\";\n    } else {\n      return \"group\";\n    }\n  }\n\n  isFiltered(item) {\n    item = get_id(item);\n\n    let type = this._getType(item);\n\n    const filter = this.state.filter[type];\n\n    if (filter) {\n      return item in filter;\n    } else {\n      return false;\n    }\n  }\n\n  clearHighlights() {\n    this.getPeople(false).clearHighlights();\n    this.getBusinesses(false).clearHighlights();\n    this.getConnections(false).clearHighlights();\n    this.clearCache();\n  }\n\n  clearSelections() {\n    this.getPeople(false).clearSelections();\n    this.getBusinesses(false).clearSelections();\n    this.clearCache();\n  }\n\n  selectSearchMatching(text, include_bios = false, highlight_links = false) {\n    this.clearSelections();\n    this.clearHighlights();\n\n    try {\n      if (text.length === 0) {\n        this.clearCache();\n        return;\n      }\n    }\n    catch (error) {\n      this.clearCache();\n      return;\n    }\n\n    let result = [];\n\n    try {\n      let items = this.getPeople(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    try {\n      let items = this.getBusinesses(true).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.log(error);\n    }\n\n    if (include_bios) {\n      try {\n        let items = this.getBiographies().search(text);\n        _push(items, result);\n      } catch (error) {\n        console.log(error);\n      }\n    }\n\n    let connections = null;\n\n    if (highlight_links) connections = this.getConnections(true);\n\n    result.forEach((item) => {\n      item = get_id(item);\n      item = this.get(item, false);\n\n      try {\n        if (highlight_links) {\n          item.setSelected(true);\n          connections.highlightConnections(item, this);\n        }\n        else {\n          item.setHighlighted(true);\n        }\n\n      } catch (error) {\n        console.log(error);\n      }\n    })\n\n    this.clearCache();\n  }\n\n  setSelected(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      if (highlight_connections) {\n        this.clearHighlights();\n      }\n\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setSelected(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  setHighlighted(item, highlight_connections = true, clear_previous = true) {\n    if (clear_previous) {\n      this.clearHighlights();\n      this.clearSelections();\n    }\n\n    item = get_id(item);\n    item = this.get(item, false);\n\n    if (item === null) { return; }\n\n    item.setHighlighted(true);\n\n    if (highlight_connections) {\n      this.getConnections(true).highlightConnections(item, this);\n    }\n\n    this.clearCache();\n  }\n\n  isSelected(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getSelected) {\n      return item.getSelected();\n    }\n    else {\n      return false;\n    }\n  }\n\n  isHighlighted(item) {\n    if (item.getID) {\n      item = item.getID();\n    }\n\n    item = this.get(item, false);\n\n    console.log(item);\n\n    if (item === null) {\n      return false;\n    }\n    else if (item.getHighlighted) {\n      return item.getHighlighted();\n    }\n    else {\n      return false;\n    }\n  }\n\n  find(text) {\n    let result = [];\n\n    try {\n      let items = this.getPeople(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBusinesses(false).find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getPositions().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getAffiliations().find(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getSources().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    try {\n      let items = this.getBiographies().search(text);\n      _push(items, result);\n    } catch (error) {\n      console.error(error);\n    }\n\n    return result;\n  }\n\n  resetAllFilters() {\n    this.state.filter = {};\n    this.clearCache();\n  }\n\n  resetFiltersNotShip() {\n    const projectFilter = this.state.filter[\"project\"];\n    this.state.filter = {};\n    this.state.filter[\"project\"] = projectFilter;\n    this.clearCache();\n  }\n\n  isAnchor(node) {\n    let id = get_id(node);\n\n    return id === get_id(this.state.anchor);\n  }\n\n  setAnchor(anchor) {\n    if (anchor === null) {\n      if (this.state.anchor === null) {\n        return false;\n      } else {\n        this.state.anchor = null;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    let got_anchor = null;\n\n    if (isString(anchor)) {\n      got_anchor = this.get(anchor);\n    }\n\n    if (got_anchor) {\n      if (got_anchor === this.state.anchor) {\n        return false;\n      }\n      else {\n        this.state.anchor = got_anchor;\n        this.clearCache();\n        return true;\n      }\n    }\n\n    if (anchor) {\n      got_anchor = this.getPeople().find(anchor);\n    }\n\n    if (!got_anchor) {\n      got_anchor = this.getBusinesses().find(anchor);\n    }\n\n    if (!got_anchor) {\n      console.log(`CANNOT FIND ANCHOR ${anchor}: ${got_anchor}`);\n      return false;\n    }\n\n    anchor = got_anchor;\n\n    if (anchor === this.state.anchor) {\n      return false;\n    }\n\n    this.state.anchor = anchor;\n    this.clearCache();\n    return true;\n  }\n\n  toggleFilter(items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    for (let item of items) {\n      item = get_id(item);\n\n      let type = this._getType(item);\n\n      if (!(type in this.state.filter)) {\n        this.state.filter[type] = {};\n      }\n\n      if (item in this.state.filter[type]) {\n        delete this.state.filter[type][item];\n\n        if (Object.keys(this.state.filter[type]).length === 0) {\n          delete this.state.filter[type];\n        }\n      } else {\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  setFilter(category, items) {\n    if (!Array.isArray(items)) {\n      items = [items];\n    }\n\n    let filter = {};\n\n    for (let item of items) {\n      let id = get_id(item);\n      filter[id] = 1;\n    }\n\n    this.state.filter[category] = filter;\n    this.clearCache();\n  }\n\n  setFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (!(type in this.state.filter)) {\n          this.state.filter[type] = {};\n        }\n\n        this.state.filter[type][item] = 1;\n      }\n    }\n\n    this.clearCache();\n  }\n\n  clearFilters(...args) {\n    for (let items of args) {\n      if (!Array.isArray(items)) {\n        items = [items];\n      }\n\n      for (let item of items) {\n        item = get_id(item);\n\n        let type = this._getType(item);\n\n        if (item in this.state.filter[type]) {\n          delete this.state.filter[type][item];\n\n          if (Object.keys(this.state.filter[type]).length === 0) {\n            delete this.state.filter[type];\n          }\n        }\n      }\n    }\n\n    this.clearCache();\n  }\n\n  toggleNodeFilter(nodes) {\n    this.toggleFilter(nodes);\n  }\n\n  clearProjectFilter() {\n    this.state.filter[\"project\"] = {};\n  }\n\n  toggleProjectFilter(project) {\n    if (!(\"project\" in this.state.filter)) {\n      this.state.filter[\"project\"] = {};\n    }\n\n    if (project in this.state.filter[\"project\"]) {\n      delete this.state.filter[\"project\"][project];\n    } else {\n      this.state.filter[\"project\"][project] = 1;\n    }\n  }\n\n  getProjectTimeLine() {\n    if (this.state.cache.projectTimeLine !== null) {\n      return this.state.cache.projectTimeLine;\n    }\n\n    let items = this.getProjects().getTimeLine();\n\n    this.state.cache.projectTimeLine = items;\n\n    return this.state.cache.projectTimeLine;\n  }\n\n  getItemTimeLine() {\n    if (this.state.cache.itemTimeLine !== null) {\n      return this.state.cache.itemTimeLine;\n    }\n\n    let items = this.getPeople().getTimeLine();\n\n    let projects = this.getProjects().getTimeLine();\n\n    projects.forEach((item) => {\n      item.type = \"background\";\n      items.push(item);\n    });\n\n    this.state.cache.itemTimeLine = items;\n\n    return this.state.cache.itemTimeLine;\n  }\n\n  /** Set the scoring function used to order the nodes */\n  setScoringFunction(func) {\n    if (func !== this.state.scoring_function) {\n      this.state.scoring_function = func;\n      this.clearCache();\n    }\n  }\n\n  /** Return the scoring function that should be used to order the\n   *  nodes in any ordered graph\n   */\n  getScoringFunction() {\n    return this.state.scoring_function;\n  }\n\n  /** Set the sizing function used to size the nodes */\n  setSizingFunction(func) {\n    if (func !== this.state.sizing_function) {\n      this.state.sizing_function = func;\n      this.clearCache();\n    }\n  }\n\n/** Return the sizing function that should be used to size the nodes */\n  getSizingFunction() {\n    return this.state.sizing_function;\n  }\n\n  /** Return the graph of nodes and edges that will be displayed by\n   *  the app. This should apply all of the filters and only return\n   *  the nodes and edges that should be visible. It should also\n   *  apply the indexing function so that the index of the nodes\n   *  show their sorted order according to the primary criterion\n   */\n  getGraph() {\n    if (this.state.cache.graph !== null) {\n      return this.state.cache.graph;\n    }\n\n    let nodes = this.getPeople().getNodes();\n    nodes = nodes.concat(this.getBusinesses().getNodes());\n\n    // create a dictionary so we know which nodes are selected\n    let n = {};\n    for (let i in nodes) {\n      n[get_id(nodes[i])] = 1;\n    }\n\n    // get only the edges that involve these nodes\n    let edges = this.getConnections().getEdges(n);\n\n    // let each node know how many connections it has got\n    let counts = {};\n\n    let add_count = (id) => {\n      // ensures x == 1 if id doesn't exist in counts\n      let x = (counts[id] || 0) + 1;\n      counts[id] = x;\n    };\n\n    for (let i in edges) {\n      add_count(edges[i].source);\n      add_count(edges[i].target);\n    }\n\n    nodes.forEach((node) => {\n      let count = counts[node.id];\n\n      if (!count) { count = 0; }\n      node.edge_count = count;\n    });\n\n    let scoring_function = this.getScoringFunction();\n\n    if (!scoring_function) {\n      scoring_function = score_by_connections;\n    }\n\n    scoring_function(nodes, edges, this);\n\n    let sizing_function = this.getSizingFunction();\n\n    if (!sizing_function) {\n      sizing_function = size_by_influence;\n    }\n\n    sizing_function(nodes, edges, this);\n\n    this.state.cache.graph = {\n      nodes: nodes,\n      edges: edges\n    };\n    return this.state.cache.graph;\n  }\n\n  add(item) {\n    if (!item) {\n      return;\n    }\n\n    let added = false;\n\n    Object.keys(this.state).forEach((key) => {\n      if (!added) {\n        let group = this.state[key];\n        if (group && group.canAdd) {\n          if (group.canAdd(item)) {\n            group.add(item);\n            added = true;\n          }\n        }\n      }\n    });\n\n    if (!added) {\n      throw new ValueError(`Do not know how to add ${item} to this Social group`);\n    }\n  }\n\n  get(id, filtered = true) {\n    id = get_id(id);\n\n    if (this._rebuilding) {\n      // we cannot get filtered data when rebuilding, else otherwise\n      // we get race conditions and weird results\n      filtered = false;\n    }\n\n    try {\n      if (id[0] === \"C\") {\n        return this.getConnections(filtered).get(id);\n      } else if (id[0] === \"P\") {\n        return this.getPeople(filtered).get(id);\n      } else if (id[0] === \"B\") {\n        return this.getBusinesses(filtered).get(id);\n      } else if (id[0] === \"Q\") {\n        return this.getPositions().get(id);\n      } else if (id[0] === \"A\") {\n        return this.getAffiliations().get(id);\n      } else if (id[0] === \"S\") {\n        return this.getSources().get(id);\n      } else if (id[0] === \"N\") {\n        return this.getNotes().get(id);\n      } else if (id[0] === \"J\") {\n        return this.getProjects().get(id);\n      } else {\n        return id;\n      }\n    } catch (error) {\n      if (filtered) {\n        return this.get(id, false);\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  toDry() {\n    return {\n      value: this.state\n    };\n  }\n}\n\nSocial.unDry = function (value) {\n  let social = new Social(value);\n  social._updateHooks();\n\n  return social;\n};\n\nDry.registerClass(\"Social\", Social);\n\nexport default Social;","import Dry from \"json-dry\";\nimport lodash from \"lodash\";\n\nimport RoughDate from \"./RoughDate\";\n\nimport { ValueError } from \"./Errors\";\n\nfunction setState(val, def = null) {\n  if (val) {\n    return val;\n  } else {\n    return def;\n  }\n}\n\nclass Source {\n  constructor(props) {\n    this.state = {\n      name: null,\n      id: null,\n      date: null,\n      description: null,\n      notes: [],\n    };\n\n    this.setState(props);\n\n    this._getHook = null;\n    this._isASourceObject = true;\n  }\n\n  static clone(item) {\n    let c = new Source();\n    c._getHook = item._getHook;\n    c.state = lodash.cloneDeep(item.state);\n    return c;\n  }\n\n  getID() {\n    return this.state.id;\n  }\n\n  getDate() {\n    return this.state.date;\n  }\n\n  updateDate(date, force = false) {\n    if (!(date instanceof RoughDate || date._isARoughDateObject)) {\n      date = new RoughDate(date);\n    }\n\n    if (date.isNull()) {\n      return false;\n    }\n\n    if (this.getDate().isNull()) {\n      this.state.date = date;\n      return true;\n    }\n\n    if (RoughDate.ne(this.getDate(), date)) {\n      if (force) {\n        this.state.date = this.getDate().merge(date);\n        return true;\n      } else {\n        console.log(`Disagreement of date for ${this}: ${this.getDate()} vs ${date}`);\n      }\n    }\n\n    return false;\n  }\n\n  setState(state) {\n    if (state) {\n      this.state.name = setState(state.name);\n      this.state.id = setState(state.id);\n      this.state.description = setState(state.description);\n      this.state.notes = setState(state.notes, []);\n      this.state.sources = setState(state.sources, []);\n      this.state.date = setState(state.date, new RoughDate());\n\n      if (!this.state.name) {\n        throw new ValueError(\"You cannot have an Source without a name\");\n      }\n    }\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n  }\n\n  merge() {\n    return this;\n  }\n\n  toString() {\n    return `Source(${this.getName()})`;\n  }\n\n  getName(remove_page_numbers = false) {\n    if (remove_page_numbers) {\n      let name = this.state.name;\n\n      if (name === \"BRSGB-2015.03016\") {\n        // this is correct\n        return name;\n      }\n\n      if (name.includes(\"-\")) {\n        name = name.split(\"-\")[0];\n      }\n\n      if (name.includes(\",\")) {\n        name = name.split(\",\")[0];\n      }\n\n      return name;\n    }\n    else {\n      return this.state.name;\n    }\n  }\n\n  getDescription() {\n    return this.state.description;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSource.unDry = function (value) {\n  return new Source(value);\n};\n\nDry.registerClass(\"Source\", Source);\n\nexport default Source;\n","import Dry from \"json-dry\";\n\nimport Sources from \"./Sources\";\nimport Source from \"./Source\";\n\ntest(\"simple\", () => {\n  let name1 = \"This is a source\";\n  let p1 = new Source({ name: name1 });\n\n  let name2 = \"This is another source\";\n  let p2 = new Source({ name: name2 });\n\n  expect(p1.getName()).toStrictEqual(name1);\n  expect(p2.getName()).toStrictEqual(name2);\n  expect(p1.getID()).toStrictEqual(null);\n  expect(p2.getID()).toStrictEqual(null);\n\n  let p = new Sources();\n\n  p1 = p.add(p1);\n  p2 = p.add(p2);\n\n  expect(p1.getID() !== null).toStrictEqual(true);\n  expect(p2.getID() !== null).toStrictEqual(true);\n\n  let r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n\n  let s = Dry.stringify(p);\n\n  p = Dry.parse(s);\n\n  r = p.find(\"another\");\n  expect(r.getID()).toStrictEqual(p2.getID());\n\n  r = p.find(\"IS A\");\n\n  expect(r.length).toStrictEqual(2);\n\n  if (r[0].getID() === p1.getID()) {\n    expect(r[1].getID()).toStrictEqual(p2.getID());\n  } else {\n    expect(r[0].getID()).toStrictEqual(p2.getID());\n    expect(r[1].getID()).toStrictEqual(p1.getID());\n  }\n});\n","import Dry from \"json-dry\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport lodash from \"lodash\";\n\nimport Source from \"./Source\";\nimport { KeyError, MissingError } from \"./Errors\";\n\nfunction _generate_source_uid() {\n  let uid = uuidv4();\n  return \"S\" + uid.substring(uid.length - 7);\n}\n\nclass Sources {\n  constructor() {\n    this.state = {\n      registry: {},\n    };\n\n    this._names = {};\n    this._isASourcesObject = true;\n  }\n\n  _updateHooks(hook) {\n    this._getHook = hook;\n    for (let key in this.state.registry) {\n      this.state.registry[key]._updateHooks(hook);\n    }\n  }\n\n  static clone(item) {\n    let c = new Sources();\n    c.state = lodash.cloneDeep(item.state);\n    c._names = lodash.cloneDeep(item._names);\n    c._getHook = item._getHook;\n    return c;\n  }\n\n  values() {\n    let names = Object.keys(this._names);\n    names.sort();\n\n    let output = [];\n\n    names.forEach((key) => {\n      output.push(this.get(this._names[key]));\n    });\n\n    return output;\n  }\n\n  canAdd(item) {\n    return item instanceof Source || item._isASourceObject;\n  }\n\n  add(source) {\n    if (!this.canAdd(source)) {\n      return null;\n    }\n\n    let existing = null;\n\n    try {\n      existing = this.getByName(source.getName());\n    } catch (error) {\n      console.error(error);\n    }\n\n    if (existing) {\n      existing = existing.merge(source);\n      this.state.registry[existing.getID()] = existing;\n      return existing;\n    }\n\n    source = Source.clone(source);\n\n    let id = source.getID();\n\n    if (id) {\n      if (id in this.state.registry) {\n        throw new KeyError(`Duplicate Source ID ${source}`);\n      }\n\n      source._updateHooks(this._getHook);\n      this.state.registry[id] = source;\n    } else {\n      let uid = _generate_source_uid();\n\n      while (uid in this.state.registry) {\n        uid = _generate_source_uid();\n      }\n\n      source.state.id = uid;\n    }\n\n    source._updateHooks(this._getHook);\n    this._names[source.getName()] = source.getID();\n    this.state.registry[source.getID()] = source;\n\n    return source;\n  }\n\n  getByName(name) {\n    let id = this._names[name];\n\n    if (id) {\n      return this.get(id);\n    } else {\n      console.error(`No source with name ${name}`);\n    }\n  }\n\n  search(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      name = name.getName();\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this.state.registry).forEach((key) => {\n      let item = this.state.registry[key];\n\n      let description = item.getDescription();\n\n      if (!description) {\n        description = \"\";\n      }\n\n      try {\n        if (item.getName().toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        } else if (description.toLowerCase().indexOf(name) !== -1) {\n          results.push(item);\n        }\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    } else {\n      return null;\n    }\n  }\n\n  find(name) {\n    if (name instanceof Source || name._isASourceObject) {\n      return this.get(name.getID());\n    }\n\n    name = name.trim().toLowerCase();\n\n    let results = [];\n\n    Object.keys(this._names).forEach((key) => {\n      if (key.toLowerCase().indexOf(name) !== -1) {\n        results.push(this.get(this._names[key]));\n      }\n    });\n\n    if (results.length === 1) {\n      return results[0];\n    } else if (results.length > 1) {\n      return results;\n    }\n\n    let keys = Object.keys(this._names).join(\"', '\");\n\n    throw new MissingError(`No source matches '${name}. Available sources are '${keys}'`);\n  }\n\n  get(id) {\n    let source = this.state.registry[id];\n\n    if (!source) {\n      throw new MissingError(`No Source with ID ${id}`);\n    }\n\n    return source;\n  }\n\n  toDry() {\n    return { value: this.state };\n  }\n}\n\nSources.unDry = function (value) {\n  let sources = new Sources();\n  sources.state = value;\n  sources._names = {};\n\n  Object.keys(value.registry).forEach((key) => {\n    let v = value.registry[key];\n    sources._names[v.getName()] = key;\n  });\n\n  return sources;\n};\n\nDry.registerClass(\"Sources\", Sources);\n\nexport default Sources;\n","\n/** Return the ID number of the passed node. This is used to\n *  standardise how I get IDs. It will first try 'getID()',\n * then, if that fails, .id, and will then return the object\n * itself\n */\nexport default function get_id(node) {\n  if (node === null) {\n    return null;\n  } else if (node.getID) {\n    return node.getID();\n  } else if (node.id) {\n    return node.id;\n  } else {\n    return node;\n  }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"module\":\"SocialApp_module__ZhLpg\",\"ui_main\":\"SocialApp_ui_main__UhCFR\",\"drawerButton\":\"SocialApp_drawerButton__x1teO\",\"fullscreen\":\"SocialApp_fullscreen__eax+4\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"AboutOverlay_container__Sy8FF\",\"closeButton\":\"AboutOverlay_closeButton__NDlbS\",\"textContainer\":\"AboutOverlay_textContainer__2f2w4\",\"header\":\"AboutOverlay_header__UAa5x\",\"intro\":\"AboutOverlay_intro__9QSKV\",\"introBody\":\"AboutOverlay_introBody__a8cSt\",\"sectionHeader\":\"AboutOverlay_sectionHeader__VBeC4\",\"body\":\"AboutOverlay_body__+cpwd\"};","// extracted by mini-css-extract-plugin\nexport default {\"bigbox\":\"BigBox_bigbox__+jHhs\",\"fill\":\"BigBox_fill__bTZYa\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"BioOverlay_container__pw1SU\",\"closeButton\":\"BioOverlay_closeButton__h8EzF\",\"image\":\"BioOverlay_image__xzW5k\",\"image_credit\":\"BioOverlay_image_credit__VJVLC\",\"caption\":\"BioOverlay_caption__HH2Mi\",\"content\":\"BioOverlay_content__pGg9B\",\"panel\":\"BioOverlay_panel__KYkZp\",\"name\":\"BioOverlay_name__5-5fD\",\"bio_heading\":\"BioOverlay_bio_heading__QetXr\",\"source_heading\":\"BioOverlay_source_heading__4z9c3\",\"bio\":\"BioOverlay_bio__cbm6F\",\"source\":\"BioOverlay_source__ib0Ft\",\"source_name\":\"BioOverlay_source_name__npJKE\",\"source_item\":\"BioOverlay_source_item__3wuQk\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ForceGraph_container__czv4C\",\"uob_logo_image\":\"ForceGraph_uob_logo_image__4e1rt\",\"bi_logo_image\":\"ForceGraph_bi_logo_image__QBmH4\",\"right_logo\":\"ForceGraph_right_logo__ksPDl\",\"left_logo\":\"ForceGraph_left_logo__dQgBq\",\"svg_view\":\"ForceGraph_svg_view__gTqSY\",\"node\":\"ForceGraph_node__Xn8Ct\",\"node_highlighted\":\"ForceGraph_node_highlighted__bMlfg\",\"node_engineer\":\"ForceGraph_node_engineer__0swjF\",\"node_engineer_highlighted\":\"ForceGraph_node_engineer_highlighted__dMaNv\",\"node_business\":\"ForceGraph_node_business__KTEsT\",\"node_business_highlighted\":\"ForceGraph_node_business_highlighted__oiV+d\",\"node_nc_engineer\":\"ForceGraph_node_nc_engineer__cVkKh\",\"node_nc_engineer_highlighted\":\"ForceGraph_node_nc_engineer_highlighted__PrtTF\",\"node_selected\":\"ForceGraph_node_selected__dkMEy\",\"link\":\"ForceGraph_link__EOkP9\",\"linkWeak\":\"ForceGraph_linkWeak__kjctO\",\"linkIndirect\":\"ForceGraph_linkIndirect__GJP7B\",\"linkInvisible\":\"ForceGraph_linkInvisible__eLV1k\",\"highlight\":\"ForceGraph_highlight__msFMP\",\"link_highlight\":\"ForceGraph_link_highlight__ePy-N\",\"node_text\":\"ForceGraph_node_text__S+Q-6\",\"node_text_highlight\":\"ForceGraph_node_text_highlight__7jFzx\",\"node_text_select\":\"ForceGraph_node_text_select__P4yye\"};","// extracted by mini-css-extract-plugin\nexport default {\"hbox\":\"HBox_hbox__wBM3+\",\"child\":\"HBox_child__p7GwF\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"HowDoIOverlay_container__uPQcd\",\"closeButton\":\"HowDoIOverlay_closeButton__pt5-8\",\"image\":\"HowDoIOverlay_image__f1Xpb\",\"content\":\"HowDoIOverlay_content__5L4kg\",\"name\":\"HowDoIOverlay_name__ZgmhB\",\"bio\":\"HowDoIOverlay_bio__HJ34-\",\"markdown\":\"HowDoIOverlay_markdown__c5U9B\"};","// extracted by mini-css-extract-plugin\nexport default {\"label\":\"LabelButton_label__VSe5T\",\"button\":\"LabelButton_button__8gi4e\"};","// extracted by mini-css-extract-plugin\nexport default {\"titleText\":\"MainMenu_titleText__Gbog8\",\"panel\":\"MainMenu_panel__JHMVz\",\"menu_label\":\"MainMenu_menu_label__H-Nf1\",\"menu_button\":\"MainMenu_menu_button__KWoyI\"};","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"Overlay_overlay__TiG7U\",\"overlayNoBackground\":\"Overlay_overlayNoBackground__WTr6a\",\"container\":\"Overlay_container__y787m\"};","// extracted by mini-css-extract-plugin\nexport default {\"closeButton\":\"Popover_closeButton__w61f8\",\"popOver\":\"Popover_popOver__PwS5D\",\"header\":\"Popover_header__ycSo7\",\"bio\":\"Popover_bio__j0nZs\"};","// extracted by mini-css-extract-plugin\nexport default {\"form\":\"SearchBar_form__ngDTv\",\"searchBar\":\"SearchBar_searchBar__xUq3F\",\"input\":\"SearchBar_input__gMoru\",\"clearButton\":\"SearchBar_clearButton__qbmu0\",\"linkButton\":\"SearchBar_linkButton__nsee1\",\"linkButtonHighlighted\":\"SearchBar_linkButtonHighlighted__GoxPm\",\"keyboardHolder\":\"SearchBar_keyboardHolder__ylZ4d\",\"keyboard\":\"SearchBar_keyboard__+CbYH\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ShipOverlay_container__3mROS\",\"closeButton\":\"ShipOverlay_closeButton__rVacG\",\"image\":\"ShipOverlay_image__TpGQQ\",\"content\":\"ShipOverlay_content__2jz+y\",\"name\":\"ShipOverlay_name__wA8ea\",\"bio\":\"ShipOverlay_bio__NVDtA\",\"markdown\":\"ShipOverlay_markdown__IT0dv\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"ShipSelector_container__TmOBK\",\"content\":\"ShipSelector_content__FPa7W\",\"arrow_button\":\"ShipSelector_arrow_button__dNjtx\",\"ship_button\":\"ShipSelector_ship_button__xtTXy\",\"ship_button_selected\":\"ShipSelector_ship_button_selected__pxeIZ\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"SlidingPanel_container__XrrAu\",\"leftContainer\":\"SlidingPanel_leftContainer__yAQBz\",\"rightContainer\":\"SlidingPanel_rightContainer__cw04V\",\"topContainer\":\"SlidingPanel_topContainer__s4iNU\",\"bottomContainer\":\"SlidingPanel_bottomContainer__p0wCU\"};","// extracted by mini-css-extract-plugin\nexport default {\"button\":\"TextButton_button__yqfFB\"};","// extracted by mini-css-extract-plugin\nexport default {\"toggled\":\"ToggleButton_toggled__oGRT6\",\"untoggled\":\"ToggleButton_untoggled__M3ji2\"};","// extracted by mini-css-extract-plugin\nexport default {\"vbox\":\"VBox_vbox__IyMr9\",\"child\":\"VBox_child__nyh9r\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"WarningOverlay_container__M71QF\",\"content\":\"WarningOverlay_content__6LiG7\"};","// extracted by mini-css-extract-plugin\nexport default {\"ui_main\":\"WelcomePage_ui_main__1sgGz\",\"image\":\"WelcomePage_image__claoU\"};","// extracted by mini-css-extract-plugin\nexport default {\"enter\":\"SlideFromBottom_enter__XmXnk\",\"enterActive\":\"SlideFromBottom_enterActive__oRq0P\",\"exit\":\"SlideFromBottom_exit__VWD71\",\"exitActive\":\"SlideFromBottom_exitActive__aKHn0\"};","// extracted by mini-css-extract-plugin\nexport default {\"enter\":\"SlideFromLeft_enter__-92RI\",\"enterActive\":\"SlideFromLeft_enterActive__PRYi3\",\"exit\":\"SlideFromLeft_exit__PXFUG\",\"exitActive\":\"SlideFromLeft_exitActive__4diYG\"};","// extracted by mini-css-extract-plugin\nexport default {\"enter\":\"SlideFromRight_enter__d34oJ\",\"enterActive\":\"SlideFromRight_enterActive__O3wa5\",\"exit\":\"SlideFromRight_exit__qW-HL\",\"exitActive\":\"SlideFromRight_exitActive__iYjaE\"};","// extracted by mini-css-extract-plugin\nexport default {\"enter\":\"SlideFromTop_enter__0u3bY\",\"enterActive\":\"SlideFromTop_enterActive__rgHYO\",\"exit\":\"SlideFromTop_exit__uGlkh\",\"exitActive\":\"SlideFromTop_exitActive__5Gidw\"};","var map = {\n\t\"./\": 7746,\n\t\"./SocialApp\": 8423,\n\t\"./SocialApp.js\": 8423,\n\t\"./SocialApp.module.css\": 4908,\n\t\"./components/AboutOverlay\": 7407,\n\t\"./components/AboutOverlay.js\": 7407,\n\t\"./components/AboutOverlay.module.css\": 4053,\n\t\"./components/BigBox\": 9105,\n\t\"./components/BigBox.js\": 9105,\n\t\"./components/BigBox.module.css\": 9395,\n\t\"./components/BioOverlay\": 101,\n\t\"./components/BioOverlay.js\": 101,\n\t\"./components/BioOverlay.module.css\": 4238,\n\t\"./components/ForceGraph\": 9094,\n\t\"./components/ForceGraph.js\": 9094,\n\t\"./components/ForceGraph.module.css\": 5597,\n\t\"./components/HBox\": 2293,\n\t\"./components/HBox.js\": 2293,\n\t\"./components/HBox.module.css\": 6102,\n\t\"./components/HowDoIOverlay\": 6507,\n\t\"./components/HowDoIOverlay.js\": 6507,\n\t\"./components/HowDoIOverlay.module.css\": 7608,\n\t\"./components/LabelButton\": 3853,\n\t\"./components/LabelButton.js\": 3853,\n\t\"./components/LabelButton.module.css\": 2738,\n\t\"./components/MainMenu\": 9472,\n\t\"./components/MainMenu.js\": 9472,\n\t\"./components/MainMenu.module.css\": 7121,\n\t\"./components/Overlay\": 4560,\n\t\"./components/Overlay.js\": 4560,\n\t\"./components/Overlay.module.css\": 9334,\n\t\"./components/OverlayWrapper\": 9130,\n\t\"./components/OverlayWrapper.js\": 9130,\n\t\"./components/Popover\": 6561,\n\t\"./components/Popover.js\": 6561,\n\t\"./components/Popover.module.css\": 1185,\n\t\"./components/SearchBar\": 9119,\n\t\"./components/SearchBar.js\": 9119,\n\t\"./components/SearchBar.module.css\": 9318,\n\t\"./components/ShipOverlay\": 6861,\n\t\"./components/ShipOverlay.js\": 6861,\n\t\"./components/ShipOverlay.module.css\": 9640,\n\t\"./components/ShipSelector\": 1922,\n\t\"./components/ShipSelector.js\": 1922,\n\t\"./components/ShipSelector.module.css\": 725,\n\t\"./components/SlidingPanel\": 3578,\n\t\"./components/SlidingPanel.js\": 3578,\n\t\"./components/SlidingPanel.module.css\": 6785,\n\t\"./components/TextButton\": 4833,\n\t\"./components/TextButton.js\": 4833,\n\t\"./components/TextButton.module.css\": 4428,\n\t\"./components/Timeout\": 6565,\n\t\"./components/Timeout.js\": 6565,\n\t\"./components/ToggleButton\": 5724,\n\t\"./components/ToggleButton.js\": 5724,\n\t\"./components/ToggleButton.module.css\": 9229,\n\t\"./components/VBox\": 2408,\n\t\"./components/VBox.js\": 2408,\n\t\"./components/VBox.module.css\": 5432,\n\t\"./components/WarningOverlay\": 7400,\n\t\"./components/WarningOverlay.js\": 7400,\n\t\"./components/WarningOverlay.module.css\": 7951,\n\t\"./components/WelcomePage\": 6451,\n\t\"./components/WelcomePage.js\": 6451,\n\t\"./components/WelcomePage.module.css\": 7025,\n\t\"./components/d3/ForceGraph.d3\": 3707,\n\t\"./components/d3/ForceGraph.d3.js\": 3707,\n\t\"./components/d3/force_spiral\": 6559,\n\t\"./components/d3/force_spiral.js\": 6559,\n\t\"./components/transitions/SlideFromBottom.module.css\": 8801,\n\t\"./components/transitions/SlideFromLeft.module.css\": 5892,\n\t\"./components/transitions/SlideFromRight.module.css\": 7027,\n\t\"./components/transitions/SlideFromTop.module.css\": 6490,\n\t\"./data\": 468,\n\t\"./data.json\": 468,\n\t\"./data/aboutText\": 6822,\n\t\"./data/aboutText.json\": 6822,\n\t\"./data/dataWeights\": 9711,\n\t\"./data/dataWeights.json\": 9711,\n\t\"./data/entityImageFilenames\": 9894,\n\t\"./data/entityImageFilenames.json\": 9894,\n\t\"./data/fixedNodes\": 4807,\n\t\"./data/fixedNodes.json\": 4807,\n\t\"./data/howDoIOverlayText\": 6965,\n\t\"./data/howDoIOverlayText.json\": 6965,\n\t\"./data/positionGroups\": 9171,\n\t\"./data/positionGroups.json\": 9171,\n\t\"./data/sourceImageFilenames\": 7852,\n\t\"./data/sourceImageFilenames.json\": 7852,\n\t\"./gb_text.md\": 9590,\n\t\"./ge_text.md\": 458,\n\t\"./gw_text.md\": 7657,\n\t\"./help_text.md\": 5545,\n\t\"./images\": 3226,\n\t\"./images.json\": 3226,\n\t\"./images/bg-128-168.jpg\": 274,\n\t\"./images/bi_logo.png\": 7043,\n\t\"./images/people/Brunel.jpg\": 232,\n\t\"./images/people/Bryan_Donkin.jpg\": 2703,\n\t\"./images/people/Christopher_Claxton.jpg\": 4514,\n\t\"./images/people/Edward_Chappel.jpg\": 5031,\n\t\"./images/people/John_Grantham.jpg\": 3421,\n\t\"./images/people/John_Scott.jpg\": 3630,\n\t\"./images/people/Robert_Bright.jpg\": 1712,\n\t\"./images/people/Samuel_Hall.jpg\": 7577,\n\t\"./images/people/Thomas_Guppy.jpg\": 2969,\n\t\"./images/people/William_Fairbairn.jpg\": 8477,\n\t\"./images/people/William_Patterson.jpg\": 1377,\n\t\"./images/people/William_Symonds.jpg\": 7331,\n\t\"./images/ships/Great_Britain.jpg\": 410,\n\t\"./images/ships/Great_Eastern.jpg\": 5703,\n\t\"./images/ships/Great_Western.jpg\": 9143,\n\t\"./images/ssgb_logo.png\": 5554,\n\t\"./images/uob_logo.png\": 2392,\n\t\"./images/welcome/welcome1.png\": 5261,\n\t\"./images/welcome/welcome2.png\": 3270,\n\t\"./index\": 7746,\n\t\"./index.css\": 1174,\n\t\"./index.js\": 7746,\n\t\"./model/Affiliation\": 743,\n\t\"./model/Affiliation.js\": 743,\n\t\"./model/Affiliations\": 2014,\n\t\"./model/Affiliations.js\": 2014,\n\t\"./model/Affiliations.test\": 9373,\n\t\"./model/Affiliations.test.js\": 9373,\n\t\"./model/Biographies\": 5450,\n\t\"./model/Biographies.js\": 5450,\n\t\"./model/Business\": 6529,\n\t\"./model/Business.js\": 6529,\n\t\"./model/Businesses\": 1148,\n\t\"./model/Businesses.js\": 1148,\n\t\"./model/Businesses.test\": 4617,\n\t\"./model/Businesses.test.js\": 4617,\n\t\"./model/Connection\": 4868,\n\t\"./model/Connection.js\": 4868,\n\t\"./model/Connections\": 4485,\n\t\"./model/Connections.js\": 4485,\n\t\"./model/DateRange\": 4092,\n\t\"./model/DateRange.js\": 4092,\n\t\"./model/DateRange.test\": 8747,\n\t\"./model/DateRange.test.js\": 8747,\n\t\"./model/Errors\": 4031,\n\t\"./model/Errors.js\": 4031,\n\t\"./model/Note\": 63,\n\t\"./model/Note.js\": 63,\n\t\"./model/Notes\": 81,\n\t\"./model/Notes.js\": 81,\n\t\"./model/People\": 6407,\n\t\"./model/People.js\": 6407,\n\t\"./model/People.test\": 2705,\n\t\"./model/People.test.js\": 2705,\n\t\"./model/Person\": 905,\n\t\"./model/Person.js\": 905,\n\t\"./model/Position\": 6007,\n\t\"./model/Position.js\": 6007,\n\t\"./model/Positions\": 6465,\n\t\"./model/Positions.js\": 6465,\n\t\"./model/Positions.test\": 9838,\n\t\"./model/Positions.test.js\": 9838,\n\t\"./model/Project\": 1734,\n\t\"./model/Project.js\": 1734,\n\t\"./model/Projects\": 829,\n\t\"./model/Projects.js\": 829,\n\t\"./model/Projects.test\": 5199,\n\t\"./model/Projects.test.js\": 5199,\n\t\"./model/RoughDate\": 871,\n\t\"./model/RoughDate.js\": 871,\n\t\"./model/RoughDate.test\": 8084,\n\t\"./model/RoughDate.test.js\": 8084,\n\t\"./model/ScoringFunctions\": 9875,\n\t\"./model/ScoringFunctions.js\": 9875,\n\t\"./model/SizingFunctions\": 2194,\n\t\"./model/SizingFunctions.js\": 2194,\n\t\"./model/Social\": 1591,\n\t\"./model/Social.js\": 1591,\n\t\"./model/Source\": 1195,\n\t\"./model/Source.js\": 1195,\n\t\"./model/Source.test\": 9563,\n\t\"./model/Source.test.js\": 9563,\n\t\"./model/Sources\": 6958,\n\t\"./model/Sources.js\": 6958,\n\t\"./model/get_id\": 1509,\n\t\"./model/get_id.js\": 1509,\n\t\"./reset.css\": 153,\n\t\"./socialNetwork\": 9232,\n\t\"./socialNetwork.json\": 9232\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 8116;"],"names":["SocialApp","props","social","Dry","graphData","Social","console","error","updateSize","bind","state","highlighted_item","selected_item","filterUnconnectedNodes","filterNCEngineers","commercialFiltered","engineersFiltered","spiralOrder","nodeSize","commercialNodeFilter","engineerNodeFilter","connectedNodes","selectedShip","selectedShipID","isOverlayOpen","searchText","searchIncludeBios","searchHighlightLinks","menuVisible","height","width","warningVisible","showWelcomePage","Object","keys","imageData","forEach","key","setImage","ssGW","getProjects","getByName","getName","getID","ssGB","ssGE","fetch","gw_text","then","r","text","setProjectText","gb_text","ge_text","help_text","setHelpText","toggleFilter","spiralOrders","freeze","Connections","score_by_connections","Influence","score_by_influence","nodeSizes","size_by_influence","size_by_connections","setSizingFunction","findInvestorsAndEngineers","setScoringFunction","socialGraph","window","addEventListener","this","removeEventListener","setState","innerWidth","innerHeight","log","item","setAnchor","setOverlay","close","closeOverlay","person","ship","_isAProjectObject","setFilter","setDefaultImage","getImage","length","searchWasItem","selectSearchMatching","resetAllFilters","filterNonContributingEngineers","slotToggleFilterCommercial","slotToggleFilterEngineer","componentDidMount","setInterval","date","Date","id","get","setSelected","cachedSearch","clearSelections","clearHighlights","performSearch","setWindow","entity","getConnections","gotConnections","positions","getPositions","items","name","namedPosition","toLowerCase","replace","positionGroups","positionID","includes","push","order","setSpiralOrder","size","setNodeSize","overlayItem","include_bios","highlight_links","toggled","location","reload","emitCloseWelcome","slotCloseWelcome","timeout","emitReload","resetAll","menu","onClick","slotShowMenu","search","emitUpdate","slotUpdateSearch","emitSearchHighlightToggled","slotSearchHighlightToggled","searchHighlightToggled","searchHighlightAvailable","help","graph","selected","highlighted","signalClicked","slotClicked","emitSetCenter","slotSetAnchor","emitReadMore","slotReadMore","spiral_button","label","button","toggleSpiralOrder","ship_button","projects","emitSetShip","slotSetShip","emitShowShip","slotShowShip","size_button","toggleNodeSize","filter_text","filter_button","toggleEngCommFilter","unconnected_button","slotToggleUnconnectedNodes","noncontrib_button","slotToggleNonContributingEngineers","search_text","toggle_search","slotSearchBiosToggled","search_button","overlay","toggleOverlay","left_side","right_side","mainmenu","isOpen","position","slotCloseMenu","filterText","sizeText","unconnectedNodesVisible","ncEngineersVisible","searchHighlight","searchBios","emitToggleSpiralOrder","emitToggleFilter","emitToggleNodeSize","emitToggleSearch","emitToggleFilterCommercial","emitToggleFilterEngineering","emitToggleUnconnectedNodesVisible","emitToggleNCEngineersVisible","emitSearchBiosToggled","nnodes","getGraph","nodes","warning_popover","useBackground","slotCloseWarning","className","styles","last_interaction_time","React","AboutOverlay","style","background","border","fontSize","aboutText","BigBox","children","bio","getBiographies","getByID","sources","seen","getSources","source","getConnectionsInvolving","connection","getAffiliationSources","getCorrespondanceSources","source_parts","getDescription","filename","credit","getImageCredit","src","require","alt","ForceGraph","popup","emitPopup","clearPopup","componentDidUpdate","containerRef","ForceGraphD3","draw","containerRect","current","getBoundingClientRect","update","drawFromScratch","node","ref","_wrap","child","i","type","HBox","parts","markdown","getHelpText","MenuLabel","MenuButton","MainMenu","wrapperRef","setWrapperRef","handleClickOutside","document","event","contains","target","stopPropagation","unconnectedNodesText","ncEngineersText","Overlay","useState","open","setOpen","e","defaultProps","OverlayWrapper","sourceButtonText","socialSources","sourceIDs","isBioOverlayOpen","toggleSourceOverlay","readMoreButton","centerButton","isAnchor","trim","split","left","top","popoverHeight","x","y","popoverWidth","SearchBar","onChange","input","last_text","endsWith","keyboard","setInput","onKeyPress","handleShift","handleCaps","handleClear","handleClose","handleEnter","showKeyboard","layoutName","value","preventDefault","clear_button","link_button","highlight","link_style","keyboardRef","layout","onSubmit","onSubmitHandler","onChangeHandler","placeholder","getProjectText","ShipButton","func","href","ShipSelector","ships","buttons","s","SlidingPanel","defaultSize","minSize","maxSize","container","transition","SlideFromRight","horiz_size","vert_size","maxWidth","maxHeight","SlideFromBottom","SlideFromTop","SlideFromLeft","in","classNames","unmountOnExit","TextButton","Timeout","now_time","intervalID","clearInterval","ToggleButton","emitToggled","VBox","showSecond","setShowSecond","_null_function","constrain","w","isNaN","getTextSize","d","context","_canvas","createElement","getContext","font","use_initials","initials","measureText","parent","updateLink","updateNodeText","updateNode","updateGraph","drag","uid","uuidv4","indirectConnectionsVisible","hideUnconnectedNodes","slice","_size_changed","_graph_changed","_is_running","_is_drawn","find","h","new_graph","l","lodash","edges","edge","found_source","found_target","n","source_id","target_id","old_graph","_graph","new_node","found","m","old_node","vx","vy","Math","random","size_changed","prototype","hasOwnProperty","call","simulation","_simulation","d3","on","fx","fy","restart","fixed","data","_mainGroup","select","selectAll","join","enter","append","attr","radius","min","is_nc_engineer","is_engineer","textSize","delta","link","any_highlighted","undefined","dx","dy","dr","sqrt","stop","last_update","alpha","alphaTarget","alphaDecay","force","force_spiral","strength","index","sort_index","now","_link","_node","_label","remove","mainGroup","spiralSimulation","_constant","_return_index","j","strengths","indexes","points_x","points_y","initialize","Array","floor","max_index","max","angle","min_x","max_x","min_y","max_y","asin","cos","sin","center_x","center_y","scale_x","scale_y","_","arguments","val","def","Affiliation","notes","_getHook","_isAAffiliationObject","canonical","makeCanonical","ValueError","hook","c","unDry","_generate_affiliation_uid","substring","Affiliations","registry","_names","_isAAffiliationsObject","_updateHooks","names","sort","output","affiliation","canAdd","existing","merge","KeyError","MissingError","results","indexOf","affiliations","v","test","name1","p1","url","name2","p2","expect","toStrictEqual","p","add","Biographies","bios","_isABiographiesObject","getNode","biography","_filterProject","values","project","ret","Business","scores","weight","is_highlighted","is_selected","_isABusinessObject","group","ids","nsources","nprojects","new_projects","business","_isADateRangeObject","DateRange","dates","intersect","_filterWindow","project_id","projectID","getCanonical","title","getInitials","shape","getHighlighted","getSelected","getWeight","_generate_business_uid","Businesses","_isABusinessesObject","load","setHighlighted","isNonContributingEngineer","businesses","connections","nConnections","funcs","timeline","getTimeLine","anchor","is_anchor","array","element","_mergeSources","other","Connection","n0","n1","shared","duration","correspondances","_isAConnectionObject","node0","getNode0","node1","getNode1","nProjects","getDuration","correspondences","weights","getNode0Name","getNode1Name","color","getColorFromType","get_id","_generate_connection_uid","_connections","_isAConnectionsObject","connection_id","id0","getNode0ID","id1","getNode1ID","conns","_add","item0","item1","areNodesVisible","toEdge","_clean","_isARoughDateObject","toDateRange","both","RoughDate","start","end","hasBounds","isInstant","getStartString","getEndString","getStart","toSimpleString","getEarliestStart","getLatestEnd","hasStart","hasEnd","getEnd","isNull","my_start","other_start","my_end","other_end","toDate","scale","getDelta","getEarliest","getLatest","toString","tmp","a","getStartDate","getEndDate","b","union","args","Error","DuplicateError","Note","_isANoteObject","getText","_generate_note_uid","Notes","_isANotesObject","note","clone","_generate_person_uid","People","_isAPeopleObject","Person","_isAPersonObject","people","orig_name","firstnames","surnames","titles","suffixes","alive","gender","match_and","getAlive","part","getTitle","getFirstName","getSurname","getSuffix","content","projectKey","getProjectID","isEngineer","Position","_isAPositionObject","_generate_position_uid","Positions","_isAPositionsObject","_isApositionObject","Project","description","start_time","toMoment","end_time","_generate_project_uid","Projects","_isAProjectsObject","url1","url2","getURL","_toDate","_isAMomentObject","moment","isValid","_get_min","d1","d2","_get_max","raw","toISOString","isFuzzy","format","getMonth","getDate","getFullYear","isExact","s1","s2","getRaw","getLatestDate","getEarliestDate","getEarliestString","getLatestString","eq","lt","gt","m1","m2","getAnchor","anchor_id","score","edge_count","areConnected","min_size","max_size","_push","list","filter","cache","projectTimeLine","itemTimeLine","node_filters","edge_filters","max_window","scoring_function","sizing_function","filter_unconnected","filter_nc_engineers","images","default_image","project_text","_rebuilding","_isASocialObject","getHook","Sources","biographies","image","clearCache","getWindow","filterWindow","project_filter","filterProject","source_filter","filterSource","node_filter","getConnectionsTo","group_filter","inGroup","new_window","fitted","_fitWindow","filtered","getNodeFilters","filterUnconnected","getEdgeFilters","f","_getType","getPeople","getBusinesses","result","highlightConnections","highlight_connections","clear_previous","getAffiliations","projectFilter","got_anchor","isString","isArray","category","getNodes","concat","getEdges","counts","add_count","count","getScoringFunction","getSizingFunction","added","getNotes","Source","_isASourceObject","remove_page_numbers","_generate_source_uid","_isASourcesObject","map","webpackContext","req","webpackContextResolve","__webpack_require__","o","code","resolve","module","exports"],"sourceRoot":""}